import{createMemoryHistory as e,Action as t,parsePath as n}from"history";import{createContext as r,useRef as a,useReducer as l,useLayoutEffect as i,createElement as c,useContext as o,useEffect as u,useMemo as s,useCallback as p,Children as h,isValidElement as f,Fragment as m}from"react";function g(e,t){if(!e)throw Error(t)}let d=r({static:!1}),v=r({outlet:null,params:{},pathname:"",route:null});function y(){return S()}function R({children:e=null,action:n=t.Pop,location:r,navigator:a,static:l=!1}){return $()&&g(!1),c(d.Provider,{children:e,value:{action:n,location:r,navigator:a,static:l}})}function $(){return null!=o(d).location}function x(){return $()||g(!1),o(d).location}function E(){$()||g(!1);let e=o(d).navigator,{pathname:t}=o(v),n=a(!1);return u(()=>{n.current=!0}),p((r,a={})=>{n.current&&("number"==typeof r?e.go(r):(r=k(r,t),(a.replace?e.replace:e.push)(r,a.state)))},[e,t])}function S(){return o(v).outlet}function P(e){let{pathname:t}=o(v);return s(()=>k(e,t),[e,t])}function j(e,t=""){let{pathname:n,params:r}=o(v);t=t?[n,t].join("/").replace(/\/\/+/g,"/"):n;let a=x(),l=s(()=>I(e,a,t),[a,e,t]);return l?l.reduceRight((e,{params:n,pathname:a,route:l})=>c(v.Provider,{children:l.element,value:{outlet:e,params:{...r,...n},pathname:[t,a].join("/").replace(/\/\/+/g,"/"),route:l}}),null):null}function w(e){return e.map(e=>{let t={path:e.path||"/",caseSensitive:!0===e.caseSensitive,element:e.element||c(y,null)};return e.children&&(t.children=w(e.children)),t})}function b(e){let t=[];return h.forEach(e,e=>{if(f(e))if(e.type===m)t.push.apply(t,b(e.props.children));else{var n={path:e.props.path||"/",caseSensitive:!0===e.props.caseSensitive,element:e};e.props.children&&((e=b(e.props.children)).length&&(n.children=e)),t.push(n)}}),t}function I(e,t,r=""){if("string"==typeof t&&(t=n(t)),t=t.pathname||"/",r){if(r=r.replace(/^\/*/,"/").replace(/\/+$/,""),!t.startsWith(r))return null;t=t===r?"/":t.slice(r.length)}!function(e){let t=e.reduce((e,[t])=>(e[t]=function(e){let t=(e=e.split("/")).length;return e.some(W)&&(t+=-2),e.filter(e=>"*"!==e).reduce((e,t)=>e+(O.test(t)?2:""===t?1:10),t)}(t),e),{});!function(e,t){let n=e.slice(0);e.sort((e,r)=>t(e,r)||n.indexOf(e)-n.indexOf(r))}(e,(e,n)=>{let[r,,a]=e;e=t[r];let[l,,i]=n;return e!==(n=t[l])?n-e:function(e,t){return e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n])?e[e.length-1]-t[t.length-1]:0}(a,i)})}(e=function e(t,n=[],r="",a=[],l=[]){return t.forEach((t,i)=>{let c=[r,t.path].join("/").replace(/\/\/+/g,"/"),o=a.concat(t);i=l.concat(i),t.children&&e(t.children,n,c,o,i),n.push([c,o,i])}),n}(e));var a=null;for(r=0;null==a&&r<e.length;++r)e:{a=t;let n=e[r][1],i="/",c={},o=[];for(let e=0;e<n.length;++e){let t=n[e];var l="/"===i?a:a.slice(i.length)||"/";if(!(l=C({path:t.path,caseSensitive:t.caseSensitive,end:e===n.length-1},l))){a=null;break e}i=[i,l.pathname].join("/").replace(/\/\/+/g,"/"),c={...c,...l.params},o.push({route:t,pathname:i,params:c})}a=o}return a}let O=/^:\w+$/,W=e=>"*"===e;function C(e,t){"string"==typeof e&&(e={path:e});let{path:n,caseSensitive:r=!1,end:a=!0}=e,[l,i]=function(e,t,n){let r=[],a="^("+e.replace(/^\/*/,"/").replace(/\/?\*?$/,"").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(e,t)=>(r.push(t),"([^\\/]+)"))+")";return e.endsWith("*")?(e.endsWith("/*")&&(a+="\\/?"),r.push("*"),a+="(.*)"):n&&(a+="\\/?"),n&&(a+="$"),[new RegExp(a,t?void 0:"i"),r]}(n,r,a);if(!(t=t.match(l)))return null;e=t[1];let c=t.slice(2);return t=i.reduce((e,t,n)=>{n=c[n];try{var r=decodeURIComponent(n.replace(/\+/g," "))}catch(a){r=n}return e[t]=r,e},{}),{path:n,pathname:e,params:t}}function k(e,t="/"){let{pathname:r,search:a="",hash:l=""}="string"==typeof e?n(e):e;return{pathname:r?F(r,r.startsWith("/")?"/":t):t,search:a,hash:l}}function F(e,t){let n=t.replace(/\/+$/,"").replace(/\/\/+/g,"/").split("/");return e.replace(/\/\/+/g,"/").split("/").forEach(e=>{".."===e?1<n.length&&n.pop():"."!==e&&n.push(e)}),1<n.length?n.join("/").replace(/\/\/+/g,"/"):"/"}function A({children:t,initialEntries:n,initialIndex:r}){let o=a();null==o.current&&(o.current=e({initialEntries:n,initialIndex:r}));let u=o.current,[s,p]=l((e,t)=>t,{action:u.action,location:u.location});return i(()=>u.listen(p),[u]),c(R,{children:t,action:s.action,location:s.location,navigator:u})}function H({to:e,replace:t,state:n}){$()||g(!1);let r=E();return u(()=>{r(e,{replace:t,state:n})}),null}function L({element:e=c(y,null)}){return e}function N({basename:e="",children:t}){return j(t=b(t),e)}function U(e,t={}){return e.replace(/:(\w+)/g,(e,n)=>(null==t[n]&&g(!1),t[n])).replace(/\/*\*$/,()=>null==t["*"]?"":t["*"].replace(/^\/*/,"/"))}function q(e,t=!0){$()||g(!1);let n=o(d).navigator;u(()=>{if(t){var r=n.block(t=>{e({...t,retry(){r(),t.retry()}})});return r}},[n,e,t])}function z(e){$()||g(!1);let t=o(d).navigator;return e=P(e),t.createHref(e)}function B(e){return $()||g(!1),C(e,x().pathname)}function D(){return o(v).params}function G(e,t=""){return $()||g(!1),j(s(()=>w(e),[e]),t)}export{A as MemoryRouter,H as Navigate,y as Outlet,L as Route,R as Router,N as Routes,w as createRoutesFromArray,b as createRoutesFromChildren,U as generatePath,C as matchPath,I as matchRoutes,k as resolvePath,q as useBlocker,z as useHref,$ as useInRouterContext,x as useLocation,B as useMatch,E as useNavigate,S as useOutlet,D as useParams,P as useResolvedPath,G as useRoutes};
//# sourceMappingURL=react-router.production.min.js.map
