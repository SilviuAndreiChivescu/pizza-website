{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport _isNull from \"lodash/isNull\";\nimport _isUndefined from \"lodash/isUndefined\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport Input from '../Input';\nimport ErrorMessage from '../ErrorMessage';\nimport { getUnhandledProps, defaultProps, prefix } from '../utils';\nimport { PLACEMENT_8 } from '../constants';\nimport FormContext, { FormValueContext, FormErrorContext, FormPlaintextContext } from '../Form/FormContext';\n\nvar FormControl = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(FormControl, _React$Component);\n\n  function FormControl(_props, context) {\n    var _this;\n\n    _this = _React$Component.call(this, _props, context) || this;\n\n    _this.handleFieldChange = function (value, event) {\n      var _this$props = _this.props,\n          name = _this$props.name,\n          onChange = _this$props.onChange;\n      var onFieldChange = _this.context.onFieldChange;\n\n      var checkTrigger = _this.getCheckTrigger();\n\n      _this.setState({\n        value: value\n      });\n\n      _this.handleFieldCheck(value, checkTrigger === 'change').then(function (checkResult) {\n        _this.setState({\n          checkResult: checkResult\n        });\n      });\n\n      onFieldChange(name, value, event);\n      onChange === null || onChange === void 0 ? void 0 : onChange(value, event);\n    };\n\n    _this.handleFieldBlur = function (event) {\n      var _this$props$onBlur, _this$props2;\n\n      var checkTrigger = _this.getCheckTrigger();\n\n      var value = _this.getValue() || _this.state.value;\n\n      _this.handleFieldCheck(value, checkTrigger === 'blur');\n\n      (_this$props$onBlur = (_this$props2 = _this.props).onBlur) === null || _this$props$onBlur === void 0 ? void 0 : _this$props$onBlur.call(_this$props2, event);\n    };\n\n    _this.handleFieldCheck = function (value, isCheckTrigger, callback) {\n      var _this$props3 = _this.props,\n          name = _this$props3.name,\n          formValue = _this$props3.formValue,\n          checkAsync = _this$props3.checkAsync;\n      var _this$context = _this.context,\n          onFieldError = _this$context.onFieldError,\n          onFieldSuccess = _this$context.onFieldSuccess,\n          model = _this$context.model;\n\n      var callbackEvents = function callbackEvents(checkResult) {\n        if (isCheckTrigger) {\n          if (checkResult.hasError) {\n            onFieldError(name, checkResult.errorMessage, callback);\n          } else {\n            onFieldSuccess(name, callback);\n          }\n        }\n\n        return checkResult;\n      };\n\n      if (checkAsync) {\n        return model.checkForFieldAsync(name, value, formValue).then(function (checkResult) {\n          return callbackEvents(checkResult);\n        });\n      }\n\n      return Promise.resolve(callbackEvents(model.checkForField(name, value, formValue)));\n    };\n\n    _this.addPrefix = function (name) {\n      return prefix(_this.props.classPrefix)(name);\n    };\n\n    _this.renderError = function (formError, errorMessage) {\n      var _this$props4 = _this.props,\n          errorPlacement = _this$props4.errorPlacement,\n          name = _this$props4.name;\n\n      if (formError) {\n        errorMessage = formError[name];\n      }\n\n      return React.createElement(ErrorMessage, {\n        show: !!errorMessage,\n        className: _this.addPrefix('message-wrapper'),\n        placement: errorPlacement\n      }, errorMessage);\n    };\n\n    _this.renderAccepter = function () {\n      var _this$props5 = _this.props,\n          name = _this$props5.name,\n          Component = _this$props5.accepter,\n          props = _objectWithoutPropertiesLoose(_this$props5, [\"name\", \"accepter\"]);\n\n      var _this$context$formDef = _this.context.formDefaultValue,\n          formDefaultValue = _this$context$formDef === void 0 ? {} : _this$context$formDef;\n      var unhandled = getUnhandledProps(FormControl, props);\n\n      var value = _this.getValue();\n\n      var readOnly = _this.getReadOnly();\n\n      return React.createElement(Component, _extends({}, unhandled, {\n        readOnly: readOnly,\n        name: name,\n        onChange: _this.handleFieldChange,\n        onBlur: _this.handleFieldBlur,\n        defaultValue: formDefaultValue[name],\n        value: value\n      }));\n    };\n\n    if (!context || !context.onFieldChange) {\n      throw new Error(\"\\n        <FormControl> must be inside a component decorated with <Form>.\\n        And need to update React to 16.6.0 +.\\n      \");\n    }\n\n    var _context$formDefaultV = context.formDefaultValue,\n        _formDefaultValue = _context$formDefaultV === void 0 ? {} : _context$formDefaultV;\n\n    var _name = _props.name;\n    _this.state = {\n      checkResult: {},\n      value: _this.getValue(_props) || _formDefaultValue[_name]\n    };\n    return _this;\n  }\n\n  var _proto = FormControl.prototype;\n\n  _proto.getValue = function getValue(props) {\n    var _ref = props || this.props,\n        formValue = _ref.formValue,\n        name = _ref.name,\n        value = _ref.value;\n\n    if (!_isUndefined(value)) {\n      return value;\n    }\n\n    if (!formValue) {\n      return;\n    }\n\n    return formValue[name];\n  };\n\n  _proto.getCheckTrigger = function getCheckTrigger() {\n    var checkTrigger = this.context.checkTrigger;\n    return this.props.checkTrigger || checkTrigger;\n  };\n\n  _proto.getReadOnly = function getReadOnly() {\n    var readOnly = this.context.readOnly;\n\n    if (!_isUndefined(readOnly)) {\n      return readOnly;\n    }\n\n    return this.props.readOnly;\n  };\n\n  _proto.getPlaintext = function getPlaintext() {\n    var plaintext = this.context.plaintext;\n\n    if (!_isUndefined(plaintext)) {\n      return plaintext;\n    }\n\n    return this.props.plaintext;\n  };\n\n  _proto.checkErrorFromContext = function checkErrorFromContext() {\n    var errorFromContext = this.context.errorFromContext;\n    var errorMessage = this.props.errorMessage;\n\n    if (typeof errorMessage !== 'undefined') {\n      return this.renderError(undefined, errorMessage);\n    }\n\n    if (errorFromContext) {\n      return React.createElement(FormErrorContext.Consumer, null, this.renderError);\n    }\n\n    return null;\n  };\n\n  _proto.render = function render() {\n    var plaintextDefaultValue = this.props.plaintextDefaultValue;\n    var readOnly = this.getReadOnly();\n    var plaintext = this.getPlaintext();\n    var value = this.getValue();\n    var classes = classNames(this.addPrefix('wrapper'), {\n      'read-only': readOnly,\n      plaintext: plaintext\n    });\n\n    if (plaintext && (_isUndefined(value) || _isNull(value))) {\n      return React.createElement(\"div\", {\n        className: classes\n      }, React.createElement(\"div\", {\n        className: this.addPrefix('default-value')\n      }, plaintextDefaultValue));\n    }\n\n    return React.createElement(\"div\", {\n      className: classes\n    }, React.createElement(FormPlaintextContext.Provider, {\n      value: plaintext\n    }, this.renderAccepter()), this.checkErrorFromContext());\n  };\n\n  return FormControl;\n}(React.Component);\n\nFormControl.contextType = FormContext;\nFormControl.propTypes = {\n  name: PropTypes.string,\n  checkTrigger: PropTypes.oneOf(['change', 'blur', 'none']),\n  checkAsync: PropTypes.bool,\n  accepter: PropTypes.elementType,\n  onChange: PropTypes.func,\n  onBlur: PropTypes.func,\n  classPrefix: PropTypes.string,\n  errorMessage: PropTypes.node,\n  errorPlacement: PropTypes.oneOf(PLACEMENT_8),\n  formValue: PropTypes.object,\n  readOnly: PropTypes.bool,\n  plaintext: PropTypes.bool,\n  plaintextDefaultValue: PropTypes.node,\n  value: PropTypes.any\n};\nFormControl.defaultProps = {\n  accepter: Input,\n  errorPlacement: 'bottomStart',\n  plaintextDefaultValue: '--'\n};\n\nvar FormControlWrapper = /*#__PURE__*/function (_React$Component2) {\n  _inheritsLoose(FormControlWrapper, _React$Component2);\n\n  function FormControlWrapper() {\n    return _React$Component2.apply(this, arguments) || this;\n  }\n\n  var _proto2 = FormControlWrapper.prototype;\n\n  _proto2.render = function render() {\n    var _this2 = this;\n\n    return React.createElement(FormValueContext.Consumer, null, function (formValue) {\n      return React.createElement(FormControl, _extends({}, _this2.props, {\n        formValue: formValue\n      }));\n    });\n  };\n\n  return FormControlWrapper;\n}(React.Component);\n\nvar EnhancedFormControl = defaultProps({\n  classPrefix: 'form-control'\n})(FormControlWrapper);\nexport default EnhancedFormControl;","map":{"version":3,"sources":["E:/OneDrive - University of Salford/Desktop/pizza-website/node_modules/rsuite/es/FormControl/FormControl.js"],"names":["_extends","_objectWithoutPropertiesLoose","_inheritsLoose","_isNull","_isUndefined","React","PropTypes","classNames","Input","ErrorMessage","getUnhandledProps","defaultProps","prefix","PLACEMENT_8","FormContext","FormValueContext","FormErrorContext","FormPlaintextContext","FormControl","_React$Component","_props","context","_this","call","handleFieldChange","value","event","_this$props","props","name","onChange","onFieldChange","checkTrigger","getCheckTrigger","setState","handleFieldCheck","then","checkResult","handleFieldBlur","_this$props$onBlur","_this$props2","getValue","state","onBlur","isCheckTrigger","callback","_this$props3","formValue","checkAsync","_this$context","onFieldError","onFieldSuccess","model","callbackEvents","hasError","errorMessage","checkForFieldAsync","Promise","resolve","checkForField","addPrefix","classPrefix","renderError","formError","_this$props4","errorPlacement","createElement","show","className","placement","renderAccepter","_this$props5","Component","accepter","_this$context$formDef","formDefaultValue","unhandled","readOnly","getReadOnly","defaultValue","Error","_context$formDefaultV","_formDefaultValue","_name","_proto","prototype","_ref","getPlaintext","plaintext","checkErrorFromContext","errorFromContext","undefined","Consumer","render","plaintextDefaultValue","classes","Provider","contextType","propTypes","string","oneOf","bool","elementType","func","node","object","any","FormControlWrapper","_React$Component2","apply","arguments","_proto2","_this2","EnhancedFormControl"],"mappings":"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","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport _isNull from \"lodash/isNull\";\nimport _isUndefined from \"lodash/isUndefined\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport Input from '../Input';\nimport ErrorMessage from '../ErrorMessage';\nimport { getUnhandledProps, defaultProps, prefix } from '../utils';\nimport { PLACEMENT_8 } from '../constants';\nimport FormContext, { FormValueContext, FormErrorContext, FormPlaintextContext } from '../Form/FormContext';\n\nvar FormControl =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inheritsLoose(FormControl, _React$Component);\n\n  function FormControl(_props, context) {\n    var _this;\n\n    _this = _React$Component.call(this, _props, context) || this;\n\n    _this.handleFieldChange = function (value, event) {\n      var _this$props = _this.props,\n          name = _this$props.name,\n          onChange = _this$props.onChange;\n      var onFieldChange = _this.context.onFieldChange;\n\n      var checkTrigger = _this.getCheckTrigger();\n\n      _this.setState({\n        value: value\n      });\n\n      _this.handleFieldCheck(value, checkTrigger === 'change').then(function (checkResult) {\n        _this.setState({\n          checkResult: checkResult\n        });\n      });\n\n      onFieldChange(name, value, event);\n      onChange === null || onChange === void 0 ? void 0 : onChange(value, event);\n    };\n\n    _this.handleFieldBlur = function (event) {\n      var _this$props$onBlur, _this$props2;\n\n      var checkTrigger = _this.getCheckTrigger();\n\n      var value = _this.getValue() || _this.state.value;\n\n      _this.handleFieldCheck(value, checkTrigger === 'blur');\n\n      (_this$props$onBlur = (_this$props2 = _this.props).onBlur) === null || _this$props$onBlur === void 0 ? void 0 : _this$props$onBlur.call(_this$props2, event);\n    };\n\n    _this.handleFieldCheck = function (value, isCheckTrigger, callback) {\n      var _this$props3 = _this.props,\n          name = _this$props3.name,\n          formValue = _this$props3.formValue,\n          checkAsync = _this$props3.checkAsync;\n      var _this$context = _this.context,\n          onFieldError = _this$context.onFieldError,\n          onFieldSuccess = _this$context.onFieldSuccess,\n          model = _this$context.model;\n\n      var callbackEvents = function callbackEvents(checkResult) {\n        if (isCheckTrigger) {\n          if (checkResult.hasError) {\n            onFieldError(name, checkResult.errorMessage, callback);\n          } else {\n            onFieldSuccess(name, callback);\n          }\n        }\n\n        return checkResult;\n      };\n\n      if (checkAsync) {\n        return model.checkForFieldAsync(name, value, formValue).then(function (checkResult) {\n          return callbackEvents(checkResult);\n        });\n      }\n\n      return Promise.resolve(callbackEvents(model.checkForField(name, value, formValue)));\n    };\n\n    _this.addPrefix = function (name) {\n      return prefix(_this.props.classPrefix)(name);\n    };\n\n    _this.renderError = function (formError, errorMessage) {\n      var _this$props4 = _this.props,\n          errorPlacement = _this$props4.errorPlacement,\n          name = _this$props4.name;\n\n      if (formError) {\n        errorMessage = formError[name];\n      }\n\n      return React.createElement(ErrorMessage, {\n        show: !!errorMessage,\n        className: _this.addPrefix('message-wrapper'),\n        placement: errorPlacement\n      }, errorMessage);\n    };\n\n    _this.renderAccepter = function () {\n      var _this$props5 = _this.props,\n          name = _this$props5.name,\n          Component = _this$props5.accepter,\n          props = _objectWithoutPropertiesLoose(_this$props5, [\"name\", \"accepter\"]);\n\n      var _this$context$formDef = _this.context.formDefaultValue,\n          formDefaultValue = _this$context$formDef === void 0 ? {} : _this$context$formDef;\n      var unhandled = getUnhandledProps(FormControl, props);\n\n      var value = _this.getValue();\n\n      var readOnly = _this.getReadOnly();\n\n      return React.createElement(Component, _extends({}, unhandled, {\n        readOnly: readOnly,\n        name: name,\n        onChange: _this.handleFieldChange,\n        onBlur: _this.handleFieldBlur,\n        defaultValue: formDefaultValue[name],\n        value: value\n      }));\n    };\n\n    if (!context || !context.onFieldChange) {\n      throw new Error(\"\\n        <FormControl> must be inside a component decorated with <Form>.\\n        And need to update React to 16.6.0 +.\\n      \");\n    }\n\n    var _context$formDefaultV = context.formDefaultValue,\n        _formDefaultValue = _context$formDefaultV === void 0 ? {} : _context$formDefaultV;\n\n    var _name = _props.name;\n    _this.state = {\n      checkResult: {},\n      value: _this.getValue(_props) || _formDefaultValue[_name]\n    };\n    return _this;\n  }\n\n  var _proto = FormControl.prototype;\n\n  _proto.getValue = function getValue(props) {\n    var _ref = props || this.props,\n        formValue = _ref.formValue,\n        name = _ref.name,\n        value = _ref.value;\n\n    if (!_isUndefined(value)) {\n      return value;\n    }\n\n    if (!formValue) {\n      return;\n    }\n\n    return formValue[name];\n  };\n\n  _proto.getCheckTrigger = function getCheckTrigger() {\n    var checkTrigger = this.context.checkTrigger;\n    return this.props.checkTrigger || checkTrigger;\n  };\n\n  _proto.getReadOnly = function getReadOnly() {\n    var readOnly = this.context.readOnly;\n\n    if (!_isUndefined(readOnly)) {\n      return readOnly;\n    }\n\n    return this.props.readOnly;\n  };\n\n  _proto.getPlaintext = function getPlaintext() {\n    var plaintext = this.context.plaintext;\n\n    if (!_isUndefined(plaintext)) {\n      return plaintext;\n    }\n\n    return this.props.plaintext;\n  };\n\n  _proto.checkErrorFromContext = function checkErrorFromContext() {\n    var errorFromContext = this.context.errorFromContext;\n    var errorMessage = this.props.errorMessage;\n\n    if (typeof errorMessage !== 'undefined') {\n      return this.renderError(undefined, errorMessage);\n    }\n\n    if (errorFromContext) {\n      return React.createElement(FormErrorContext.Consumer, null, this.renderError);\n    }\n\n    return null;\n  };\n\n  _proto.render = function render() {\n    var plaintextDefaultValue = this.props.plaintextDefaultValue;\n    var readOnly = this.getReadOnly();\n    var plaintext = this.getPlaintext();\n    var value = this.getValue();\n    var classes = classNames(this.addPrefix('wrapper'), {\n      'read-only': readOnly,\n      plaintext: plaintext\n    });\n\n    if (plaintext && (_isUndefined(value) || _isNull(value))) {\n      return React.createElement(\"div\", {\n        className: classes\n      }, React.createElement(\"div\", {\n        className: this.addPrefix('default-value')\n      }, plaintextDefaultValue));\n    }\n\n    return React.createElement(\"div\", {\n      className: classes\n    }, React.createElement(FormPlaintextContext.Provider, {\n      value: plaintext\n    }, this.renderAccepter()), this.checkErrorFromContext());\n  };\n\n  return FormControl;\n}(React.Component);\n\nFormControl.contextType = FormContext;\nFormControl.propTypes = {\n  name: PropTypes.string,\n  checkTrigger: PropTypes.oneOf(['change', 'blur', 'none']),\n  checkAsync: PropTypes.bool,\n  accepter: PropTypes.elementType,\n  onChange: PropTypes.func,\n  onBlur: PropTypes.func,\n  classPrefix: PropTypes.string,\n  errorMessage: PropTypes.node,\n  errorPlacement: PropTypes.oneOf(PLACEMENT_8),\n  formValue: PropTypes.object,\n  readOnly: PropTypes.bool,\n  plaintext: PropTypes.bool,\n  plaintextDefaultValue: PropTypes.node,\n  value: PropTypes.any\n};\nFormControl.defaultProps = {\n  accepter: Input,\n  errorPlacement: 'bottomStart',\n  plaintextDefaultValue: '--'\n};\n\nvar FormControlWrapper =\n/*#__PURE__*/\nfunction (_React$Component2) {\n  _inheritsLoose(FormControlWrapper, _React$Component2);\n\n  function FormControlWrapper() {\n    return _React$Component2.apply(this, arguments) || this;\n  }\n\n  var _proto2 = FormControlWrapper.prototype;\n\n  _proto2.render = function render() {\n    var _this2 = this;\n\n    return React.createElement(FormValueContext.Consumer, null, function (formValue) {\n      return React.createElement(FormControl, _extends({}, _this2.props, {\n        formValue: formValue\n      }));\n    });\n  };\n\n  return FormControlWrapper;\n}(React.Component);\n\nvar EnhancedFormControl = defaultProps({\n  classPrefix: 'form-control'\n})(FormControlWrapper);\nexport default EnhancedFormControl;"]},"metadata":{},"sourceType":"module"}