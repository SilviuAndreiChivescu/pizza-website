{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport { ownerDocument, activeElement, contains, getContainer, on } from 'dom-lib';\nimport canUseDom from 'dom-lib/lib/query/canUseDOM';\nimport Portal from '../Portal';\nimport ModalManager from './ModalManager';\nimport Fade from '../Animation/Fade';\nimport getDOMNode from '../utils/getDOMNode';\nimport mergeRefs from '../utils/mergeRefs';\n\nvar RefHolder = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(RefHolder, _React$Component);\n\n  function RefHolder() {\n    return _React$Component.apply(this, arguments) || this;\n  }\n\n  var _proto = RefHolder.prototype;\n\n  _proto.render = function render() {\n    return this.props.children || null;\n  };\n\n  return RefHolder;\n}(React.Component);\n\nvar modalManager = new ModalManager();\n\nvar BaseModal = /*#__PURE__*/function (_React$Component2) {\n  _inheritsLoose(BaseModal, _React$Component2);\n\n  function BaseModal(props) {\n    var _this;\n\n    _this = _React$Component2.call(this, props) || this;\n    _this.mountNode = null;\n    _this.modalNodeRef = null;\n    _this.backdropRef = null;\n    _this.dialogRef = null;\n    _this.lastFocus = null;\n    _this.onDocumentKeyupListener = null;\n    _this.onFocusinListener = null;\n\n    _this.setMountNodeRef = function (ref) {\n      var _ref$getMountNode;\n\n      _this.mountNode = ref === null || ref === void 0 ? void 0 : (_ref$getMountNode = ref.getMountNode) === null || _ref$getMountNode === void 0 ? void 0 : _ref$getMountNode.call(ref);\n    };\n\n    _this.handleHidden = function (args) {\n      var _this$props$onExited, _this$props;\n\n      _this.setState({\n        exited: true\n      });\n\n      _this.onHide();\n\n      (_this$props$onExited = (_this$props = _this.props).onExited) === null || _this$props$onExited === void 0 ? void 0 : _this$props$onExited.call(_this$props, args);\n    };\n\n    _this.handleBackdropClick = function (event) {\n      if (event.target !== event.currentTarget) {\n        return;\n      }\n\n      var _this$props2 = _this.props,\n          onBackdropClick = _this$props2.onBackdropClick,\n          backdrop = _this$props2.backdrop,\n          onHide = _this$props2.onHide;\n      onBackdropClick === null || onBackdropClick === void 0 ? void 0 : onBackdropClick(event);\n      backdrop && (onHide === null || onHide === void 0 ? void 0 : onHide(event));\n    };\n\n    _this.handleDocumentKeyUp = function (event) {\n      var _this$props3 = _this.props,\n          keyboard = _this$props3.keyboard,\n          onHide = _this$props3.onHide,\n          onEscapeKeyUp = _this$props3.onEscapeKeyUp;\n\n      if (keyboard && event.keyCode === 27 && _this.isTopModal()) {\n        onEscapeKeyUp === null || onEscapeKeyUp === void 0 ? void 0 : onEscapeKeyUp(event);\n        onHide === null || onHide === void 0 ? void 0 : onHide(event);\n      }\n    };\n\n    _this.enforceFocus = function () {\n      var enforceFocus = _this.props.enforceFocus;\n\n      if (!enforceFocus || !_this.isTopModal()) {\n        return;\n      }\n\n      var active = activeElement(ownerDocument(_assertThisInitialized(_this)));\n\n      var modal = _this.getDialogElement();\n\n      if (modal && modal !== active && !contains(modal, active)) {\n        modal.focus();\n      }\n    };\n\n    _this.state = {\n      exited: !props.show\n    };\n    _this.backdropRef = React.createRef();\n    _this.modalNodeRef = React.createRef();\n    _this.dialogRef = React.createRef();\n    return _this;\n  }\n\n  var _proto2 = BaseModal.prototype;\n\n  _proto2.componentDidMount = function componentDidMount() {\n    if (this.props.show) {\n      this.onShow();\n    }\n  };\n\n  BaseModal.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps) {\n    if (nextProps.show) {\n      return {\n        exited: false\n      };\n    } else if (!nextProps.transition) {\n      // Otherwise let handleHidden take care of marking exited.\n      return {\n        exited: true\n      };\n    }\n\n    return null;\n  };\n\n  _proto2.getSnapshotBeforeUpdate = function getSnapshotBeforeUpdate(prevProps) {\n    if (this.props.show && !prevProps.show) {\n      this.checkForFocus();\n    }\n\n    return null;\n  };\n\n  _proto2.componentDidUpdate = function componentDidUpdate(prevProps) {\n    var transition = this.props.transition;\n\n    if (prevProps.show && !this.props.show && !transition) {\n      // Otherwise handleHidden will call this.\n      this.onHide();\n    } else if (!prevProps.show && this.props.show) {\n      this.onShow();\n    }\n  };\n\n  _proto2.componentWillUnmount = function componentWillUnmount() {\n    var _this$props4 = this.props,\n        show = _this$props4.show,\n        transition = _this$props4.transition;\n\n    if (show || transition && !this.state.exited) {\n      this.onHide();\n    }\n  };\n\n  _proto2.onShow = function onShow() {\n    var _this$props$onShow, _this$props5;\n\n    var doc = ownerDocument(this);\n    var container = getContainer(this.props.container, doc.body);\n    var containerClassName = this.props.containerClassName;\n    modalManager.add(this, container, containerClassName);\n    this.onDocumentKeyupListener = on(doc, 'keyup', this.handleDocumentKeyUp);\n    this.onFocusinListener = on(doc, 'focus', this.enforceFocus);\n    (_this$props$onShow = (_this$props5 = this.props).onShow) === null || _this$props$onShow === void 0 ? void 0 : _this$props$onShow.call(_this$props5);\n  };\n\n  _proto2.onHide = function onHide() {\n    var _this$onDocumentKeyup, _this$onFocusinListen;\n\n    modalManager.remove(this);\n    (_this$onDocumentKeyup = this.onDocumentKeyupListener) === null || _this$onDocumentKeyup === void 0 ? void 0 : _this$onDocumentKeyup.off();\n    (_this$onFocusinListen = this.onFocusinListener) === null || _this$onFocusinListen === void 0 ? void 0 : _this$onFocusinListen.off();\n    this.restoreLastFocus();\n  };\n\n  _proto2.getDialogElement = function getDialogElement() {\n    return getDOMNode(this.dialogRef.current);\n  };\n\n  _proto2.isTopModal = function isTopModal() {\n    return modalManager.isTopModal(this);\n  };\n\n  _proto2.checkForFocus = function checkForFocus() {\n    if (canUseDom) {\n      this.lastFocus = activeElement();\n    }\n  };\n\n  _proto2.restoreLastFocus = function restoreLastFocus() {\n    // Support: <=IE11 doesn't support `focus()` on svg elements\n    if (this.lastFocus) {\n      var _this$lastFocus$focus, _this$lastFocus;\n\n      (_this$lastFocus$focus = (_this$lastFocus = this.lastFocus).focus) === null || _this$lastFocus$focus === void 0 ? void 0 : _this$lastFocus$focus.call(_this$lastFocus);\n      this.lastFocus = null;\n    }\n  };\n\n  _proto2.renderBackdrop = function renderBackdrop() {\n    var _this2 = this;\n\n    var _this$props6 = this.props,\n        transition = _this$props6.transition,\n        backdrop = _this$props6.backdrop,\n        backdropTransitionTimeout = _this$props6.backdropTransitionTimeout,\n        backdropStyle = _this$props6.backdropStyle,\n        backdropClassName = _this$props6.backdropClassName;\n    var backdropPorps = {\n      style: backdropStyle,\n      onClick: backdrop === true ? this.handleBackdropClick : undefined\n    };\n\n    if (transition) {\n      return React.createElement(Fade, {\n        transitionAppear: true,\n        in: this.props.show,\n        timeout: backdropTransitionTimeout\n      }, function (props, ref) {\n        var className = props.className,\n            rest = _objectWithoutPropertiesLoose(props, [\"className\"]);\n\n        return React.createElement(\"div\", _extends({}, rest, backdropPorps, {\n          className: classNames(backdropClassName, className),\n          ref: mergeRefs(_this2.backdropRef, ref)\n        }));\n      });\n    }\n\n    return React.createElement(\"div\", _extends({\n      ref: this.backdropRef,\n      className: backdropClassName\n    }, backdropPorps));\n  };\n\n  _proto2.render = function render() {\n    var _this$props7 = this.props,\n        children = _this$props7.children,\n        Transition = _this$props7.transition,\n        backdrop = _this$props7.backdrop,\n        dialogTransitionTimeout = _this$props7.dialogTransitionTimeout,\n        style = _this$props7.style,\n        className = _this$props7.className,\n        container = _this$props7.container,\n        animationProps = _this$props7.animationProps,\n        onExit = _this$props7.onExit,\n        onExiting = _this$props7.onExiting,\n        onEnter = _this$props7.onEnter,\n        onEntering = _this$props7.onEntering,\n        onEntered = _this$props7.onEntered,\n        rest = _objectWithoutPropertiesLoose(_this$props7, [\"children\", \"transition\", \"backdrop\", \"dialogTransitionTimeout\", \"style\", \"className\", \"container\", \"animationProps\", \"onExit\", \"onExiting\", \"onEnter\", \"onEntering\", \"onEntered\"]);\n\n    var show = !!rest.show;\n    var mountModal = show || Transition && !this.state.exited;\n\n    if (!mountModal) {\n      return null;\n    }\n\n    var dialog = children;\n\n    if (Transition) {\n      dialog = React.createElement(Transition, _extends({}, animationProps, {\n        transitionAppear: true,\n        unmountOnExit: true,\n        in: show,\n        timeout: dialogTransitionTimeout,\n        onExit: onExit,\n        onExiting: onExiting,\n        onExited: this.handleHidden,\n        onEnter: onEnter,\n        onEntering: onEntering,\n        onEntered: onEntered\n      }), dialog);\n    }\n\n    return React.createElement(Portal, {\n      ref: this.setMountNodeRef,\n      container: container\n    }, React.createElement(\"div\", {\n      ref: this.modalNodeRef,\n      role: rest.role,\n      style: style,\n      className: className\n    }, backdrop && this.renderBackdrop(), React.createElement(RefHolder, {\n      ref: this.dialogRef\n    }, dialog)));\n  };\n\n  return BaseModal;\n}(React.Component);\n\nBaseModal.manager = modalManager;\nBaseModal.defaultProps = {\n  backdrop: true,\n  keyboard: true,\n  autoFocus: true,\n  enforceFocus: true\n};\nexport default BaseModal;","map":{"version":3,"sources":["E:/OneDrive - University of Salford/Desktop/pizza-website/node_modules/rsuite/es/Modal/BaseModal.js"],"names":["_extends","_objectWithoutPropertiesLoose","_assertThisInitialized","_inheritsLoose","React","classNames","ownerDocument","activeElement","contains","getContainer","on","canUseDom","Portal","ModalManager","Fade","getDOMNode","mergeRefs","RefHolder","_React$Component","apply","arguments","_proto","prototype","render","props","children","Component","modalManager","BaseModal","_React$Component2","_this","call","mountNode","modalNodeRef","backdropRef","dialogRef","lastFocus","onDocumentKeyupListener","onFocusinListener","setMountNodeRef","ref","_ref$getMountNode","getMountNode","handleHidden","args","_this$props$onExited","_this$props","setState","exited","onHide","onExited","handleBackdropClick","event","target","currentTarget","_this$props2","onBackdropClick","backdrop","handleDocumentKeyUp","_this$props3","keyboard","onEscapeKeyUp","keyCode","isTopModal","enforceFocus","active","modal","getDialogElement","focus","state","show","createRef","_proto2","componentDidMount","onShow","getDerivedStateFromProps","nextProps","transition","getSnapshotBeforeUpdate","prevProps","checkForFocus","componentDidUpdate","componentWillUnmount","_this$props4","_this$props$onShow","_this$props5","doc","container","body","containerClassName","add","_this$onDocumentKeyup","_this$onFocusinListen","remove","off","restoreLastFocus","current","_this$lastFocus$focus","_this$lastFocus","renderBackdrop","_this2","_this$props6","backdropTransitionTimeout","backdropStyle","backdropClassName","backdropPorps","style","onClick","undefined","createElement","transitionAppear","in","timeout","className","rest","_this$props7","Transition","dialogTransitionTimeout","animationProps","onExit","onExiting","onEnter","onEntering","onEntered","mountModal","dialog","unmountOnExit","role","manager","defaultProps","autoFocus"],"mappings":"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","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport { ownerDocument, activeElement, contains, getContainer, on } from 'dom-lib';\nimport canUseDom from 'dom-lib/lib/query/canUseDOM';\nimport Portal from '../Portal';\nimport ModalManager from './ModalManager';\nimport Fade from '../Animation/Fade';\nimport getDOMNode from '../utils/getDOMNode';\nimport mergeRefs from '../utils/mergeRefs';\n\nvar RefHolder =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inheritsLoose(RefHolder, _React$Component);\n\n  function RefHolder() {\n    return _React$Component.apply(this, arguments) || this;\n  }\n\n  var _proto = RefHolder.prototype;\n\n  _proto.render = function render() {\n    return this.props.children || null;\n  };\n\n  return RefHolder;\n}(React.Component);\n\nvar modalManager = new ModalManager();\n\nvar BaseModal =\n/*#__PURE__*/\nfunction (_React$Component2) {\n  _inheritsLoose(BaseModal, _React$Component2);\n\n  function BaseModal(props) {\n    var _this;\n\n    _this = _React$Component2.call(this, props) || this;\n    _this.mountNode = null;\n    _this.modalNodeRef = null;\n    _this.backdropRef = null;\n    _this.dialogRef = null;\n    _this.lastFocus = null;\n    _this.onDocumentKeyupListener = null;\n    _this.onFocusinListener = null;\n\n    _this.setMountNodeRef = function (ref) {\n      var _ref$getMountNode;\n\n      _this.mountNode = ref === null || ref === void 0 ? void 0 : (_ref$getMountNode = ref.getMountNode) === null || _ref$getMountNode === void 0 ? void 0 : _ref$getMountNode.call(ref);\n    };\n\n    _this.handleHidden = function (args) {\n      var _this$props$onExited, _this$props;\n\n      _this.setState({\n        exited: true\n      });\n\n      _this.onHide();\n\n      (_this$props$onExited = (_this$props = _this.props).onExited) === null || _this$props$onExited === void 0 ? void 0 : _this$props$onExited.call(_this$props, args);\n    };\n\n    _this.handleBackdropClick = function (event) {\n      if (event.target !== event.currentTarget) {\n        return;\n      }\n\n      var _this$props2 = _this.props,\n          onBackdropClick = _this$props2.onBackdropClick,\n          backdrop = _this$props2.backdrop,\n          onHide = _this$props2.onHide;\n      onBackdropClick === null || onBackdropClick === void 0 ? void 0 : onBackdropClick(event);\n      backdrop && (onHide === null || onHide === void 0 ? void 0 : onHide(event));\n    };\n\n    _this.handleDocumentKeyUp = function (event) {\n      var _this$props3 = _this.props,\n          keyboard = _this$props3.keyboard,\n          onHide = _this$props3.onHide,\n          onEscapeKeyUp = _this$props3.onEscapeKeyUp;\n\n      if (keyboard && event.keyCode === 27 && _this.isTopModal()) {\n        onEscapeKeyUp === null || onEscapeKeyUp === void 0 ? void 0 : onEscapeKeyUp(event);\n        onHide === null || onHide === void 0 ? void 0 : onHide(event);\n      }\n    };\n\n    _this.enforceFocus = function () {\n      var enforceFocus = _this.props.enforceFocus;\n\n      if (!enforceFocus || !_this.isTopModal()) {\n        return;\n      }\n\n      var active = activeElement(ownerDocument(_assertThisInitialized(_this)));\n\n      var modal = _this.getDialogElement();\n\n      if (modal && modal !== active && !contains(modal, active)) {\n        modal.focus();\n      }\n    };\n\n    _this.state = {\n      exited: !props.show\n    };\n    _this.backdropRef = React.createRef();\n    _this.modalNodeRef = React.createRef();\n    _this.dialogRef = React.createRef();\n    return _this;\n  }\n\n  var _proto2 = BaseModal.prototype;\n\n  _proto2.componentDidMount = function componentDidMount() {\n    if (this.props.show) {\n      this.onShow();\n    }\n  };\n\n  BaseModal.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps) {\n    if (nextProps.show) {\n      return {\n        exited: false\n      };\n    } else if (!nextProps.transition) {\n      // Otherwise let handleHidden take care of marking exited.\n      return {\n        exited: true\n      };\n    }\n\n    return null;\n  };\n\n  _proto2.getSnapshotBeforeUpdate = function getSnapshotBeforeUpdate(prevProps) {\n    if (this.props.show && !prevProps.show) {\n      this.checkForFocus();\n    }\n\n    return null;\n  };\n\n  _proto2.componentDidUpdate = function componentDidUpdate(prevProps) {\n    var transition = this.props.transition;\n\n    if (prevProps.show && !this.props.show && !transition) {\n      // Otherwise handleHidden will call this.\n      this.onHide();\n    } else if (!prevProps.show && this.props.show) {\n      this.onShow();\n    }\n  };\n\n  _proto2.componentWillUnmount = function componentWillUnmount() {\n    var _this$props4 = this.props,\n        show = _this$props4.show,\n        transition = _this$props4.transition;\n\n    if (show || transition && !this.state.exited) {\n      this.onHide();\n    }\n  };\n\n  _proto2.onShow = function onShow() {\n    var _this$props$onShow, _this$props5;\n\n    var doc = ownerDocument(this);\n    var container = getContainer(this.props.container, doc.body);\n    var containerClassName = this.props.containerClassName;\n    modalManager.add(this, container, containerClassName);\n    this.onDocumentKeyupListener = on(doc, 'keyup', this.handleDocumentKeyUp);\n    this.onFocusinListener = on(doc, 'focus', this.enforceFocus);\n    (_this$props$onShow = (_this$props5 = this.props).onShow) === null || _this$props$onShow === void 0 ? void 0 : _this$props$onShow.call(_this$props5);\n  };\n\n  _proto2.onHide = function onHide() {\n    var _this$onDocumentKeyup, _this$onFocusinListen;\n\n    modalManager.remove(this);\n    (_this$onDocumentKeyup = this.onDocumentKeyupListener) === null || _this$onDocumentKeyup === void 0 ? void 0 : _this$onDocumentKeyup.off();\n    (_this$onFocusinListen = this.onFocusinListener) === null || _this$onFocusinListen === void 0 ? void 0 : _this$onFocusinListen.off();\n    this.restoreLastFocus();\n  };\n\n  _proto2.getDialogElement = function getDialogElement() {\n    return getDOMNode(this.dialogRef.current);\n  };\n\n  _proto2.isTopModal = function isTopModal() {\n    return modalManager.isTopModal(this);\n  };\n\n  _proto2.checkForFocus = function checkForFocus() {\n    if (canUseDom) {\n      this.lastFocus = activeElement();\n    }\n  };\n\n  _proto2.restoreLastFocus = function restoreLastFocus() {\n    // Support: <=IE11 doesn't support `focus()` on svg elements\n    if (this.lastFocus) {\n      var _this$lastFocus$focus, _this$lastFocus;\n\n      (_this$lastFocus$focus = (_this$lastFocus = this.lastFocus).focus) === null || _this$lastFocus$focus === void 0 ? void 0 : _this$lastFocus$focus.call(_this$lastFocus);\n      this.lastFocus = null;\n    }\n  };\n\n  _proto2.renderBackdrop = function renderBackdrop() {\n    var _this2 = this;\n\n    var _this$props6 = this.props,\n        transition = _this$props6.transition,\n        backdrop = _this$props6.backdrop,\n        backdropTransitionTimeout = _this$props6.backdropTransitionTimeout,\n        backdropStyle = _this$props6.backdropStyle,\n        backdropClassName = _this$props6.backdropClassName;\n    var backdropPorps = {\n      style: backdropStyle,\n      onClick: backdrop === true ? this.handleBackdropClick : undefined\n    };\n\n    if (transition) {\n      return React.createElement(Fade, {\n        transitionAppear: true,\n        in: this.props.show,\n        timeout: backdropTransitionTimeout\n      }, function (props, ref) {\n        var className = props.className,\n            rest = _objectWithoutPropertiesLoose(props, [\"className\"]);\n\n        return React.createElement(\"div\", _extends({}, rest, backdropPorps, {\n          className: classNames(backdropClassName, className),\n          ref: mergeRefs(_this2.backdropRef, ref)\n        }));\n      });\n    }\n\n    return React.createElement(\"div\", _extends({\n      ref: this.backdropRef,\n      className: backdropClassName\n    }, backdropPorps));\n  };\n\n  _proto2.render = function render() {\n    var _this$props7 = this.props,\n        children = _this$props7.children,\n        Transition = _this$props7.transition,\n        backdrop = _this$props7.backdrop,\n        dialogTransitionTimeout = _this$props7.dialogTransitionTimeout,\n        style = _this$props7.style,\n        className = _this$props7.className,\n        container = _this$props7.container,\n        animationProps = _this$props7.animationProps,\n        onExit = _this$props7.onExit,\n        onExiting = _this$props7.onExiting,\n        onEnter = _this$props7.onEnter,\n        onEntering = _this$props7.onEntering,\n        onEntered = _this$props7.onEntered,\n        rest = _objectWithoutPropertiesLoose(_this$props7, [\"children\", \"transition\", \"backdrop\", \"dialogTransitionTimeout\", \"style\", \"className\", \"container\", \"animationProps\", \"onExit\", \"onExiting\", \"onEnter\", \"onEntering\", \"onEntered\"]);\n\n    var show = !!rest.show;\n    var mountModal = show || Transition && !this.state.exited;\n\n    if (!mountModal) {\n      return null;\n    }\n\n    var dialog = children;\n\n    if (Transition) {\n      dialog = React.createElement(Transition, _extends({}, animationProps, {\n        transitionAppear: true,\n        unmountOnExit: true,\n        in: show,\n        timeout: dialogTransitionTimeout,\n        onExit: onExit,\n        onExiting: onExiting,\n        onExited: this.handleHidden,\n        onEnter: onEnter,\n        onEntering: onEntering,\n        onEntered: onEntered\n      }), dialog);\n    }\n\n    return React.createElement(Portal, {\n      ref: this.setMountNodeRef,\n      container: container\n    }, React.createElement(\"div\", {\n      ref: this.modalNodeRef,\n      role: rest.role,\n      style: style,\n      className: className\n    }, backdrop && this.renderBackdrop(), React.createElement(RefHolder, {\n      ref: this.dialogRef\n    }, dialog)));\n  };\n\n  return BaseModal;\n}(React.Component);\n\nBaseModal.manager = modalManager;\nBaseModal.defaultProps = {\n  backdrop: true,\n  keyboard: true,\n  autoFocus: true,\n  enforceFocus: true\n};\nexport default BaseModal;"]},"metadata":{},"sourceType":"module"}