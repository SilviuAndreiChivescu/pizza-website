{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { compose } from 'recompose';\nimport { defaultProps, prefix, getUnhandledProps, withStyleProps } from '../utils';\nimport { transformValueToCharacterMap, transformCharacterMapToValue } from './utils';\nimport shallowEqualArray from '../utils/shallowEqualArray';\nimport Icon from '../Icon';\nimport Character from './Character';\nimport { FormPlaintextContext } from '../Form/FormContext';\nimport { SIZE, KEY_CODE } from '../constants';\n\nvar Rate = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(Rate, _React$Component);\n\n  Rate.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, nextState) {\n    var value = nextProps.value,\n        max = nextProps.max,\n        allowHalf = nextProps.allowHalf;\n    var characterMap = transformValueToCharacterMap(value, max, allowHalf);\n\n    if (typeof value !== 'undefined' && value !== nextState.prevPropsValue) {\n      return {\n        prevPropsValue: value,\n        characterMap: characterMap\n      };\n    }\n\n    return null;\n  };\n\n  function Rate(props) {\n    var _this;\n\n    _this = _React$Component.call(this, props) || this;\n\n    _this.addPrefix = function (name) {\n      return prefix(_this.props.classPrefix)(name);\n    };\n\n    _this.getCharacterMap = function (value) {\n      var _this$props = _this.props,\n          max = _this$props.max,\n          allowHalf = _this$props.allowHalf;\n      return transformValueToCharacterMap(value, max, allowHalf);\n    };\n\n    _this.resetCharacterMap = function () {\n      _this.setState({\n        characterMap: _this.getCharacterMap(_this.getValue())\n      });\n    };\n\n    _this.handleMouseLeave = function (event) {\n      var _this$props$onChangeA, _this$props2;\n\n      _this.resetCharacterMap();\n\n      (_this$props$onChangeA = (_this$props2 = _this.props).onChangeActive) === null || _this$props$onChangeA === void 0 ? void 0 : _this$props$onChangeA.call(_this$props2, _this.getValue(), event);\n    };\n\n    _this.handleChangeValue = function (index, event) {\n      var _this$props3 = _this.props,\n          cleanable = _this$props3.cleanable,\n          onChange = _this$props3.onChange;\n      var characterMap = _this.state.characterMap;\n\n      var value = _this.getValue();\n\n      var nextValue = transformCharacterMapToValue(characterMap);\n\n      if (cleanable && value === nextValue && _this.getCharacterMap(value)[index] === characterMap[index]) {\n        nextValue = 0;\n      }\n\n      if (nextValue !== value) {\n        _this.setState({\n          prevPropsValue: nextValue,\n          characterMap: _this.getCharacterMap(nextValue)\n        });\n\n        onChange === null || onChange === void 0 ? void 0 : onChange(nextValue, event);\n      }\n    };\n\n    _this.handleKeyDown = function (index, event) {\n      var keyCode = event.keyCode;\n      var _this$props4 = _this.props,\n          max = _this$props4.max,\n          allowHalf = _this$props4.allowHalf;\n      var characterMap = _this.state.characterMap;\n      var nextValue = transformCharacterMapToValue(characterMap);\n\n      if (keyCode === KEY_CODE.RIGHT && nextValue < max) {\n        nextValue = allowHalf ? nextValue + 0.5 : nextValue + 1;\n      } else if (keyCode === KEY_CODE.LEFT && nextValue > 0) {\n        nextValue = allowHalf ? nextValue - 0.5 : nextValue - 1;\n      }\n\n      _this.setState({\n        characterMap: _this.getCharacterMap(nextValue)\n      });\n\n      if (keyCode === KEY_CODE.ENTER) {\n        _this.handleChangeValue(index, event);\n      }\n    };\n\n    _this.handleClick = function (index, key, event) {\n      _this.handleChangeCharacterMap(index, key, event, function () {\n        _this.handleChangeValue(index, event);\n      });\n    };\n\n    var _value = props.value;\n    var prevPropsValue = typeof _value !== 'undefined' ? _value : props.defaultValue;\n    _this.state = {\n      prevPropsValue: prevPropsValue,\n      characterMap: _this.getCharacterMap(prevPropsValue)\n    };\n    return _this;\n  }\n\n  var _proto = Rate.prototype;\n\n  _proto.getValue = function getValue() {\n    var value = this.props.value;\n    return typeof value === 'undefined' ? this.state.prevPropsValue : value;\n  };\n\n  _proto.handleChangeCharacterMap = function handleChangeCharacterMap(index, key, event, callback) {\n    var _this2 = this;\n\n    var characterMap = this.state.characterMap;\n    var nextCharacterMap = characterMap.map(function (_item, i) {\n      if (i === index && key === 'before' && _this2.props.allowHalf) {\n        return 0.5;\n      }\n\n      return index >= i ? 1 : 0;\n    });\n\n    if (!shallowEqualArray(characterMap, nextCharacterMap)) {\n      var _this$props$onChangeA2, _this$props5;\n\n      this.setState({\n        characterMap: nextCharacterMap\n      }, callback);\n      (_this$props$onChangeA2 = (_this$props5 = this.props).onChangeActive) === null || _this$props$onChangeA2 === void 0 ? void 0 : _this$props$onChangeA2.call(_this$props5, transformCharacterMapToValue(nextCharacterMap), event);\n      return;\n    }\n\n    callback === null || callback === void 0 ? void 0 : callback();\n  };\n\n  _proto.render = function render() {\n    var _classNames,\n        _this3 = this;\n\n    var _this$props6 = this.props,\n        character = _this$props6.character,\n        className = _this$props6.className,\n        classPrefix = _this$props6.classPrefix,\n        disabled = _this$props6.disabled,\n        max = _this$props6.max,\n        renderCharacter = _this$props6.renderCharacter,\n        readOnly = _this$props6.readOnly,\n        vertical = _this$props6.vertical,\n        rest = _objectWithoutPropertiesLoose(_this$props6, [\"character\", \"className\", \"classPrefix\", \"disabled\", \"max\", \"renderCharacter\", \"readOnly\", \"vertical\"]);\n\n    var characterMap = this.state.characterMap;\n    var hoverValue = transformCharacterMapToValue(characterMap);\n    var classes = classNames(classPrefix, className, (_classNames = {}, _classNames[this.addPrefix('disabled')] = disabled, _classNames[this.addPrefix('readonly')] = readOnly, _classNames));\n    var unhandled = getUnhandledProps(Rate, rest);\n    var plaintextRate = React.createElement(\"div\", _extends({}, unhandled, {\n      className: className\n    }), this.getValue() + \"(\" + max + \")\");\n    var rate = React.createElement(\"ul\", _extends({}, unhandled, {\n      className: classes,\n      onMouseLeave: this.handleMouseLeave\n    }), characterMap.map(function (item, index) {\n      return React.createElement(Character, {\n        key: index,\n        status: item,\n        disabled: disabled || readOnly,\n        vertical: vertical,\n        onClick: _this3.handleClick.bind(_this3, index),\n        onKeyDown: _this3.handleKeyDown.bind(_this3, index),\n        onMouseMove: _this3.handleChangeCharacterMap.bind(_this3, index)\n      }, renderCharacter ? renderCharacter(hoverValue, index) : character);\n    }));\n    return React.createElement(FormPlaintextContext.Consumer, null, function (plaintext) {\n      return plaintext ? plaintextRate : rate;\n    });\n  };\n\n  return Rate;\n}(React.Component);\n\nRate.propTypes = {\n  allowHalf: PropTypes.bool,\n  character: PropTypes.node,\n  classPrefix: PropTypes.string,\n  cleanable: PropTypes.bool,\n  defaultValue: PropTypes.number,\n  disabled: PropTypes.bool,\n  max: PropTypes.number,\n  renderCharacter: PropTypes.func,\n  readOnly: PropTypes.bool,\n  size: PropTypes.oneOf(SIZE),\n  value: PropTypes.number,\n  vertical: PropTypes.bool,\n  onChange: PropTypes.func,\n  onChangeActive: PropTypes.func\n};\nRate.defaultProps = {\n  character: React.createElement(Icon, {\n    icon: \"star\"\n  }),\n  cleanable: true,\n  defaultValue: 0,\n  max: 5,\n  size: 'md'\n};\nexport default compose(withStyleProps({\n  hasSize: true,\n  hasColor: true\n}), defaultProps({\n  classPrefix: 'rate'\n}))(Rate);","map":{"version":3,"sources":["E:/OneDrive - University of Salford/Desktop/pizza-website/node_modules/rsuite/es/Rate/Rate.js"],"names":["_extends","_objectWithoutPropertiesLoose","_inheritsLoose","React","PropTypes","classNames","compose","defaultProps","prefix","getUnhandledProps","withStyleProps","transformValueToCharacterMap","transformCharacterMapToValue","shallowEqualArray","Icon","Character","FormPlaintextContext","SIZE","KEY_CODE","Rate","_React$Component","getDerivedStateFromProps","nextProps","nextState","value","max","allowHalf","characterMap","prevPropsValue","props","_this","call","addPrefix","name","classPrefix","getCharacterMap","_this$props","resetCharacterMap","setState","getValue","handleMouseLeave","event","_this$props$onChangeA","_this$props2","onChangeActive","handleChangeValue","index","_this$props3","cleanable","onChange","state","nextValue","handleKeyDown","keyCode","_this$props4","RIGHT","LEFT","ENTER","handleClick","key","handleChangeCharacterMap","_value","defaultValue","_proto","prototype","callback","_this2","nextCharacterMap","map","_item","i","_this$props$onChangeA2","_this$props5","render","_classNames","_this3","_this$props6","character","className","disabled","renderCharacter","readOnly","vertical","rest","hoverValue","classes","unhandled","plaintextRate","createElement","rate","onMouseLeave","item","status","onClick","bind","onKeyDown","onMouseMove","Consumer","plaintext","Component","propTypes","bool","node","string","number","func","size","oneOf","icon","hasSize","hasColor"],"mappings":"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","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { compose } from 'recompose';\nimport { defaultProps, prefix, getUnhandledProps, withStyleProps } from '../utils';\nimport { transformValueToCharacterMap, transformCharacterMapToValue } from './utils';\nimport shallowEqualArray from '../utils/shallowEqualArray';\nimport Icon from '../Icon';\nimport Character from './Character';\nimport { FormPlaintextContext } from '../Form/FormContext';\nimport { SIZE, KEY_CODE } from '../constants';\n\nvar Rate =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inheritsLoose(Rate, _React$Component);\n\n  Rate.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, nextState) {\n    var value = nextProps.value,\n        max = nextProps.max,\n        allowHalf = nextProps.allowHalf;\n    var characterMap = transformValueToCharacterMap(value, max, allowHalf);\n\n    if (typeof value !== 'undefined' && value !== nextState.prevPropsValue) {\n      return {\n        prevPropsValue: value,\n        characterMap: characterMap\n      };\n    }\n\n    return null;\n  };\n\n  function Rate(props) {\n    var _this;\n\n    _this = _React$Component.call(this, props) || this;\n\n    _this.addPrefix = function (name) {\n      return prefix(_this.props.classPrefix)(name);\n    };\n\n    _this.getCharacterMap = function (value) {\n      var _this$props = _this.props,\n          max = _this$props.max,\n          allowHalf = _this$props.allowHalf;\n      return transformValueToCharacterMap(value, max, allowHalf);\n    };\n\n    _this.resetCharacterMap = function () {\n      _this.setState({\n        characterMap: _this.getCharacterMap(_this.getValue())\n      });\n    };\n\n    _this.handleMouseLeave = function (event) {\n      var _this$props$onChangeA, _this$props2;\n\n      _this.resetCharacterMap();\n\n      (_this$props$onChangeA = (_this$props2 = _this.props).onChangeActive) === null || _this$props$onChangeA === void 0 ? void 0 : _this$props$onChangeA.call(_this$props2, _this.getValue(), event);\n    };\n\n    _this.handleChangeValue = function (index, event) {\n      var _this$props3 = _this.props,\n          cleanable = _this$props3.cleanable,\n          onChange = _this$props3.onChange;\n      var characterMap = _this.state.characterMap;\n\n      var value = _this.getValue();\n\n      var nextValue = transformCharacterMapToValue(characterMap);\n\n      if (cleanable && value === nextValue && _this.getCharacterMap(value)[index] === characterMap[index]) {\n        nextValue = 0;\n      }\n\n      if (nextValue !== value) {\n        _this.setState({\n          prevPropsValue: nextValue,\n          characterMap: _this.getCharacterMap(nextValue)\n        });\n\n        onChange === null || onChange === void 0 ? void 0 : onChange(nextValue, event);\n      }\n    };\n\n    _this.handleKeyDown = function (index, event) {\n      var keyCode = event.keyCode;\n      var _this$props4 = _this.props,\n          max = _this$props4.max,\n          allowHalf = _this$props4.allowHalf;\n      var characterMap = _this.state.characterMap;\n      var nextValue = transformCharacterMapToValue(characterMap);\n\n      if (keyCode === KEY_CODE.RIGHT && nextValue < max) {\n        nextValue = allowHalf ? nextValue + 0.5 : nextValue + 1;\n      } else if (keyCode === KEY_CODE.LEFT && nextValue > 0) {\n        nextValue = allowHalf ? nextValue - 0.5 : nextValue - 1;\n      }\n\n      _this.setState({\n        characterMap: _this.getCharacterMap(nextValue)\n      });\n\n      if (keyCode === KEY_CODE.ENTER) {\n        _this.handleChangeValue(index, event);\n      }\n    };\n\n    _this.handleClick = function (index, key, event) {\n      _this.handleChangeCharacterMap(index, key, event, function () {\n        _this.handleChangeValue(index, event);\n      });\n    };\n\n    var _value = props.value;\n    var prevPropsValue = typeof _value !== 'undefined' ? _value : props.defaultValue;\n    _this.state = {\n      prevPropsValue: prevPropsValue,\n      characterMap: _this.getCharacterMap(prevPropsValue)\n    };\n    return _this;\n  }\n\n  var _proto = Rate.prototype;\n\n  _proto.getValue = function getValue() {\n    var value = this.props.value;\n    return typeof value === 'undefined' ? this.state.prevPropsValue : value;\n  };\n\n  _proto.handleChangeCharacterMap = function handleChangeCharacterMap(index, key, event, callback) {\n    var _this2 = this;\n\n    var characterMap = this.state.characterMap;\n    var nextCharacterMap = characterMap.map(function (_item, i) {\n      if (i === index && key === 'before' && _this2.props.allowHalf) {\n        return 0.5;\n      }\n\n      return index >= i ? 1 : 0;\n    });\n\n    if (!shallowEqualArray(characterMap, nextCharacterMap)) {\n      var _this$props$onChangeA2, _this$props5;\n\n      this.setState({\n        characterMap: nextCharacterMap\n      }, callback);\n      (_this$props$onChangeA2 = (_this$props5 = this.props).onChangeActive) === null || _this$props$onChangeA2 === void 0 ? void 0 : _this$props$onChangeA2.call(_this$props5, transformCharacterMapToValue(nextCharacterMap), event);\n      return;\n    }\n\n    callback === null || callback === void 0 ? void 0 : callback();\n  };\n\n  _proto.render = function render() {\n    var _classNames,\n        _this3 = this;\n\n    var _this$props6 = this.props,\n        character = _this$props6.character,\n        className = _this$props6.className,\n        classPrefix = _this$props6.classPrefix,\n        disabled = _this$props6.disabled,\n        max = _this$props6.max,\n        renderCharacter = _this$props6.renderCharacter,\n        readOnly = _this$props6.readOnly,\n        vertical = _this$props6.vertical,\n        rest = _objectWithoutPropertiesLoose(_this$props6, [\"character\", \"className\", \"classPrefix\", \"disabled\", \"max\", \"renderCharacter\", \"readOnly\", \"vertical\"]);\n\n    var characterMap = this.state.characterMap;\n    var hoverValue = transformCharacterMapToValue(characterMap);\n    var classes = classNames(classPrefix, className, (_classNames = {}, _classNames[this.addPrefix('disabled')] = disabled, _classNames[this.addPrefix('readonly')] = readOnly, _classNames));\n    var unhandled = getUnhandledProps(Rate, rest);\n    var plaintextRate = React.createElement(\"div\", _extends({}, unhandled, {\n      className: className\n    }), this.getValue() + \"(\" + max + \")\");\n    var rate = React.createElement(\"ul\", _extends({}, unhandled, {\n      className: classes,\n      onMouseLeave: this.handleMouseLeave\n    }), characterMap.map(function (item, index) {\n      return React.createElement(Character, {\n        key: index,\n        status: item,\n        disabled: disabled || readOnly,\n        vertical: vertical,\n        onClick: _this3.handleClick.bind(_this3, index),\n        onKeyDown: _this3.handleKeyDown.bind(_this3, index),\n        onMouseMove: _this3.handleChangeCharacterMap.bind(_this3, index)\n      }, renderCharacter ? renderCharacter(hoverValue, index) : character);\n    }));\n    return React.createElement(FormPlaintextContext.Consumer, null, function (plaintext) {\n      return plaintext ? plaintextRate : rate;\n    });\n  };\n\n  return Rate;\n}(React.Component);\n\nRate.propTypes = {\n  allowHalf: PropTypes.bool,\n  character: PropTypes.node,\n  classPrefix: PropTypes.string,\n  cleanable: PropTypes.bool,\n  defaultValue: PropTypes.number,\n  disabled: PropTypes.bool,\n  max: PropTypes.number,\n  renderCharacter: PropTypes.func,\n  readOnly: PropTypes.bool,\n  size: PropTypes.oneOf(SIZE),\n  value: PropTypes.number,\n  vertical: PropTypes.bool,\n  onChange: PropTypes.func,\n  onChangeActive: PropTypes.func\n};\nRate.defaultProps = {\n  character: React.createElement(Icon, {\n    icon: \"star\"\n  }),\n  cleanable: true,\n  defaultValue: 0,\n  max: 5,\n  size: 'md'\n};\nexport default compose(withStyleProps({\n  hasSize: true,\n  hasColor: true\n}), defaultProps({\n  classPrefix: 'rate'\n}))(Rate);"]},"metadata":{},"sourceType":"module"}