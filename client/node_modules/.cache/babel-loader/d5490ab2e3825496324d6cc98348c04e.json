{"ast":null,"code":"import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport _isNil from \"lodash/isNil\";\nimport _isFunction from \"lodash/isFunction\";\nimport _isNumber from \"lodash/isNumber\";\nimport _isString from \"lodash/isString\";\nimport _isEmpty from \"lodash/isEmpty\";\nimport _isUndefined from \"lodash/isUndefined\";\nimport _isArray from \"lodash/isArray\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport List from 'react-virtualized/dist/commonjs/List';\nimport AutoSizer from 'react-virtualized/dist/commonjs/AutoSizer';\nimport { CellMeasurerCache, CellMeasurer } from 'react-virtualized/dist/commonjs/CellMeasurer';\nimport { polyfill } from 'react-lifecycles-compat';\nimport shallowEqual from '../utils/shallowEqual';\nimport CheckTreeNode from './CheckTreeNode';\nimport { CHECK_STATE } from '../constants';\nimport { clone, defaultProps, prefix, defaultClassPrefix, getUnhandledProps, createChainedFunction, mergeRefs } from '../utils';\nimport { PickerToggle, getToggleWrapperClassName, onMenuKeyDown, MenuWrapper, SearchBar, SelectedElement, PickerToggleTrigger, createConcatChildrenFunction, shouldDisplay } from '../Picker';\nimport { isEveryChildChecked, isSomeChildChecked, isSomeNodeHasChildren, getSiblingNodeUncheckable, getEveryFisrtLevelNodeUncheckable, getUncheckableState, getFormattedTree, getDisabledState } from './utils';\nimport { compareArray, shouldShowNodeByExpanded, flattenTree, getNodeParents, getVirtualLisHeight, hasVisibleChildren, treeDeprecatedWarning, getExpandItemValues, getExpandAll, getExpandState, getExpandWhenSearching } from '../utils/treeUtils';\nimport { listPickerPropTypes, listPickerDefaultProps } from '../Picker/propTypes'; // default value for virtualized\n\nvar defaultHeight = 360;\nvar defaultWidth = 200;\n\nvar CheckTreePicker = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(CheckTreePicker, _React$Component);\n\n  function CheckTreePicker(_props) {\n    var _this;\n\n    _this = _React$Component.call(this, _props) || this;\n    _this.menuRef = void 0;\n    _this.treeViewRef = void 0;\n    _this.positionRef = void 0;\n    _this.listRef = void 0;\n    _this.triggerRef = void 0;\n    _this.toggleRef = void 0;\n\n    _this.getValue = function (props) {\n      if (props === void 0) {\n        props = _this.props;\n      }\n\n      var _props2 = props,\n          value = _props2.value,\n          defaultValue = _props2.defaultValue,\n          _props2$uncheckableIt = _props2.uncheckableItemValues,\n          uncheckableItemValues = _props2$uncheckableIt === void 0 ? [] : _props2$uncheckableIt;\n\n      if (value && value.length) {\n        return value.filter(function (v) {\n          return !uncheckableItemValues.includes(v);\n        });\n      }\n\n      if (defaultValue && defaultValue.length > 0) {\n        return defaultValue.filter(function (v) {\n          return !uncheckableItemValues.includes(v);\n        });\n      }\n\n      return [];\n    };\n\n    _this.getElementByDataKey = function (dataKey) {\n      var ele = _this.nodeRefs[dataKey];\n\n      if (ele instanceof Element) {\n        return ele.querySelector(\".\" + _this.addTreePrefix('node-label'));\n      }\n\n      return null;\n    };\n\n    _this.getFocusableMenuItems = function () {\n      var filterData = _this.state.filterData;\n      var childrenKey = _this.props.childrenKey;\n      var items = [];\n\n      var loop = function loop(treeNodes) {\n        treeNodes.forEach(function (node) {\n          var nodeData = _extends({}, node, {}, _this.nodes[node.refKey]);\n\n          if (!getDisabledState(_this.nodes, node, _this.props) && node.visible) {\n            items.push(node);\n          }\n\n          if (node[childrenKey] && getExpandState(nodeData, _this.props)) {\n            loop(node[childrenKey]);\n          }\n        });\n      };\n\n      loop(filterData);\n      return items;\n    };\n\n    _this.nodes = {};\n    _this.activeNode = null;\n    _this.cache = new CellMeasurerCache({\n      fixedWidth: true,\n      minHeight: 20\n    });\n    _this.nodeRefs = {};\n\n    _this.bindNodeRefs = function (refKey, ref) {\n      _this.nodeRefs[refKey] = ref;\n    };\n\n    _this.getPositionInstance = function () {\n      return _this.positionRef.current;\n    };\n\n    _this.getToggleInstance = function () {\n      return _this.toggleRef.current;\n    };\n\n    _this.selectActiveItem = function (event) {\n      var _this$getActiveItem = _this.getActiveItem(),\n          nodeData = _this$getActiveItem.nodeData;\n\n      _this.handleSelect(nodeData, event);\n    };\n\n    _this.focusNextItem = function () {\n      var _node$focus;\n\n      var _this$getItemsAndActi = _this.getItemsAndActiveIndex(),\n          items = _this$getItemsAndActi.items,\n          activeIndex = _this$getItemsAndActi.activeIndex;\n\n      if (items.length === 0) {\n        return;\n      }\n\n      var nextIndex = activeIndex === items.length - 1 ? 0 : activeIndex + 1;\n\n      var node = _this.getElementByDataKey(items[nextIndex].refKey);\n\n      node === null || node === void 0 ? void 0 : (_node$focus = node.focus) === null || _node$focus === void 0 ? void 0 : _node$focus.call(node);\n    };\n\n    _this.focusPreviousItem = function () {\n      var _node$focus2;\n\n      var _this$getItemsAndActi2 = _this.getItemsAndActiveIndex(),\n          items = _this$getItemsAndActi2.items,\n          activeIndex = _this$getItemsAndActi2.activeIndex;\n\n      if (items.length === 0) {\n        return;\n      }\n\n      var prevIndex = activeIndex === 0 ? items.length - 1 : activeIndex - 1;\n      prevIndex = prevIndex >= 0 ? prevIndex : 0;\n\n      var node = _this.getElementByDataKey(items[prevIndex].refKey);\n\n      node === null || node === void 0 ? void 0 : (_node$focus2 = node.focus) === null || _node$focus2 === void 0 ? void 0 : _node$focus2.call(node);\n    };\n\n    _this.handleCloseDropdown = function () {\n      var _this$triggerRef$curr, _this$triggerRef$curr2;\n\n      (_this$triggerRef$curr = _this.triggerRef.current) === null || _this$triggerRef$curr === void 0 ? void 0 : (_this$triggerRef$curr2 = _this$triggerRef$curr.hide) === null || _this$triggerRef$curr2 === void 0 ? void 0 : _this$triggerRef$curr2.call(_this$triggerRef$curr);\n    };\n\n    _this.handleOpenDropdown = function () {\n      var _this$triggerRef$curr3, _this$triggerRef$curr4;\n\n      (_this$triggerRef$curr3 = _this.triggerRef.current) === null || _this$triggerRef$curr3 === void 0 ? void 0 : (_this$triggerRef$curr4 = _this$triggerRef$curr3.show) === null || _this$triggerRef$curr4 === void 0 ? void 0 : _this$triggerRef$curr4.call(_this$triggerRef$curr3);\n    };\n\n    _this.open = function () {\n      var _this$handleOpenDropd, _this2;\n\n      (_this$handleOpenDropd = (_this2 = _this).handleOpenDropdown) === null || _this$handleOpenDropd === void 0 ? void 0 : _this$handleOpenDropd.call(_this2);\n    };\n\n    _this.close = function () {\n      var _this$handleCloseDrop, _this3;\n\n      (_this$handleCloseDrop = (_this3 = _this).handleCloseDropdown) === null || _this$handleCloseDrop === void 0 ? void 0 : _this$handleCloseDrop.call(_this3);\n    };\n\n    _this.handleToggleDropdown = function () {\n      var active = _this.state.active;\n\n      if (active) {\n        _this.handleCloseDropdown();\n\n        return;\n      }\n\n      _this.handleOpenDropdown();\n    };\n\n    _this.everyChildChecked = function (nodes, node) {\n      var list = [];\n      Object.keys(nodes).forEach(function (refKey) {\n        var _curNode$parentNode;\n\n        var curNode = nodes[refKey];\n\n        if (((_curNode$parentNode = curNode.parentNode) === null || _curNode$parentNode === void 0 ? void 0 : _curNode$parentNode.refKey) === node.refKey && !curNode.uncheckable) {\n          list.push(curNode);\n        }\n      });\n      return list.every(function (l) {\n        return l.check;\n      });\n    };\n\n    _this.addPrefix = function (name) {\n      return prefix(_this.props.classPrefix)(name);\n    };\n\n    _this.addTreePrefix = function (name) {\n      return prefix(defaultClassPrefix('check-tree'))(name);\n    };\n\n    _this.handleSelect = function (activeNode, event) {\n      var _this$props = _this.props,\n          onChange = _this$props.onChange,\n          onSelect = _this$props.onSelect,\n          value = _this$props.value;\n\n      var selectedValues = _this.toggleChecked(activeNode, !_this.nodes[activeNode.refKey].check);\n\n      if (!_isUndefined(value)) {\n        _this.activeNode = activeNode;\n      } else {\n        _this.unserializeLists({\n          check: selectedValues\n        });\n\n        _this.setState({\n          activeNode: activeNode,\n          selectedValues: selectedValues,\n          hasValue: !!selectedValues.length\n        });\n      }\n\n      onChange === null || onChange === void 0 ? void 0 : onChange(selectedValues, event);\n      onSelect === null || onSelect === void 0 ? void 0 : onSelect(activeNode, selectedValues, event);\n    };\n\n    _this.handleToggle = function (node) {\n      var _this$props2 = _this.props,\n          valueKey = _this$props2.valueKey,\n          childrenKey = _this$props2.childrenKey,\n          onExpand = _this$props2.onExpand,\n          expandItemValues = _this$props2.expandItemValues;\n\n      var nextExpandItemValues = _this.toggleExpand(node, !node.expand);\n\n      if (_isUndefined(expandItemValues)) {\n        _this.unserializeLists({\n          expand: nextExpandItemValues\n        });\n\n        _this.setState({\n          expandItemValues: nextExpandItemValues\n        });\n      }\n\n      onExpand === null || onExpand === void 0 ? void 0 : onExpand(nextExpandItemValues, node, createConcatChildrenFunction(node, node[valueKey], {\n        valueKey: valueKey,\n        childrenKey: childrenKey\n      }));\n    };\n\n    _this.handleKeyDown = function (event) {\n      onMenuKeyDown(event, {\n        down: _this.focusNextItem,\n        up: _this.focusPreviousItem,\n        enter: _this.selectActiveItem,\n        del: _this.handleClean\n      });\n    };\n\n    _this.handleToggleKeyDown = function (event) {\n      var _this$state = _this.state,\n          activeNode = _this$state.activeNode,\n          active = _this$state.active; // enter\n\n      if ((!activeNode || !active) && event.keyCode === 13) {\n        _this.handleToggleDropdown();\n      } // delete\n\n\n      if (event.keyCode === 8) {\n        _this.handleClean(event);\n      }\n\n      if (!_this.treeViewRef.current) {\n        return;\n      }\n\n      if (event.target instanceof HTMLElement) {\n        var className = event.target.className;\n\n        if (className.includes(_this.addPrefix('toggle')) || className.includes(_this.addPrefix('toggle-custom')) || className.includes(_this.addPrefix('search-bar-input'))) {\n          onMenuKeyDown(event, {\n            down: _this.focusNextItem\n          });\n        }\n      }\n    };\n\n    _this.handleSearch = function (value, event) {\n      var filterData = _this.state.filterData;\n      var _this$props3 = _this.props,\n          onSearch = _this$props3.onSearch,\n          searchKeyword = _this$props3.searchKeyword;\n\n      if (_isUndefined(searchKeyword)) {\n        _this.setState({\n          filterData: _this.getFilterData(value, filterData),\n          searchKeyword: value\n        });\n      }\n\n      onSearch === null || onSearch === void 0 ? void 0 : onSearch(value, event);\n    };\n\n    _this.handleClean = function (evnet) {\n      var _this$props$onChange, _this$props4;\n\n      _this.setState({\n        selectedValues: [],\n        hasValue: false,\n        activeNode: {}\n      });\n\n      _this.unserializeLists({\n        check: []\n      });\n\n      (_this$props$onChange = (_this$props4 = _this.props).onChange) === null || _this$props$onChange === void 0 ? void 0 : _this$props$onChange.call(_this$props4, [], evnet);\n    };\n\n    _this.handleOnOpen = function () {\n      var _this$props$onOpen, _this$props5;\n\n      var activeNode = _this.state.activeNode;\n\n      if (activeNode) {\n        var _node$focus3;\n\n        var node = _this.getElementByDataKey(activeNode.refKey);\n\n        node === null || node === void 0 ? void 0 : (_node$focus3 = node.focus) === null || _node$focus3 === void 0 ? void 0 : _node$focus3.call(node);\n      }\n\n      (_this$props$onOpen = (_this$props5 = _this.props).onOpen) === null || _this$props$onOpen === void 0 ? void 0 : _this$props$onOpen.call(_this$props5);\n\n      _this.setState({\n        active: true\n      });\n    };\n\n    _this.handleOnClose = function () {\n      var filterData = _this.state.filterData;\n      var _this$props6 = _this.props,\n          onClose = _this$props6.onClose,\n          searchKeyword = _this$props6.searchKeyword;\n\n      if (_isUndefined(searchKeyword)) {\n        _this.setState({\n          filterData: _this.getFilterData('', filterData),\n          searchKeyword: ''\n        });\n      }\n\n      onClose === null || onClose === void 0 ? void 0 : onClose();\n\n      _this.setState({\n        active: false\n      });\n    };\n\n    _this.measureRowRenderer = function (nodes) {\n      return function (_ref) {\n        var key = _ref.key,\n            index = _ref.index,\n            style = _ref.style,\n            parent = _ref.parent;\n        var node = nodes[index];\n        return React.createElement(CellMeasurer, {\n          cache: _this.cache,\n          columnIndex: 0,\n          key: key,\n          rowIndex: index,\n          parent: parent\n        }, function () {\n          return _this.renderVirtualNode(node, {\n            key: key,\n            style: style\n          });\n        });\n      };\n    };\n\n    var _value = _props.value,\n        data = _props.data,\n        cascade = _props.cascade,\n        _childrenKey = _props.childrenKey,\n        _searchKeyword = _props.searchKeyword;\n    _this.nodes = {};\n\n    var nextValue = _this.getValue(_props);\n\n    var _nextExpandItemValues = getExpandItemValues(_props);\n\n    var nextData = [].concat(data);\n\n    _this.flattenNodes(nextData, _props);\n\n    _this.unserializeLists({\n      check: nextValue,\n      expand: _nextExpandItemValues\n    }, _props);\n\n    _this.state = {\n      data: data,\n      value: _value,\n      cascade: cascade,\n      hasValue: _this.hasValue(nextValue),\n      expandAll: getExpandAll(_props),\n      filterData: _this.getFilterData(_searchKeyword, nextData, _props),\n      searchKeyword: _searchKeyword || '',\n      selectedValues: nextValue,\n      expandItemValues: _this.serializeList('expand'),\n      uncheckableItemValues: _props.uncheckableItemValues,\n      isSomeNodeHasChildren: isSomeNodeHasChildren(data, _childrenKey)\n    };\n    _this.treeViewRef = React.createRef();\n    _this.positionRef = React.createRef();\n    _this.listRef = React.createRef();\n    _this.triggerRef = React.createRef();\n    _this.toggleRef = React.createRef(); // for test\n\n    _this.menuRef = React.createRef();\n    treeDeprecatedWarning(_props, ['expandAll']);\n    return _this;\n  }\n\n  CheckTreePicker.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, prevState) {\n    var value = nextProps.value,\n        data = nextProps.data,\n        cascade = nextProps.cascade,\n        expandAll = nextProps.expandAll,\n        searchKeyword = nextProps.searchKeyword,\n        uncheckableItemValues = nextProps.uncheckableItemValues,\n        expandItemValues = nextProps.expandItemValues;\n    var nextState = {};\n\n    if (_isArray(data) && _isArray(prevState.data) && prevState.data !== data) {\n      nextState.data = data;\n    }\n\n    if (compareArray(value, prevState.value)) {\n      nextState.value = value;\n    }\n\n    if (compareArray(expandItemValues, prevState.expandItemValues) && _isArray(expandItemValues)) {\n      nextState.expandItemValues = expandItemValues;\n    }\n\n    if (compareArray(uncheckableItemValues, prevState.uncheckableItemValues) && _isArray(uncheckableItemValues)) {\n      nextState.uncheckableItemValues = uncheckableItemValues;\n    }\n\n    if (!_isUndefined(searchKeyword) && searchKeyword !== prevState.searchKeyword) {\n      nextState.searchKeyword = searchKeyword;\n    }\n\n    if (cascade !== prevState.cascade) {\n      nextState.cascade = cascade;\n    }\n\n    if (expandAll !== prevState.expandAll) {\n      nextState.expandAll = expandAll;\n    }\n\n    return Object.keys(nextState).length ? nextState : null;\n  };\n\n  var _proto = CheckTreePicker.prototype;\n\n  _proto.componentDidUpdate = function componentDidUpdate(_prevProps, prevState) {\n    this.updateDataChange(prevState);\n    this.updateValueChange(prevState);\n    this.updateExpandItemValuesChange(prevState);\n    this.updateUncheckableItemValuesChange(prevState);\n    this.updateCascadeChange(prevState);\n    this.updateSearchKeywordChange(prevState);\n\n    if (this.listRef.current) {\n      this.listRef.current.forceUpdateGrid();\n    }\n  };\n\n  _proto.updateDataChange = function updateDataChange(prevState) {\n    var _this$state2 = this.state,\n        searchKeyword = _this$state2.searchKeyword,\n        expandItemValues = _this$state2.expandItemValues;\n    var _this$props7 = this.props,\n        _this$props7$data = _this$props7.data,\n        data = _this$props7$data === void 0 ? [] : _this$props7$data,\n        childrenKey = _this$props7.childrenKey;\n\n    if (prevState.data !== data) {\n      var nextData = [].concat(data);\n      this.nodes = {};\n      this.flattenNodes(nextData);\n      this.unserializeLists({\n        check: this.getValue(),\n        expand: expandItemValues\n      });\n      this.setState({\n        data: nextData,\n        filterData: this.getFilterData(searchKeyword, nextData),\n        isSomeNodeHasChildren: isSomeNodeHasChildren(nextData, childrenKey),\n        hasValue: this.hasValue(),\n        expandItemValues: this.serializeList('expand')\n      });\n    }\n  };\n\n  _proto.updateValueChange = function updateValueChange(prevState) {\n    var expandItemValues = this.state.expandItemValues;\n    var value = this.props.value;\n\n    if (compareArray(value, prevState.value)) {\n      this.unserializeLists({\n        check: value !== null && value !== void 0 ? value : [],\n        expand: expandItemValues\n      });\n      this.setState({\n        selectedValues: value,\n        hasValue: this.hasValue(value),\n        activeNode: value.length ? this.activeNode : null\n      });\n    }\n  };\n\n  _proto.updateExpandItemValuesChange = function updateExpandItemValuesChange(prevState) {\n    var expandItemValues = this.props.expandItemValues;\n\n    if (compareArray(expandItemValues, prevState.expandItemValues) && _isArray(expandItemValues)) {\n      this.unserializeLists({\n        expand: expandItemValues\n      });\n      this.setState({\n        expandItemValues: expandItemValues\n      });\n    }\n  };\n\n  _proto.updateUncheckableItemValuesChange = function updateUncheckableItemValuesChange(prevState) {\n    var _this$state3 = this.state,\n        data = _this$state3.data,\n        selectedValues = _this$state3.selectedValues,\n        expandItemValues = _this$state3.expandItemValues;\n    var uncheckableItemValues = this.props.uncheckableItemValues;\n\n    if (compareArray(uncheckableItemValues, prevState.uncheckableItemValues) && _isArray(uncheckableItemValues)) {\n      this.flattenNodes(data);\n      this.unserializeLists({\n        check: selectedValues,\n        expand: expandItemValues\n      });\n      this.setState({\n        hasValue: this.hasValue()\n      });\n    }\n  };\n\n  _proto.updateCascadeChange = function updateCascadeChange(prevState) {\n    var _this$state4 = this.state,\n        data = _this$state4.data,\n        selectedValues = _this$state4.selectedValues,\n        expandItemValues = _this$state4.expandItemValues;\n    var cascade = this.props.cascade; // cascade 改变时，重新初始化\n\n    if (cascade !== prevState.cascade && cascade) {\n      this.flattenNodes(data);\n      this.unserializeLists({\n        check: selectedValues,\n        expand: expandItemValues\n      });\n      this.setState({\n        cascade: cascade\n      });\n    }\n  };\n\n  _proto.updateSearchKeywordChange = function updateSearchKeywordChange(prevState) {\n    var filterData = this.state.filterData;\n    var searchKeyword = this.props.searchKeyword;\n\n    if (!_isUndefined(searchKeyword) && prevState.searchKeyword !== searchKeyword) {\n      this.setState({\n        filterData: this.getFilterData(searchKeyword, filterData)\n      });\n    }\n  };\n\n  _proto.getNodeCheckState = function getNodeCheckState(node, cascade) {\n    var childrenKey = this.props.childrenKey;\n\n    if (!node[childrenKey] || !node[childrenKey].length || !cascade) {\n      this.nodes[node.refKey].checkAll = false;\n      return node.check ? CHECK_STATE.CHECK : CHECK_STATE.UNCHECK;\n    }\n\n    if (isEveryChildChecked(node, this.nodes, this.props)) {\n      this.nodes[node.refKey].checkAll = true;\n      this.nodes[node.refKey].check = true;\n      return CHECK_STATE.CHECK;\n    }\n\n    if (isSomeChildChecked(node, this.nodes, this.props)) {\n      this.nodes[node.refKey].checkAll = false;\n      return CHECK_STATE.INDETERMINATE;\n    }\n\n    return CHECK_STATE.UNCHECK;\n  };\n\n  _proto.getFilterData = function getFilterData(searchKeyword, data, props) {\n    if (searchKeyword === void 0) {\n      searchKeyword = '';\n    }\n\n    if (props === void 0) {\n      props = this.props;\n    }\n\n    var _props3 = props,\n        labelKey = _props3.labelKey,\n        childrenKey = _props3.childrenKey,\n        searchBy = _props3.searchBy;\n\n    var setVisible = function setVisible(nodes) {\n      if (nodes === void 0) {\n        nodes = [];\n      }\n\n      return nodes.forEach(function (item) {\n        item.visible = searchBy ? searchBy(searchKeyword, item[labelKey], item) : shouldDisplay(item[labelKey], searchKeyword);\n\n        if (_isArray(item[childrenKey])) {\n          setVisible(item[childrenKey]);\n          item[childrenKey].forEach(function (child) {\n            if (child.visible) {\n              item.visible = child.visible;\n            }\n          });\n        }\n      });\n    };\n\n    setVisible(data);\n    return data;\n  };\n\n  _proto.getActiveElementOption = function getActiveElementOption(options, refKey) {\n    var childrenKey = this.props.childrenKey;\n\n    for (var i = 0; i < options.length; i += 1) {\n      var _options$i$childrenKe;\n\n      if (options[i].refKey === refKey) {\n        return options[i];\n      } else if ((_options$i$childrenKe = options[i][childrenKey]) === null || _options$i$childrenKe === void 0 ? void 0 : _options$i$childrenKe.length) {\n        var active = this.getActiveElementOption(options[i][childrenKey], refKey);\n\n        if (!_isEmpty(active)) {\n          return active;\n        }\n      }\n    }\n\n    return {};\n  };\n\n  _proto.getFlattenTreeData = function getFlattenTreeData(nodes) {\n    var _this4 = this;\n\n    var expandItemValues = this.state.expandItemValues;\n    var _this$props8 = this.props,\n        childrenKey = _this$props8.childrenKey,\n        valueKey = _this$props8.valueKey;\n    return flattenTree(nodes, childrenKey, function (node) {\n      var formatted = {};\n      var curNode = _this4.nodes[node.refKey];\n      var parentKeys = getNodeParents(curNode, 'parentNode', valueKey);\n\n      if (curNode) {\n        formatted = _extends({}, node, {\n          check: curNode.check,\n          expand: curNode.expand,\n          uncheckable: curNode.uncheckable,\n          layer: curNode.layer,\n          parentNode: curNode.parentNode,\n          showNode: shouldShowNodeByExpanded(expandItemValues, parentKeys)\n        });\n      }\n\n      return formatted;\n    });\n  };\n\n  _proto.getItemsAndActiveIndex = function getItemsAndActiveIndex() {\n    var items = this.getFocusableMenuItems();\n    var activeIndex = -1;\n    items.forEach(function (item, index) {\n      if (document.activeElement !== null) {\n        if (item.refKey === document.activeElement.getAttribute('data-key')) {\n          activeIndex = index;\n        }\n      }\n    });\n    return {\n      items: items,\n      activeIndex: activeIndex\n    };\n  };\n\n  _proto.getActiveItem = function getActiveItem() {\n    var filterData = this.state.filterData;\n    var activeItem = document.activeElement;\n\n    if (activeItem !== null) {\n      var _activeItem$dataset, _activeItem$dataset2, _this$nodes$nodeData$, _this$nodes$nodeData$2;\n\n      var key = activeItem === null || activeItem === void 0 ? void 0 : (_activeItem$dataset = activeItem.dataset) === null || _activeItem$dataset === void 0 ? void 0 : _activeItem$dataset.key;\n      var layer = activeItem === null || activeItem === void 0 ? void 0 : (_activeItem$dataset2 = activeItem.dataset) === null || _activeItem$dataset2 === void 0 ? void 0 : _activeItem$dataset2.layer;\n      var nodeData = this.getActiveElementOption(filterData, key);\n      nodeData.check = !((_this$nodes$nodeData$ = this.nodes[nodeData.refKey]) === null || _this$nodes$nodeData$ === void 0 ? void 0 : _this$nodes$nodeData$.check);\n      nodeData.parentNode = (_this$nodes$nodeData$2 = this.nodes[nodeData.refKey]) === null || _this$nodes$nodeData$2 === void 0 ? void 0 : _this$nodes$nodeData$2.parentNode;\n      return {\n        nodeData: nodeData,\n        layer: layer\n      };\n    }\n\n    return {};\n  }\n  /**\n   * 获取已选择的items，用于显示在placeholder\n   */\n  ;\n\n  _proto.getSelectedItems = function getSelectedItems(selectedValues) {\n    var _this5 = this;\n\n    var valueKey = this.props.valueKey;\n    var checkItems = [];\n    Object.keys(this.nodes).map(function (refKey) {\n      var node = _this5.nodes[refKey];\n\n      if (selectedValues.some(function (value) {\n        return shallowEqual(node[valueKey], value);\n      })) {\n        checkItems.push(node);\n      }\n    });\n    return checkItems;\n  }\n  /**\n   * 判断传入的 value 是否存在于data 中\n   * @param {*} values\n   */\n  ;\n\n  _proto.hasValue = function hasValue(values) {\n    var _this6 = this;\n\n    if (values === void 0) {\n      values = this.state.selectedValues;\n    }\n\n    var valueKey = this.props.valueKey;\n    var selectedValues = Object.keys(this.nodes).map(function (refKey) {\n      return _this6.nodes[refKey][valueKey];\n    }).filter(function (item) {\n      return values.some(function (v) {\n        return shallowEqual(v, item);\n      });\n    });\n    return !!selectedValues.length;\n  }\n  /**\n   * 拍平数组，将tree 转换为一维对象\n   * @param {*} nodes tree data\n   * @param {*} ref 当前层级\n   */\n  ;\n\n  _proto.flattenNodes = function flattenNodes(nodes, props, ref, parentNode, layer) {\n    var _this7 = this;\n\n    if (ref === void 0) {\n      ref = '0';\n    }\n\n    if (layer === void 0) {\n      layer = 0;\n    }\n\n    var _ref2 = props || this.props,\n        labelKey = _ref2.labelKey,\n        valueKey = _ref2.valueKey,\n        childrenKey = _ref2.childrenKey;\n\n    if (!Array.isArray(nodes) || nodes.length === 0) {\n      return;\n    }\n\n    nodes.forEach(function (node, index) {\n      var _this7$nodes$refKey;\n\n      var refKey = ref + \"-\" + index;\n      node.refKey = refKey;\n      _this7.nodes[refKey] = (_this7$nodes$refKey = {\n        layer: layer\n      }, _this7$nodes$refKey[labelKey] = node[labelKey], _this7$nodes$refKey[valueKey] = node[valueKey], _this7$nodes$refKey.expand = getExpandState(node, props || _this7.props), _this7$nodes$refKey.uncheckable = getUncheckableState(node, props || _this7.props), _this7$nodes$refKey.refKey = refKey, _this7$nodes$refKey);\n\n      if (parentNode) {\n        _this7.nodes[refKey].parentNode = parentNode;\n      }\n\n      _this7.flattenNodes(node[childrenKey], props, refKey, _this7.nodes[refKey], layer + 1);\n    });\n  }\n  /**\n   * 过滤选中的 values 中不包含 uncheckableItemValues 的那些值\n   * @param {*} values\n   */\n  ;\n\n  _proto.filterSelectedValues = function filterSelectedValues(values) {\n    var _this$props$uncheckab = this.props.uncheckableItemValues,\n        uncheckableItemValues = _this$props$uncheckab === void 0 ? [] : _this$props$uncheckab;\n    return values.filter(function (value) {\n      return !uncheckableItemValues.includes(value);\n    });\n  };\n\n  _proto.serializeList = function serializeList(key, nodes) {\n    if (nodes === void 0) {\n      nodes = this.nodes;\n    }\n\n    var valueKey = this.props.valueKey;\n    var list = [];\n    Object.keys(nodes).forEach(function (refKey) {\n      if (nodes[refKey][key]) {\n        list.push(nodes[refKey][valueKey]);\n      }\n    });\n    return list;\n  };\n\n  _proto.serializeListOnlyParent = function serializeListOnlyParent(key, nodes) {\n    if (nodes === void 0) {\n      nodes = this.nodes;\n    }\n\n    var valueKey = this.props.valueKey;\n    var list = [];\n    Object.keys(nodes).forEach(function (refKey) {\n      var currentNode = nodes[refKey];\n\n      if (currentNode.parentNode) {\n        var _currentNode$parentNo;\n\n        var parentNode = nodes[(_currentNode$parentNo = currentNode.parentNode) === null || _currentNode$parentNo === void 0 ? void 0 : _currentNode$parentNo.refKey];\n\n        if (currentNode[key]) {\n          if (!(parentNode === null || parentNode === void 0 ? void 0 : parentNode.checkAll)) {\n            list.push(nodes[refKey][valueKey]);\n          } else if (parentNode === null || parentNode === void 0 ? void 0 : parentNode.uncheckable) {\n            list.push(nodes[refKey][valueKey]);\n          }\n        }\n      } else {\n        if (currentNode[key]) {\n          list.push(nodes[refKey][valueKey]);\n        }\n      }\n    });\n    return list;\n  };\n\n  _proto.unserializeLists = function unserializeLists(lists, nextProps) {\n    var _this8 = this;\n\n    if (nextProps === void 0) {\n      nextProps = this.props;\n    }\n\n    var _nextProps = nextProps,\n        valueKey = _nextProps.valueKey,\n        cascade = _nextProps.cascade,\n        _nextProps$uncheckabl = _nextProps.uncheckableItemValues,\n        uncheckableItemValues = _nextProps$uncheckabl === void 0 ? [] : _nextProps$uncheckabl;\n    var expandAll = getExpandAll(nextProps); // Reset values to false\n\n    Object.keys(this.nodes).forEach(function (refKey) {\n      Object.keys(lists).forEach(function (listKey) {\n        if (listKey === 'check') {\n          var node = _this8.nodes[refKey];\n\n          if (cascade && 'parentNode' in node) {\n            node[listKey] = node.parentNode[listKey];\n          } else {\n            node[listKey] = false;\n          }\n\n          lists[listKey].forEach(function (value) {\n            if (shallowEqual(_this8.nodes[refKey][valueKey], value) && !uncheckableItemValues.some(function (uncheckableValue) {\n              return shallowEqual(value, uncheckableValue);\n            })) {\n              _this8.nodes[refKey][listKey] = true;\n            }\n          });\n        }\n\n        if (listKey === 'expand') {\n          _this8.nodes[refKey][listKey] = false;\n\n          if (lists[listKey].length) {\n            lists[listKey].forEach(function (value) {\n              if (shallowEqual(_this8.nodes[refKey][valueKey], value)) {\n                _this8.nodes[refKey][listKey] = true;\n              }\n            });\n          } else {\n            _this8.nodes[refKey][listKey] = expandAll;\n          }\n        }\n      });\n    });\n  };\n\n  _proto.toggleChecked = function toggleChecked(node, isChecked) {\n    var nodes = clone(this.nodes);\n    this.toggleDownChecked(nodes, node, isChecked);\n    node.parentNode && this.toggleUpChecked(nodes, node.parentNode, isChecked);\n    var values = this.serializeListOnlyParent('check', nodes);\n    return this.filterSelectedValues(values);\n  };\n\n  _proto.toggleUpChecked = function toggleUpChecked(nodes, node, checked) {\n    var cascade = this.props.cascade;\n    var currentNode = nodes[node.refKey];\n\n    if (cascade) {\n      if (!checked) {\n        currentNode.check = checked;\n        currentNode.checkAll = checked;\n      } else {\n        if (this.everyChildChecked(nodes, node)) {\n          currentNode.check = true;\n          currentNode.checkAll = true;\n        } else {\n          currentNode.check = false;\n          currentNode.checkAll = false;\n        }\n      }\n\n      if (node.parentNode) {\n        this.toggleUpChecked(nodes, node.parentNode, checked);\n      }\n    }\n  };\n\n  _proto.toggleDownChecked = function toggleDownChecked(nodes, node, isChecked) {\n    var _this9 = this;\n\n    var _this$props9 = this.props,\n        childrenKey = _this$props9.childrenKey,\n        cascade = _this$props9.cascade;\n    nodes[node.refKey].check = isChecked;\n\n    if (!node[childrenKey] || !node[childrenKey].length || !cascade) {\n      nodes[node.refKey].checkAll = false;\n    } else {\n      nodes[node.refKey].checkAll = isChecked;\n      node[childrenKey].forEach(function (child) {\n        _this9.toggleDownChecked(nodes, child, isChecked);\n      });\n    }\n  };\n\n  _proto.toggleNode = function toggleNode(key, node, toggleValue) {\n    // 如果该节点处于 disabledCheckbox，则忽略该值\n    if (!node.uncheckable) {\n      this.nodes[node.refKey][key] = toggleValue;\n    }\n  };\n\n  _proto.toggleExpand = function toggleExpand(node, isExpand) {\n    var valueKey = this.props.valueKey;\n    var expandItemValues = new Set(this.serializeList('expand'));\n\n    if (isExpand) {\n      expandItemValues.add(node[valueKey]);\n    } else {\n      expandItemValues.delete(node[valueKey]);\n    }\n\n    return Array.from(expandItemValues);\n  };\n\n  _proto.renderDropdownMenu = function renderDropdownMenu() {\n    var _this$props10 = this.props,\n        _this$props10$height = _this$props10.height,\n        height = _this$props10$height === void 0 ? defaultHeight : _this$props10$height,\n        locale = _this$props10.locale,\n        menuStyle = _this$props10.menuStyle,\n        searchable = _this$props10.searchable,\n        renderMenu = _this$props10.renderMenu,\n        virtualized = _this$props10.virtualized,\n        searchKeyword = _this$props10.searchKeyword,\n        renderExtraFooter = _this$props10.renderExtraFooter,\n        menuClassName = _this$props10.menuClassName,\n        menuAutoWidth = _this$props10.menuAutoWidth;\n    var keyword = !_isUndefined(searchKeyword) ? searchKeyword : this.state.searchKeyword;\n    var classes = classNames(menuClassName, this.addPrefix('check-tree-menu'));\n    var menu = this.renderCheckTree();\n    var styles = virtualized ? _extends({\n      height: height\n    }, menuStyle) : menuStyle;\n    return React.createElement(MenuWrapper, {\n      autoWidth: menuAutoWidth,\n      className: classes,\n      style: styles,\n      ref: this.menuRef,\n      getToggleInstance: this.getToggleInstance,\n      getPositionInstance: this.getPositionInstance\n    }, searchable ? React.createElement(SearchBar, {\n      placeholder: locale.searchPlaceholder,\n      key: \"searchBar\",\n      onChange: this.handleSearch,\n      value: keyword\n    }) : null, renderMenu ? renderMenu(menu) : menu, renderExtraFooter === null || renderExtraFooter === void 0 ? void 0 : renderExtraFooter());\n  };\n\n  _proto.renderNode = function renderNode(node, layer) {\n    var _this10 = this;\n\n    var _this$state5 = this.state,\n        activeNode = _this$state5.activeNode,\n        searchKeyword = _this$state5.searchKeyword;\n    var _this$props11 = this.props,\n        valueKey = _this$props11.valueKey,\n        labelKey = _this$props11.labelKey,\n        childrenKey = _this$props11.childrenKey,\n        renderTreeNode = _this$props11.renderTreeNode,\n        renderTreeIcon = _this$props11.renderTreeIcon,\n        cascade = _this$props11.cascade,\n        locale = _this$props11.locale;\n    var visible = node.visible,\n        refKey = node.refKey; // 当处于搜索时，需要将所有节点都展开\n\n    var expand = getExpandWhenSearching(searchKeyword, node.expand);\n\n    if (!visible) {\n      return null;\n    }\n\n    var key = _isString(node[valueKey]) || _isNumber(node[valueKey]) ? node[valueKey] : refKey;\n    var children = node[childrenKey]; // 当用户进行搜索时，hasChildren的判断要变成判断是否存在 visible 为 true 的子节点\n\n    var visibleChildren = _isUndefined(searchKeyword) || searchKeyword.length === 0 ? !!children : hasVisibleChildren(node, childrenKey);\n    var props = {\n      value: node[valueKey],\n      label: node[labelKey],\n      layer: layer,\n      expand: expand,\n      rtl: locale.rtl,\n      focus: activeNode ? shallowEqual(activeNode[valueKey], node[valueKey]) : false,\n      visible: node.visible,\n      disabled: getDisabledState(this.nodes, node, this.props),\n      nodeData: node,\n      checkState: this.getNodeCheckState(node, cascade),\n      hasChildren: visibleChildren,\n      uncheckable: node.uncheckable,\n      allUncheckable: getSiblingNodeUncheckable(node, this.nodes),\n      onSelect: this.handleSelect,\n      onTreeToggle: this.handleToggle,\n      onRenderTreeNode: renderTreeNode,\n      onRenderTreeIcon: renderTreeIcon\n    };\n\n    if (props.hasChildren) {\n      var _classNames;\n\n      layer += 1; // 是否展开树节点且子节点不为空\n\n      var openClass = this.addTreePrefix('open');\n      var childrenClass = classNames(this.addTreePrefix('node-children'), (_classNames = {}, _classNames[openClass] = expand && visibleChildren, _classNames));\n      var nodes = children || [];\n      return React.createElement(\"div\", {\n        className: childrenClass,\n        key: key,\n        ref: this.bindNodeRefs.bind(this, refKey)\n      }, React.createElement(CheckTreeNode, props), React.createElement(\"div\", {\n        className: this.addTreePrefix('children')\n      }, nodes.map(function (child) {\n        return _this10.renderNode(child, layer);\n      })));\n    }\n\n    return React.createElement(CheckTreeNode, _extends({\n      key: key,\n      innerRef: this.bindNodeRefs.bind(this, refKey)\n    }, props));\n  };\n\n  _proto.renderVirtualNode = function renderVirtualNode(node, options) {\n    var _this$state6 = this.state,\n        activeNode = _this$state6.activeNode,\n        expandAll = _this$state6.expandAll,\n        searchKeyword = _this$state6.searchKeyword;\n    var _this$props12 = this.props,\n        valueKey = _this$props12.valueKey,\n        labelKey = _this$props12.labelKey,\n        childrenKey = _this$props12.childrenKey,\n        renderTreeNode = _this$props12.renderTreeNode,\n        renderTreeIcon = _this$props12.renderTreeIcon,\n        cascade = _this$props12.cascade,\n        locale = _this$props12.locale;\n    var key = options.key,\n        style = options.style;\n    var layer = node.layer,\n        refKey = node.refKey,\n        showNode = node.showNode;\n    var expand = getExpandWhenSearching(searchKeyword, node.expand);\n    var children = node[childrenKey];\n    var props = {\n      value: node[valueKey],\n      label: node[labelKey],\n      layer: layer,\n      expand: expand,\n      rtl: locale.rtl,\n      focus: activeNode ? shallowEqual(activeNode[valueKey], node[valueKey]) : false,\n      visible: node.visible,\n      disabled: getDisabledState(this.nodes, node, this.props),\n      nodeData: node,\n      children: children,\n      expandAll: expandAll,\n      checkState: this.getNodeCheckState(node, cascade),\n      parentNode: node.parentNode,\n      hasChildren: !!children,\n      uncheckable: node.uncheckable,\n      allUncheckable: getSiblingNodeUncheckable(node, this.nodes),\n      onSelect: this.handleSelect,\n      onTreeToggle: this.handleToggle,\n      onRenderTreeNode: renderTreeNode,\n      onRenderTreeIcon: renderTreeIcon\n    };\n    return showNode && React.createElement(CheckTreeNode, _extends({\n      style: style,\n      key: key,\n      innerRef: this.bindNodeRefs.bind(this, refKey)\n    }, props));\n  };\n\n  _proto.renderCheckTree = function renderCheckTree() {\n    var _classNames2,\n        _this11 = this,\n        _classNames3;\n\n    var _this$state7 = this.state,\n        filterData = _this$state7.filterData,\n        isSomeNodeHasChildren = _this$state7.isSomeNodeHasChildren;\n    var _this$props13 = this.props,\n        inline = _this$props13.inline,\n        style = _this$props13.style,\n        height = _this$props13.height,\n        className = _this$props13.className,\n        onScroll = _this$props13.onScroll,\n        locale = _this$props13.locale,\n        virtualized = _this$props13.virtualized,\n        searchable = _this$props13.searchable; // 树节点的层级\n\n    var layer = 0;\n    var classes = classNames(defaultClassPrefix('check-tree'), (_classNames2 = {}, _classNames2[className] = inline, _classNames2['without-children'] = !isSomeNodeHasChildren, _classNames2));\n    var formattedNodes = [];\n\n    if (!virtualized) {\n      formattedNodes = getFormattedTree(filterData, this.nodes, this.props).map(function (node) {\n        return _this11.renderNode(node, layer);\n      });\n\n      if (!formattedNodes.some(function (v) {\n        return v !== null;\n      })) {\n        return React.createElement(\"div\", {\n          className: this.addPrefix('none')\n        }, locale.noResultsText);\n      }\n    } else {\n      formattedNodes = this.getFlattenTreeData(filterData).filter(function (n) {\n        return n.showNode && n.visible;\n      });\n\n      if (!formattedNodes.length) {\n        return React.createElement(\"div\", {\n          className: this.addPrefix('none')\n        }, locale.noResultsText);\n      }\n    } // 当未定义 height 且 设置了 virtualized 为 true，treeHeight 设置默认高度\n\n\n    var treeHeight = _isUndefined(height) && virtualized ? defaultHeight : height;\n    var treeWidth = _isUndefined(style === null || style === void 0 ? void 0 : style.width) ? defaultWidth : style.width;\n    var styles = inline ? _extends({\n      height: treeHeight\n    }, style) : {};\n    var treeNodesClass = classNames(this.addTreePrefix('nodes'), (_classNames3 = {}, _classNames3[this.addTreePrefix('all-uncheckable')] = getEveryFisrtLevelNodeUncheckable(this.nodes), _classNames3));\n    var listHeight = getVirtualLisHeight(inline, searchable, treeHeight);\n    return React.createElement(\"div\", {\n      ref: this.treeViewRef,\n      className: classes,\n      style: styles,\n      onScroll: onScroll,\n      onKeyDown: this.handleKeyDown\n    }, React.createElement(\"div\", {\n      className: treeNodesClass\n    }, virtualized ? React.createElement(AutoSizer, {\n      defaultHeight: listHeight,\n      defaultWidth: treeWidth\n    }, function (_ref3) {\n      var height = _ref3.height,\n          width = _ref3.width;\n      return React.createElement(List, {\n        ref: _this11.listRef,\n        width: width || treeWidth,\n        height: height || listHeight,\n        rowHeight: 36,\n        rowCount: formattedNodes.length,\n        rowRenderer: _this11.measureRowRenderer(formattedNodes)\n      });\n    }) : formattedNodes));\n  };\n\n  _proto.render = function render() {\n    var _this$props14 = this.props,\n        cascade = _this$props14.cascade,\n        style = _this$props14.style,\n        locale = _this$props14.locale,\n        inline = _this$props14.inline,\n        disabled = _this$props14.disabled,\n        valueKey = _this$props14.valueKey,\n        labelKey = _this$props14.labelKey,\n        cleanable = _this$props14.cleanable,\n        countable = _this$props14.countable,\n        placeholder = _this$props14.placeholder,\n        toggleComponentClass = _this$props14.toggleComponentClass,\n        onExited = _this$props14.onExited,\n        onEntered = _this$props14.onEntered,\n        onClean = _this$props14.onClean,\n        renderValue = _this$props14.renderValue,\n        positionRef = _this$props14.positionRef,\n        rest = _objectWithoutPropertiesLoose(_this$props14, [\"cascade\", \"style\", \"locale\", \"inline\", \"disabled\", \"valueKey\", \"labelKey\", \"cleanable\", \"countable\", \"placeholder\", \"toggleComponentClass\", \"onExited\", \"onEntered\", \"onClean\", \"renderValue\", \"positionRef\"]);\n\n    var _this$state8 = this.state,\n        hasValue = _this$state8.hasValue,\n        selectedValues = _this$state8.selectedValues;\n\n    var hasValidValue = hasValue || selectedValues.length > 0 && _isFunction(renderValue);\n\n    var selectedItems = this.getSelectedItems(selectedValues);\n    var selectedElement = placeholder;\n    /**\n     * if value is invalid and renderValue is undefined, then using placeholder.\n     * if value is valid and renderValue is't undefined, then using renderValue()\n     */\n\n    if (selectedValues.length) {\n      if (hasValue) {\n        selectedElement = React.createElement(SelectedElement, {\n          selectedItems: selectedItems,\n          countable: countable,\n          valueKey: valueKey,\n          labelKey: labelKey,\n          prefix: this.addPrefix,\n          cascade: cascade,\n          locale: locale\n        });\n      }\n\n      if (_isFunction(renderValue)) {\n        selectedElement = renderValue(selectedValues, selectedItems, selectedElement);\n\n        if (_isNil(selectedElement)) {\n          hasValidValue = false;\n        }\n      }\n    }\n\n    var unhandled = getUnhandledProps(CheckTreePicker, rest);\n    var classes = getToggleWrapperClassName('check-tree', this.addPrefix, this.props, hasValidValue);\n\n    if (inline) {\n      return this.renderCheckTree();\n    }\n\n    return React.createElement(PickerToggleTrigger, {\n      pickerProps: this.props,\n      ref: this.triggerRef,\n      positionRef: mergeRefs(this.positionRef, positionRef),\n      onEntered: createChainedFunction(this.handleOnOpen, onEntered),\n      onExited: createChainedFunction(this.handleOnClose, onExited),\n      speaker: this.renderDropdownMenu()\n    }, React.createElement(\"div\", {\n      className: classes,\n      style: style\n    }, React.createElement(PickerToggle, _extends({}, unhandled, {\n      ref: this.toggleRef,\n      onKeyDown: this.handleToggleKeyDown,\n      onClean: createChainedFunction(this.handleClean, onClean),\n      componentClass: toggleComponentClass,\n      cleanable: cleanable && !disabled,\n      hasValue: hasValidValue,\n      active: this.state.active,\n      \"aria-disabled\": disabled\n    }), selectedElement || locale.placeholder)));\n  };\n\n  return CheckTreePicker;\n}(React.Component);\n\nCheckTreePicker.propTypes = _extends({}, listPickerPropTypes, {\n  height: PropTypes.number,\n  inline: PropTypes.bool,\n  cascade: PropTypes.bool,\n  countable: PropTypes.bool,\n  expandAll: PropTypes.bool,\n  searchable: PropTypes.bool,\n  virtualized: PropTypes.bool,\n  searchKeyword: PropTypes.string,\n  menuAutoWidth: PropTypes.bool,\n  defaultExpandAll: PropTypes.bool,\n  containerPadding: PropTypes.number,\n  disabledItemValues: PropTypes.array,\n  expandItemValues: PropTypes.array,\n  defaultExpandItemValues: PropTypes.array,\n  uncheckableItemValues: PropTypes.array,\n  onSearch: PropTypes.func,\n  onExpand: PropTypes.func,\n  onSelect: PropTypes.func,\n  onScroll: PropTypes.func,\n  renderMenu: PropTypes.func,\n  renderTreeNode: PropTypes.func,\n  renderTreeIcon: PropTypes.func,\n  searchBy: PropTypes.func\n});\nCheckTreePicker.defaultProps = _extends({}, listPickerDefaultProps, {\n  cascade: true,\n  countable: true,\n  searchable: true,\n  menuAutoWidth: true,\n  defaultValue: [],\n  uncheckableItemValues: [],\n  locale: {\n    placeholder: 'Select',\n    searchPlaceholder: 'Search',\n    noResultsText: 'No results found',\n    checkAll: 'All'\n  }\n});\npolyfill(CheckTreePicker);\nexport default defaultProps({\n  classPrefix: 'picker'\n})(CheckTreePicker);","map":{"version":3,"sources":["E:/OneDrive - University of Salford/Desktop/pizza-website/node_modules/rsuite/es/CheckTreePicker/CheckTreePicker.js"],"names":["_objectWithoutPropertiesLoose","_extends","_inheritsLoose","_isNil","_isFunction","_isNumber","_isString","_isEmpty","_isUndefined","_isArray","React","PropTypes","classNames","List","AutoSizer","CellMeasurerCache","CellMeasurer","polyfill","shallowEqual","CheckTreeNode","CHECK_STATE","clone","defaultProps","prefix","defaultClassPrefix","getUnhandledProps","createChainedFunction","mergeRefs","PickerToggle","getToggleWrapperClassName","onMenuKeyDown","MenuWrapper","SearchBar","SelectedElement","PickerToggleTrigger","createConcatChildrenFunction","shouldDisplay","isEveryChildChecked","isSomeChildChecked","isSomeNodeHasChildren","getSiblingNodeUncheckable","getEveryFisrtLevelNodeUncheckable","getUncheckableState","getFormattedTree","getDisabledState","compareArray","shouldShowNodeByExpanded","flattenTree","getNodeParents","getVirtualLisHeight","hasVisibleChildren","treeDeprecatedWarning","getExpandItemValues","getExpandAll","getExpandState","getExpandWhenSearching","listPickerPropTypes","listPickerDefaultProps","defaultHeight","defaultWidth","CheckTreePicker","_React$Component","_props","_this","call","menuRef","treeViewRef","positionRef","listRef","triggerRef","toggleRef","getValue","props","_props2","value","defaultValue","_props2$uncheckableIt","uncheckableItemValues","length","filter","v","includes","getElementByDataKey","dataKey","ele","nodeRefs","Element","querySelector","addTreePrefix","getFocusableMenuItems","filterData","state","childrenKey","items","loop","treeNodes","forEach","node","nodeData","nodes","refKey","visible","push","activeNode","cache","fixedWidth","minHeight","bindNodeRefs","ref","getPositionInstance","current","getToggleInstance","selectActiveItem","event","_this$getActiveItem","getActiveItem","handleSelect","focusNextItem","_node$focus","_this$getItemsAndActi","getItemsAndActiveIndex","activeIndex","nextIndex","focus","focusPreviousItem","_node$focus2","_this$getItemsAndActi2","prevIndex","handleCloseDropdown","_this$triggerRef$curr","_this$triggerRef$curr2","hide","handleOpenDropdown","_this$triggerRef$curr3","_this$triggerRef$curr4","show","open","_this$handleOpenDropd","_this2","close","_this$handleCloseDrop","_this3","handleToggleDropdown","active","everyChildChecked","list","Object","keys","_curNode$parentNode","curNode","parentNode","uncheckable","every","l","check","addPrefix","name","classPrefix","_this$props","onChange","onSelect","selectedValues","toggleChecked","unserializeLists","setState","hasValue","handleToggle","_this$props2","valueKey","onExpand","expandItemValues","nextExpandItemValues","toggleExpand","expand","handleKeyDown","down","up","enter","del","handleClean","handleToggleKeyDown","_this$state","keyCode","target","HTMLElement","className","handleSearch","_this$props3","onSearch","searchKeyword","getFilterData","evnet","_this$props$onChange","_this$props4","handleOnOpen","_this$props$onOpen","_this$props5","_node$focus3","onOpen","handleOnClose","_this$props6","onClose","measureRowRenderer","_ref","key","index","style","parent","createElement","columnIndex","rowIndex","renderVirtualNode","_value","data","cascade","_childrenKey","_searchKeyword","nextValue","_nextExpandItemValues","nextData","concat","flattenNodes","expandAll","serializeList","createRef","getDerivedStateFromProps","nextProps","prevState","nextState","_proto","prototype","componentDidUpdate","_prevProps","updateDataChange","updateValueChange","updateExpandItemValuesChange","updateUncheckableItemValuesChange","updateCascadeChange","updateSearchKeywordChange","forceUpdateGrid","_this$state2","_this$props7","_this$props7$data","_this$state3","_this$state4","getNodeCheckState","checkAll","CHECK","UNCHECK","INDETERMINATE","_props3","labelKey","searchBy","setVisible","item","child","getActiveElementOption","options","i","_options$i$childrenKe","getFlattenTreeData","_this4","_this$props8","formatted","parentKeys","layer","showNode","document","activeElement","getAttribute","activeItem","_activeItem$dataset","_activeItem$dataset2","_this$nodes$nodeData$","_this$nodes$nodeData$2","dataset","getSelectedItems","_this5","checkItems","map","some","values","_this6","_this7","_ref2","Array","isArray","_this7$nodes$refKey","filterSelectedValues","_this$props$uncheckab","serializeListOnlyParent","currentNode","_currentNode$parentNo","lists","_this8","_nextProps","_nextProps$uncheckabl","listKey","uncheckableValue","isChecked","toggleDownChecked","toggleUpChecked","checked","_this9","_this$props9","toggleNode","toggleValue","isExpand","Set","add","delete","from","renderDropdownMenu","_this$props10","_this$props10$height","height","locale","menuStyle","searchable","renderMenu","virtualized","renderExtraFooter","menuClassName","menuAutoWidth","keyword","classes","menu","renderCheckTree","styles","autoWidth","placeholder","searchPlaceholder","renderNode","_this10","_this$state5","_this$props11","renderTreeNode","renderTreeIcon","children","visibleChildren","label","rtl","disabled","checkState","hasChildren","allUncheckable","onTreeToggle","onRenderTreeNode","onRenderTreeIcon","_classNames","openClass","childrenClass","bind","innerRef","_this$state6","_this$props12","_classNames2","_this11","_classNames3","_this$state7","_this$props13","inline","onScroll","formattedNodes","noResultsText","n","treeHeight","treeWidth","width","treeNodesClass","listHeight","onKeyDown","_ref3","rowHeight","rowCount","rowRenderer","render","_this$props14","cleanable","countable","toggleComponentClass","onExited","onEntered","onClean","renderValue","rest","_this$state8","hasValidValue","selectedItems","selectedElement","unhandled","pickerProps","speaker","componentClass","Component","propTypes","number","bool","string","defaultExpandAll","containerPadding","disabledItemValues","array","defaultExpandItemValues","func"],"mappings":"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","sourcesContent":["import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport _isNil from \"lodash/isNil\";\nimport _isFunction from \"lodash/isFunction\";\nimport _isNumber from \"lodash/isNumber\";\nimport _isString from \"lodash/isString\";\nimport _isEmpty from \"lodash/isEmpty\";\nimport _isUndefined from \"lodash/isUndefined\";\nimport _isArray from \"lodash/isArray\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport List from 'react-virtualized/dist/commonjs/List';\nimport AutoSizer from 'react-virtualized/dist/commonjs/AutoSizer';\nimport { CellMeasurerCache, CellMeasurer } from 'react-virtualized/dist/commonjs/CellMeasurer';\nimport { polyfill } from 'react-lifecycles-compat';\nimport shallowEqual from '../utils/shallowEqual';\nimport CheckTreeNode from './CheckTreeNode';\nimport { CHECK_STATE } from '../constants';\nimport { clone, defaultProps, prefix, defaultClassPrefix, getUnhandledProps, createChainedFunction, mergeRefs } from '../utils';\nimport { PickerToggle, getToggleWrapperClassName, onMenuKeyDown, MenuWrapper, SearchBar, SelectedElement, PickerToggleTrigger, createConcatChildrenFunction, shouldDisplay } from '../Picker';\nimport { isEveryChildChecked, isSomeChildChecked, isSomeNodeHasChildren, getSiblingNodeUncheckable, getEveryFisrtLevelNodeUncheckable, getUncheckableState, getFormattedTree, getDisabledState } from './utils';\nimport { compareArray, shouldShowNodeByExpanded, flattenTree, getNodeParents, getVirtualLisHeight, hasVisibleChildren, treeDeprecatedWarning, getExpandItemValues, getExpandAll, getExpandState, getExpandWhenSearching } from '../utils/treeUtils';\nimport { listPickerPropTypes, listPickerDefaultProps } from '../Picker/propTypes'; // default value for virtualized\n\nvar defaultHeight = 360;\nvar defaultWidth = 200;\n\nvar CheckTreePicker =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inheritsLoose(CheckTreePicker, _React$Component);\n\n  function CheckTreePicker(_props) {\n    var _this;\n\n    _this = _React$Component.call(this, _props) || this;\n    _this.menuRef = void 0;\n    _this.treeViewRef = void 0;\n    _this.positionRef = void 0;\n    _this.listRef = void 0;\n    _this.triggerRef = void 0;\n    _this.toggleRef = void 0;\n\n    _this.getValue = function (props) {\n      if (props === void 0) {\n        props = _this.props;\n      }\n\n      var _props2 = props,\n          value = _props2.value,\n          defaultValue = _props2.defaultValue,\n          _props2$uncheckableIt = _props2.uncheckableItemValues,\n          uncheckableItemValues = _props2$uncheckableIt === void 0 ? [] : _props2$uncheckableIt;\n\n      if (value && value.length) {\n        return value.filter(function (v) {\n          return !uncheckableItemValues.includes(v);\n        });\n      }\n\n      if (defaultValue && defaultValue.length > 0) {\n        return defaultValue.filter(function (v) {\n          return !uncheckableItemValues.includes(v);\n        });\n      }\n\n      return [];\n    };\n\n    _this.getElementByDataKey = function (dataKey) {\n      var ele = _this.nodeRefs[dataKey];\n\n      if (ele instanceof Element) {\n        return ele.querySelector(\".\" + _this.addTreePrefix('node-label'));\n      }\n\n      return null;\n    };\n\n    _this.getFocusableMenuItems = function () {\n      var filterData = _this.state.filterData;\n      var childrenKey = _this.props.childrenKey;\n      var items = [];\n\n      var loop = function loop(treeNodes) {\n        treeNodes.forEach(function (node) {\n          var nodeData = _extends({}, node, {}, _this.nodes[node.refKey]);\n\n          if (!getDisabledState(_this.nodes, node, _this.props) && node.visible) {\n            items.push(node);\n          }\n\n          if (node[childrenKey] && getExpandState(nodeData, _this.props)) {\n            loop(node[childrenKey]);\n          }\n        });\n      };\n\n      loop(filterData);\n      return items;\n    };\n\n    _this.nodes = {};\n    _this.activeNode = null;\n    _this.cache = new CellMeasurerCache({\n      fixedWidth: true,\n      minHeight: 20\n    });\n    _this.nodeRefs = {};\n\n    _this.bindNodeRefs = function (refKey, ref) {\n      _this.nodeRefs[refKey] = ref;\n    };\n\n    _this.getPositionInstance = function () {\n      return _this.positionRef.current;\n    };\n\n    _this.getToggleInstance = function () {\n      return _this.toggleRef.current;\n    };\n\n    _this.selectActiveItem = function (event) {\n      var _this$getActiveItem = _this.getActiveItem(),\n          nodeData = _this$getActiveItem.nodeData;\n\n      _this.handleSelect(nodeData, event);\n    };\n\n    _this.focusNextItem = function () {\n      var _node$focus;\n\n      var _this$getItemsAndActi = _this.getItemsAndActiveIndex(),\n          items = _this$getItemsAndActi.items,\n          activeIndex = _this$getItemsAndActi.activeIndex;\n\n      if (items.length === 0) {\n        return;\n      }\n\n      var nextIndex = activeIndex === items.length - 1 ? 0 : activeIndex + 1;\n\n      var node = _this.getElementByDataKey(items[nextIndex].refKey);\n\n      node === null || node === void 0 ? void 0 : (_node$focus = node.focus) === null || _node$focus === void 0 ? void 0 : _node$focus.call(node);\n    };\n\n    _this.focusPreviousItem = function () {\n      var _node$focus2;\n\n      var _this$getItemsAndActi2 = _this.getItemsAndActiveIndex(),\n          items = _this$getItemsAndActi2.items,\n          activeIndex = _this$getItemsAndActi2.activeIndex;\n\n      if (items.length === 0) {\n        return;\n      }\n\n      var prevIndex = activeIndex === 0 ? items.length - 1 : activeIndex - 1;\n      prevIndex = prevIndex >= 0 ? prevIndex : 0;\n\n      var node = _this.getElementByDataKey(items[prevIndex].refKey);\n\n      node === null || node === void 0 ? void 0 : (_node$focus2 = node.focus) === null || _node$focus2 === void 0 ? void 0 : _node$focus2.call(node);\n    };\n\n    _this.handleCloseDropdown = function () {\n      var _this$triggerRef$curr, _this$triggerRef$curr2;\n\n      (_this$triggerRef$curr = _this.triggerRef.current) === null || _this$triggerRef$curr === void 0 ? void 0 : (_this$triggerRef$curr2 = _this$triggerRef$curr.hide) === null || _this$triggerRef$curr2 === void 0 ? void 0 : _this$triggerRef$curr2.call(_this$triggerRef$curr);\n    };\n\n    _this.handleOpenDropdown = function () {\n      var _this$triggerRef$curr3, _this$triggerRef$curr4;\n\n      (_this$triggerRef$curr3 = _this.triggerRef.current) === null || _this$triggerRef$curr3 === void 0 ? void 0 : (_this$triggerRef$curr4 = _this$triggerRef$curr3.show) === null || _this$triggerRef$curr4 === void 0 ? void 0 : _this$triggerRef$curr4.call(_this$triggerRef$curr3);\n    };\n\n    _this.open = function () {\n      var _this$handleOpenDropd, _this2;\n\n      (_this$handleOpenDropd = (_this2 = _this).handleOpenDropdown) === null || _this$handleOpenDropd === void 0 ? void 0 : _this$handleOpenDropd.call(_this2);\n    };\n\n    _this.close = function () {\n      var _this$handleCloseDrop, _this3;\n\n      (_this$handleCloseDrop = (_this3 = _this).handleCloseDropdown) === null || _this$handleCloseDrop === void 0 ? void 0 : _this$handleCloseDrop.call(_this3);\n    };\n\n    _this.handleToggleDropdown = function () {\n      var active = _this.state.active;\n\n      if (active) {\n        _this.handleCloseDropdown();\n\n        return;\n      }\n\n      _this.handleOpenDropdown();\n    };\n\n    _this.everyChildChecked = function (nodes, node) {\n      var list = [];\n      Object.keys(nodes).forEach(function (refKey) {\n        var _curNode$parentNode;\n\n        var curNode = nodes[refKey];\n\n        if (((_curNode$parentNode = curNode.parentNode) === null || _curNode$parentNode === void 0 ? void 0 : _curNode$parentNode.refKey) === node.refKey && !curNode.uncheckable) {\n          list.push(curNode);\n        }\n      });\n      return list.every(function (l) {\n        return l.check;\n      });\n    };\n\n    _this.addPrefix = function (name) {\n      return prefix(_this.props.classPrefix)(name);\n    };\n\n    _this.addTreePrefix = function (name) {\n      return prefix(defaultClassPrefix('check-tree'))(name);\n    };\n\n    _this.handleSelect = function (activeNode, event) {\n      var _this$props = _this.props,\n          onChange = _this$props.onChange,\n          onSelect = _this$props.onSelect,\n          value = _this$props.value;\n\n      var selectedValues = _this.toggleChecked(activeNode, !_this.nodes[activeNode.refKey].check);\n\n      if (!_isUndefined(value)) {\n        _this.activeNode = activeNode;\n      } else {\n        _this.unserializeLists({\n          check: selectedValues\n        });\n\n        _this.setState({\n          activeNode: activeNode,\n          selectedValues: selectedValues,\n          hasValue: !!selectedValues.length\n        });\n      }\n\n      onChange === null || onChange === void 0 ? void 0 : onChange(selectedValues, event);\n      onSelect === null || onSelect === void 0 ? void 0 : onSelect(activeNode, selectedValues, event);\n    };\n\n    _this.handleToggle = function (node) {\n      var _this$props2 = _this.props,\n          valueKey = _this$props2.valueKey,\n          childrenKey = _this$props2.childrenKey,\n          onExpand = _this$props2.onExpand,\n          expandItemValues = _this$props2.expandItemValues;\n\n      var nextExpandItemValues = _this.toggleExpand(node, !node.expand);\n\n      if (_isUndefined(expandItemValues)) {\n        _this.unserializeLists({\n          expand: nextExpandItemValues\n        });\n\n        _this.setState({\n          expandItemValues: nextExpandItemValues\n        });\n      }\n\n      onExpand === null || onExpand === void 0 ? void 0 : onExpand(nextExpandItemValues, node, createConcatChildrenFunction(node, node[valueKey], {\n        valueKey: valueKey,\n        childrenKey: childrenKey\n      }));\n    };\n\n    _this.handleKeyDown = function (event) {\n      onMenuKeyDown(event, {\n        down: _this.focusNextItem,\n        up: _this.focusPreviousItem,\n        enter: _this.selectActiveItem,\n        del: _this.handleClean\n      });\n    };\n\n    _this.handleToggleKeyDown = function (event) {\n      var _this$state = _this.state,\n          activeNode = _this$state.activeNode,\n          active = _this$state.active; // enter\n\n      if ((!activeNode || !active) && event.keyCode === 13) {\n        _this.handleToggleDropdown();\n      } // delete\n\n\n      if (event.keyCode === 8) {\n        _this.handleClean(event);\n      }\n\n      if (!_this.treeViewRef.current) {\n        return;\n      }\n\n      if (event.target instanceof HTMLElement) {\n        var className = event.target.className;\n\n        if (className.includes(_this.addPrefix('toggle')) || className.includes(_this.addPrefix('toggle-custom')) || className.includes(_this.addPrefix('search-bar-input'))) {\n          onMenuKeyDown(event, {\n            down: _this.focusNextItem\n          });\n        }\n      }\n    };\n\n    _this.handleSearch = function (value, event) {\n      var filterData = _this.state.filterData;\n      var _this$props3 = _this.props,\n          onSearch = _this$props3.onSearch,\n          searchKeyword = _this$props3.searchKeyword;\n\n      if (_isUndefined(searchKeyword)) {\n        _this.setState({\n          filterData: _this.getFilterData(value, filterData),\n          searchKeyword: value\n        });\n      }\n\n      onSearch === null || onSearch === void 0 ? void 0 : onSearch(value, event);\n    };\n\n    _this.handleClean = function (evnet) {\n      var _this$props$onChange, _this$props4;\n\n      _this.setState({\n        selectedValues: [],\n        hasValue: false,\n        activeNode: {}\n      });\n\n      _this.unserializeLists({\n        check: []\n      });\n\n      (_this$props$onChange = (_this$props4 = _this.props).onChange) === null || _this$props$onChange === void 0 ? void 0 : _this$props$onChange.call(_this$props4, [], evnet);\n    };\n\n    _this.handleOnOpen = function () {\n      var _this$props$onOpen, _this$props5;\n\n      var activeNode = _this.state.activeNode;\n\n      if (activeNode) {\n        var _node$focus3;\n\n        var node = _this.getElementByDataKey(activeNode.refKey);\n\n        node === null || node === void 0 ? void 0 : (_node$focus3 = node.focus) === null || _node$focus3 === void 0 ? void 0 : _node$focus3.call(node);\n      }\n\n      (_this$props$onOpen = (_this$props5 = _this.props).onOpen) === null || _this$props$onOpen === void 0 ? void 0 : _this$props$onOpen.call(_this$props5);\n\n      _this.setState({\n        active: true\n      });\n    };\n\n    _this.handleOnClose = function () {\n      var filterData = _this.state.filterData;\n      var _this$props6 = _this.props,\n          onClose = _this$props6.onClose,\n          searchKeyword = _this$props6.searchKeyword;\n\n      if (_isUndefined(searchKeyword)) {\n        _this.setState({\n          filterData: _this.getFilterData('', filterData),\n          searchKeyword: ''\n        });\n      }\n\n      onClose === null || onClose === void 0 ? void 0 : onClose();\n\n      _this.setState({\n        active: false\n      });\n    };\n\n    _this.measureRowRenderer = function (nodes) {\n      return function (_ref) {\n        var key = _ref.key,\n            index = _ref.index,\n            style = _ref.style,\n            parent = _ref.parent;\n        var node = nodes[index];\n        return React.createElement(CellMeasurer, {\n          cache: _this.cache,\n          columnIndex: 0,\n          key: key,\n          rowIndex: index,\n          parent: parent\n        }, function () {\n          return _this.renderVirtualNode(node, {\n            key: key,\n            style: style\n          });\n        });\n      };\n    };\n\n    var _value = _props.value,\n        data = _props.data,\n        cascade = _props.cascade,\n        _childrenKey = _props.childrenKey,\n        _searchKeyword = _props.searchKeyword;\n    _this.nodes = {};\n\n    var nextValue = _this.getValue(_props);\n\n    var _nextExpandItemValues = getExpandItemValues(_props);\n\n    var nextData = [].concat(data);\n\n    _this.flattenNodes(nextData, _props);\n\n    _this.unserializeLists({\n      check: nextValue,\n      expand: _nextExpandItemValues\n    }, _props);\n\n    _this.state = {\n      data: data,\n      value: _value,\n      cascade: cascade,\n      hasValue: _this.hasValue(nextValue),\n      expandAll: getExpandAll(_props),\n      filterData: _this.getFilterData(_searchKeyword, nextData, _props),\n      searchKeyword: _searchKeyword || '',\n      selectedValues: nextValue,\n      expandItemValues: _this.serializeList('expand'),\n      uncheckableItemValues: _props.uncheckableItemValues,\n      isSomeNodeHasChildren: isSomeNodeHasChildren(data, _childrenKey)\n    };\n    _this.treeViewRef = React.createRef();\n    _this.positionRef = React.createRef();\n    _this.listRef = React.createRef();\n    _this.triggerRef = React.createRef();\n    _this.toggleRef = React.createRef(); // for test\n\n    _this.menuRef = React.createRef();\n    treeDeprecatedWarning(_props, ['expandAll']);\n    return _this;\n  }\n\n  CheckTreePicker.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, prevState) {\n    var value = nextProps.value,\n        data = nextProps.data,\n        cascade = nextProps.cascade,\n        expandAll = nextProps.expandAll,\n        searchKeyword = nextProps.searchKeyword,\n        uncheckableItemValues = nextProps.uncheckableItemValues,\n        expandItemValues = nextProps.expandItemValues;\n    var nextState = {};\n\n    if (_isArray(data) && _isArray(prevState.data) && prevState.data !== data) {\n      nextState.data = data;\n    }\n\n    if (compareArray(value, prevState.value)) {\n      nextState.value = value;\n    }\n\n    if (compareArray(expandItemValues, prevState.expandItemValues) && _isArray(expandItemValues)) {\n      nextState.expandItemValues = expandItemValues;\n    }\n\n    if (compareArray(uncheckableItemValues, prevState.uncheckableItemValues) && _isArray(uncheckableItemValues)) {\n      nextState.uncheckableItemValues = uncheckableItemValues;\n    }\n\n    if (!_isUndefined(searchKeyword) && searchKeyword !== prevState.searchKeyword) {\n      nextState.searchKeyword = searchKeyword;\n    }\n\n    if (cascade !== prevState.cascade) {\n      nextState.cascade = cascade;\n    }\n\n    if (expandAll !== prevState.expandAll) {\n      nextState.expandAll = expandAll;\n    }\n\n    return Object.keys(nextState).length ? nextState : null;\n  };\n\n  var _proto = CheckTreePicker.prototype;\n\n  _proto.componentDidUpdate = function componentDidUpdate(_prevProps, prevState) {\n    this.updateDataChange(prevState);\n    this.updateValueChange(prevState);\n    this.updateExpandItemValuesChange(prevState);\n    this.updateUncheckableItemValuesChange(prevState);\n    this.updateCascadeChange(prevState);\n    this.updateSearchKeywordChange(prevState);\n\n    if (this.listRef.current) {\n      this.listRef.current.forceUpdateGrid();\n    }\n  };\n\n  _proto.updateDataChange = function updateDataChange(prevState) {\n    var _this$state2 = this.state,\n        searchKeyword = _this$state2.searchKeyword,\n        expandItemValues = _this$state2.expandItemValues;\n    var _this$props7 = this.props,\n        _this$props7$data = _this$props7.data,\n        data = _this$props7$data === void 0 ? [] : _this$props7$data,\n        childrenKey = _this$props7.childrenKey;\n\n    if (prevState.data !== data) {\n      var nextData = [].concat(data);\n      this.nodes = {};\n      this.flattenNodes(nextData);\n      this.unserializeLists({\n        check: this.getValue(),\n        expand: expandItemValues\n      });\n      this.setState({\n        data: nextData,\n        filterData: this.getFilterData(searchKeyword, nextData),\n        isSomeNodeHasChildren: isSomeNodeHasChildren(nextData, childrenKey),\n        hasValue: this.hasValue(),\n        expandItemValues: this.serializeList('expand')\n      });\n    }\n  };\n\n  _proto.updateValueChange = function updateValueChange(prevState) {\n    var expandItemValues = this.state.expandItemValues;\n    var value = this.props.value;\n\n    if (compareArray(value, prevState.value)) {\n      this.unserializeLists({\n        check: value !== null && value !== void 0 ? value : [],\n        expand: expandItemValues\n      });\n      this.setState({\n        selectedValues: value,\n        hasValue: this.hasValue(value),\n        activeNode: value.length ? this.activeNode : null\n      });\n    }\n  };\n\n  _proto.updateExpandItemValuesChange = function updateExpandItemValuesChange(prevState) {\n    var expandItemValues = this.props.expandItemValues;\n\n    if (compareArray(expandItemValues, prevState.expandItemValues) && _isArray(expandItemValues)) {\n      this.unserializeLists({\n        expand: expandItemValues\n      });\n      this.setState({\n        expandItemValues: expandItemValues\n      });\n    }\n  };\n\n  _proto.updateUncheckableItemValuesChange = function updateUncheckableItemValuesChange(prevState) {\n    var _this$state3 = this.state,\n        data = _this$state3.data,\n        selectedValues = _this$state3.selectedValues,\n        expandItemValues = _this$state3.expandItemValues;\n    var uncheckableItemValues = this.props.uncheckableItemValues;\n\n    if (compareArray(uncheckableItemValues, prevState.uncheckableItemValues) && _isArray(uncheckableItemValues)) {\n      this.flattenNodes(data);\n      this.unserializeLists({\n        check: selectedValues,\n        expand: expandItemValues\n      });\n      this.setState({\n        hasValue: this.hasValue()\n      });\n    }\n  };\n\n  _proto.updateCascadeChange = function updateCascadeChange(prevState) {\n    var _this$state4 = this.state,\n        data = _this$state4.data,\n        selectedValues = _this$state4.selectedValues,\n        expandItemValues = _this$state4.expandItemValues;\n    var cascade = this.props.cascade; // cascade 改变时，重新初始化\n\n    if (cascade !== prevState.cascade && cascade) {\n      this.flattenNodes(data);\n      this.unserializeLists({\n        check: selectedValues,\n        expand: expandItemValues\n      });\n      this.setState({\n        cascade: cascade\n      });\n    }\n  };\n\n  _proto.updateSearchKeywordChange = function updateSearchKeywordChange(prevState) {\n    var filterData = this.state.filterData;\n    var searchKeyword = this.props.searchKeyword;\n\n    if (!_isUndefined(searchKeyword) && prevState.searchKeyword !== searchKeyword) {\n      this.setState({\n        filterData: this.getFilterData(searchKeyword, filterData)\n      });\n    }\n  };\n\n  _proto.getNodeCheckState = function getNodeCheckState(node, cascade) {\n    var childrenKey = this.props.childrenKey;\n\n    if (!node[childrenKey] || !node[childrenKey].length || !cascade) {\n      this.nodes[node.refKey].checkAll = false;\n      return node.check ? CHECK_STATE.CHECK : CHECK_STATE.UNCHECK;\n    }\n\n    if (isEveryChildChecked(node, this.nodes, this.props)) {\n      this.nodes[node.refKey].checkAll = true;\n      this.nodes[node.refKey].check = true;\n      return CHECK_STATE.CHECK;\n    }\n\n    if (isSomeChildChecked(node, this.nodes, this.props)) {\n      this.nodes[node.refKey].checkAll = false;\n      return CHECK_STATE.INDETERMINATE;\n    }\n\n    return CHECK_STATE.UNCHECK;\n  };\n\n  _proto.getFilterData = function getFilterData(searchKeyword, data, props) {\n    if (searchKeyword === void 0) {\n      searchKeyword = '';\n    }\n\n    if (props === void 0) {\n      props = this.props;\n    }\n\n    var _props3 = props,\n        labelKey = _props3.labelKey,\n        childrenKey = _props3.childrenKey,\n        searchBy = _props3.searchBy;\n\n    var setVisible = function setVisible(nodes) {\n      if (nodes === void 0) {\n        nodes = [];\n      }\n\n      return nodes.forEach(function (item) {\n        item.visible = searchBy ? searchBy(searchKeyword, item[labelKey], item) : shouldDisplay(item[labelKey], searchKeyword);\n\n        if (_isArray(item[childrenKey])) {\n          setVisible(item[childrenKey]);\n          item[childrenKey].forEach(function (child) {\n            if (child.visible) {\n              item.visible = child.visible;\n            }\n          });\n        }\n      });\n    };\n\n    setVisible(data);\n    return data;\n  };\n\n  _proto.getActiveElementOption = function getActiveElementOption(options, refKey) {\n    var childrenKey = this.props.childrenKey;\n\n    for (var i = 0; i < options.length; i += 1) {\n      var _options$i$childrenKe;\n\n      if (options[i].refKey === refKey) {\n        return options[i];\n      } else if ((_options$i$childrenKe = options[i][childrenKey]) === null || _options$i$childrenKe === void 0 ? void 0 : _options$i$childrenKe.length) {\n        var active = this.getActiveElementOption(options[i][childrenKey], refKey);\n\n        if (!_isEmpty(active)) {\n          return active;\n        }\n      }\n    }\n\n    return {};\n  };\n\n  _proto.getFlattenTreeData = function getFlattenTreeData(nodes) {\n    var _this4 = this;\n\n    var expandItemValues = this.state.expandItemValues;\n    var _this$props8 = this.props,\n        childrenKey = _this$props8.childrenKey,\n        valueKey = _this$props8.valueKey;\n    return flattenTree(nodes, childrenKey, function (node) {\n      var formatted = {};\n      var curNode = _this4.nodes[node.refKey];\n      var parentKeys = getNodeParents(curNode, 'parentNode', valueKey);\n\n      if (curNode) {\n        formatted = _extends({}, node, {\n          check: curNode.check,\n          expand: curNode.expand,\n          uncheckable: curNode.uncheckable,\n          layer: curNode.layer,\n          parentNode: curNode.parentNode,\n          showNode: shouldShowNodeByExpanded(expandItemValues, parentKeys)\n        });\n      }\n\n      return formatted;\n    });\n  };\n\n  _proto.getItemsAndActiveIndex = function getItemsAndActiveIndex() {\n    var items = this.getFocusableMenuItems();\n    var activeIndex = -1;\n    items.forEach(function (item, index) {\n      if (document.activeElement !== null) {\n        if (item.refKey === document.activeElement.getAttribute('data-key')) {\n          activeIndex = index;\n        }\n      }\n    });\n    return {\n      items: items,\n      activeIndex: activeIndex\n    };\n  };\n\n  _proto.getActiveItem = function getActiveItem() {\n    var filterData = this.state.filterData;\n    var activeItem = document.activeElement;\n\n    if (activeItem !== null) {\n      var _activeItem$dataset, _activeItem$dataset2, _this$nodes$nodeData$, _this$nodes$nodeData$2;\n\n      var key = activeItem === null || activeItem === void 0 ? void 0 : (_activeItem$dataset = activeItem.dataset) === null || _activeItem$dataset === void 0 ? void 0 : _activeItem$dataset.key;\n      var layer = activeItem === null || activeItem === void 0 ? void 0 : (_activeItem$dataset2 = activeItem.dataset) === null || _activeItem$dataset2 === void 0 ? void 0 : _activeItem$dataset2.layer;\n      var nodeData = this.getActiveElementOption(filterData, key);\n      nodeData.check = !((_this$nodes$nodeData$ = this.nodes[nodeData.refKey]) === null || _this$nodes$nodeData$ === void 0 ? void 0 : _this$nodes$nodeData$.check);\n      nodeData.parentNode = (_this$nodes$nodeData$2 = this.nodes[nodeData.refKey]) === null || _this$nodes$nodeData$2 === void 0 ? void 0 : _this$nodes$nodeData$2.parentNode;\n      return {\n        nodeData: nodeData,\n        layer: layer\n      };\n    }\n\n    return {};\n  }\n  /**\n   * 获取已选择的items，用于显示在placeholder\n   */\n  ;\n\n  _proto.getSelectedItems = function getSelectedItems(selectedValues) {\n    var _this5 = this;\n\n    var valueKey = this.props.valueKey;\n    var checkItems = [];\n    Object.keys(this.nodes).map(function (refKey) {\n      var node = _this5.nodes[refKey];\n\n      if (selectedValues.some(function (value) {\n        return shallowEqual(node[valueKey], value);\n      })) {\n        checkItems.push(node);\n      }\n    });\n    return checkItems;\n  }\n  /**\n   * 判断传入的 value 是否存在于data 中\n   * @param {*} values\n   */\n  ;\n\n  _proto.hasValue = function hasValue(values) {\n    var _this6 = this;\n\n    if (values === void 0) {\n      values = this.state.selectedValues;\n    }\n\n    var valueKey = this.props.valueKey;\n    var selectedValues = Object.keys(this.nodes).map(function (refKey) {\n      return _this6.nodes[refKey][valueKey];\n    }).filter(function (item) {\n      return values.some(function (v) {\n        return shallowEqual(v, item);\n      });\n    });\n    return !!selectedValues.length;\n  }\n  /**\n   * 拍平数组，将tree 转换为一维对象\n   * @param {*} nodes tree data\n   * @param {*} ref 当前层级\n   */\n  ;\n\n  _proto.flattenNodes = function flattenNodes(nodes, props, ref, parentNode, layer) {\n    var _this7 = this;\n\n    if (ref === void 0) {\n      ref = '0';\n    }\n\n    if (layer === void 0) {\n      layer = 0;\n    }\n\n    var _ref2 = props || this.props,\n        labelKey = _ref2.labelKey,\n        valueKey = _ref2.valueKey,\n        childrenKey = _ref2.childrenKey;\n\n    if (!Array.isArray(nodes) || nodes.length === 0) {\n      return;\n    }\n\n    nodes.forEach(function (node, index) {\n      var _this7$nodes$refKey;\n\n      var refKey = ref + \"-\" + index;\n      node.refKey = refKey;\n      _this7.nodes[refKey] = (_this7$nodes$refKey = {\n        layer: layer\n      }, _this7$nodes$refKey[labelKey] = node[labelKey], _this7$nodes$refKey[valueKey] = node[valueKey], _this7$nodes$refKey.expand = getExpandState(node, props || _this7.props), _this7$nodes$refKey.uncheckable = getUncheckableState(node, props || _this7.props), _this7$nodes$refKey.refKey = refKey, _this7$nodes$refKey);\n\n      if (parentNode) {\n        _this7.nodes[refKey].parentNode = parentNode;\n      }\n\n      _this7.flattenNodes(node[childrenKey], props, refKey, _this7.nodes[refKey], layer + 1);\n    });\n  }\n  /**\n   * 过滤选中的 values 中不包含 uncheckableItemValues 的那些值\n   * @param {*} values\n   */\n  ;\n\n  _proto.filterSelectedValues = function filterSelectedValues(values) {\n    var _this$props$uncheckab = this.props.uncheckableItemValues,\n        uncheckableItemValues = _this$props$uncheckab === void 0 ? [] : _this$props$uncheckab;\n    return values.filter(function (value) {\n      return !uncheckableItemValues.includes(value);\n    });\n  };\n\n  _proto.serializeList = function serializeList(key, nodes) {\n    if (nodes === void 0) {\n      nodes = this.nodes;\n    }\n\n    var valueKey = this.props.valueKey;\n    var list = [];\n    Object.keys(nodes).forEach(function (refKey) {\n      if (nodes[refKey][key]) {\n        list.push(nodes[refKey][valueKey]);\n      }\n    });\n    return list;\n  };\n\n  _proto.serializeListOnlyParent = function serializeListOnlyParent(key, nodes) {\n    if (nodes === void 0) {\n      nodes = this.nodes;\n    }\n\n    var valueKey = this.props.valueKey;\n    var list = [];\n    Object.keys(nodes).forEach(function (refKey) {\n      var currentNode = nodes[refKey];\n\n      if (currentNode.parentNode) {\n        var _currentNode$parentNo;\n\n        var parentNode = nodes[(_currentNode$parentNo = currentNode.parentNode) === null || _currentNode$parentNo === void 0 ? void 0 : _currentNode$parentNo.refKey];\n\n        if (currentNode[key]) {\n          if (!(parentNode === null || parentNode === void 0 ? void 0 : parentNode.checkAll)) {\n            list.push(nodes[refKey][valueKey]);\n          } else if (parentNode === null || parentNode === void 0 ? void 0 : parentNode.uncheckable) {\n            list.push(nodes[refKey][valueKey]);\n          }\n        }\n      } else {\n        if (currentNode[key]) {\n          list.push(nodes[refKey][valueKey]);\n        }\n      }\n    });\n    return list;\n  };\n\n  _proto.unserializeLists = function unserializeLists(lists, nextProps) {\n    var _this8 = this;\n\n    if (nextProps === void 0) {\n      nextProps = this.props;\n    }\n\n    var _nextProps = nextProps,\n        valueKey = _nextProps.valueKey,\n        cascade = _nextProps.cascade,\n        _nextProps$uncheckabl = _nextProps.uncheckableItemValues,\n        uncheckableItemValues = _nextProps$uncheckabl === void 0 ? [] : _nextProps$uncheckabl;\n    var expandAll = getExpandAll(nextProps); // Reset values to false\n\n    Object.keys(this.nodes).forEach(function (refKey) {\n      Object.keys(lists).forEach(function (listKey) {\n        if (listKey === 'check') {\n          var node = _this8.nodes[refKey];\n\n          if (cascade && 'parentNode' in node) {\n            node[listKey] = node.parentNode[listKey];\n          } else {\n            node[listKey] = false;\n          }\n\n          lists[listKey].forEach(function (value) {\n            if (shallowEqual(_this8.nodes[refKey][valueKey], value) && !uncheckableItemValues.some(function (uncheckableValue) {\n              return shallowEqual(value, uncheckableValue);\n            })) {\n              _this8.nodes[refKey][listKey] = true;\n            }\n          });\n        }\n\n        if (listKey === 'expand') {\n          _this8.nodes[refKey][listKey] = false;\n\n          if (lists[listKey].length) {\n            lists[listKey].forEach(function (value) {\n              if (shallowEqual(_this8.nodes[refKey][valueKey], value)) {\n                _this8.nodes[refKey][listKey] = true;\n              }\n            });\n          } else {\n            _this8.nodes[refKey][listKey] = expandAll;\n          }\n        }\n      });\n    });\n  };\n\n  _proto.toggleChecked = function toggleChecked(node, isChecked) {\n    var nodes = clone(this.nodes);\n    this.toggleDownChecked(nodes, node, isChecked);\n    node.parentNode && this.toggleUpChecked(nodes, node.parentNode, isChecked);\n    var values = this.serializeListOnlyParent('check', nodes);\n    return this.filterSelectedValues(values);\n  };\n\n  _proto.toggleUpChecked = function toggleUpChecked(nodes, node, checked) {\n    var cascade = this.props.cascade;\n    var currentNode = nodes[node.refKey];\n\n    if (cascade) {\n      if (!checked) {\n        currentNode.check = checked;\n        currentNode.checkAll = checked;\n      } else {\n        if (this.everyChildChecked(nodes, node)) {\n          currentNode.check = true;\n          currentNode.checkAll = true;\n        } else {\n          currentNode.check = false;\n          currentNode.checkAll = false;\n        }\n      }\n\n      if (node.parentNode) {\n        this.toggleUpChecked(nodes, node.parentNode, checked);\n      }\n    }\n  };\n\n  _proto.toggleDownChecked = function toggleDownChecked(nodes, node, isChecked) {\n    var _this9 = this;\n\n    var _this$props9 = this.props,\n        childrenKey = _this$props9.childrenKey,\n        cascade = _this$props9.cascade;\n    nodes[node.refKey].check = isChecked;\n\n    if (!node[childrenKey] || !node[childrenKey].length || !cascade) {\n      nodes[node.refKey].checkAll = false;\n    } else {\n      nodes[node.refKey].checkAll = isChecked;\n      node[childrenKey].forEach(function (child) {\n        _this9.toggleDownChecked(nodes, child, isChecked);\n      });\n    }\n  };\n\n  _proto.toggleNode = function toggleNode(key, node, toggleValue) {\n    // 如果该节点处于 disabledCheckbox，则忽略该值\n    if (!node.uncheckable) {\n      this.nodes[node.refKey][key] = toggleValue;\n    }\n  };\n\n  _proto.toggleExpand = function toggleExpand(node, isExpand) {\n    var valueKey = this.props.valueKey;\n    var expandItemValues = new Set(this.serializeList('expand'));\n\n    if (isExpand) {\n      expandItemValues.add(node[valueKey]);\n    } else {\n      expandItemValues.delete(node[valueKey]);\n    }\n\n    return Array.from(expandItemValues);\n  };\n\n  _proto.renderDropdownMenu = function renderDropdownMenu() {\n    var _this$props10 = this.props,\n        _this$props10$height = _this$props10.height,\n        height = _this$props10$height === void 0 ? defaultHeight : _this$props10$height,\n        locale = _this$props10.locale,\n        menuStyle = _this$props10.menuStyle,\n        searchable = _this$props10.searchable,\n        renderMenu = _this$props10.renderMenu,\n        virtualized = _this$props10.virtualized,\n        searchKeyword = _this$props10.searchKeyword,\n        renderExtraFooter = _this$props10.renderExtraFooter,\n        menuClassName = _this$props10.menuClassName,\n        menuAutoWidth = _this$props10.menuAutoWidth;\n    var keyword = !_isUndefined(searchKeyword) ? searchKeyword : this.state.searchKeyword;\n    var classes = classNames(menuClassName, this.addPrefix('check-tree-menu'));\n    var menu = this.renderCheckTree();\n    var styles = virtualized ? _extends({\n      height: height\n    }, menuStyle) : menuStyle;\n    return React.createElement(MenuWrapper, {\n      autoWidth: menuAutoWidth,\n      className: classes,\n      style: styles,\n      ref: this.menuRef,\n      getToggleInstance: this.getToggleInstance,\n      getPositionInstance: this.getPositionInstance\n    }, searchable ? React.createElement(SearchBar, {\n      placeholder: locale.searchPlaceholder,\n      key: \"searchBar\",\n      onChange: this.handleSearch,\n      value: keyword\n    }) : null, renderMenu ? renderMenu(menu) : menu, renderExtraFooter === null || renderExtraFooter === void 0 ? void 0 : renderExtraFooter());\n  };\n\n  _proto.renderNode = function renderNode(node, layer) {\n    var _this10 = this;\n\n    var _this$state5 = this.state,\n        activeNode = _this$state5.activeNode,\n        searchKeyword = _this$state5.searchKeyword;\n    var _this$props11 = this.props,\n        valueKey = _this$props11.valueKey,\n        labelKey = _this$props11.labelKey,\n        childrenKey = _this$props11.childrenKey,\n        renderTreeNode = _this$props11.renderTreeNode,\n        renderTreeIcon = _this$props11.renderTreeIcon,\n        cascade = _this$props11.cascade,\n        locale = _this$props11.locale;\n    var visible = node.visible,\n        refKey = node.refKey; // 当处于搜索时，需要将所有节点都展开\n\n    var expand = getExpandWhenSearching(searchKeyword, node.expand);\n\n    if (!visible) {\n      return null;\n    }\n\n    var key = _isString(node[valueKey]) || _isNumber(node[valueKey]) ? node[valueKey] : refKey;\n    var children = node[childrenKey]; // 当用户进行搜索时，hasChildren的判断要变成判断是否存在 visible 为 true 的子节点\n\n    var visibleChildren = _isUndefined(searchKeyword) || searchKeyword.length === 0 ? !!children : hasVisibleChildren(node, childrenKey);\n    var props = {\n      value: node[valueKey],\n      label: node[labelKey],\n      layer: layer,\n      expand: expand,\n      rtl: locale.rtl,\n      focus: activeNode ? shallowEqual(activeNode[valueKey], node[valueKey]) : false,\n      visible: node.visible,\n      disabled: getDisabledState(this.nodes, node, this.props),\n      nodeData: node,\n      checkState: this.getNodeCheckState(node, cascade),\n      hasChildren: visibleChildren,\n      uncheckable: node.uncheckable,\n      allUncheckable: getSiblingNodeUncheckable(node, this.nodes),\n      onSelect: this.handleSelect,\n      onTreeToggle: this.handleToggle,\n      onRenderTreeNode: renderTreeNode,\n      onRenderTreeIcon: renderTreeIcon\n    };\n\n    if (props.hasChildren) {\n      var _classNames;\n\n      layer += 1; // 是否展开树节点且子节点不为空\n\n      var openClass = this.addTreePrefix('open');\n      var childrenClass = classNames(this.addTreePrefix('node-children'), (_classNames = {}, _classNames[openClass] = expand && visibleChildren, _classNames));\n      var nodes = children || [];\n      return React.createElement(\"div\", {\n        className: childrenClass,\n        key: key,\n        ref: this.bindNodeRefs.bind(this, refKey)\n      }, React.createElement(CheckTreeNode, props), React.createElement(\"div\", {\n        className: this.addTreePrefix('children')\n      }, nodes.map(function (child) {\n        return _this10.renderNode(child, layer);\n      })));\n    }\n\n    return React.createElement(CheckTreeNode, _extends({\n      key: key,\n      innerRef: this.bindNodeRefs.bind(this, refKey)\n    }, props));\n  };\n\n  _proto.renderVirtualNode = function renderVirtualNode(node, options) {\n    var _this$state6 = this.state,\n        activeNode = _this$state6.activeNode,\n        expandAll = _this$state6.expandAll,\n        searchKeyword = _this$state6.searchKeyword;\n    var _this$props12 = this.props,\n        valueKey = _this$props12.valueKey,\n        labelKey = _this$props12.labelKey,\n        childrenKey = _this$props12.childrenKey,\n        renderTreeNode = _this$props12.renderTreeNode,\n        renderTreeIcon = _this$props12.renderTreeIcon,\n        cascade = _this$props12.cascade,\n        locale = _this$props12.locale;\n    var key = options.key,\n        style = options.style;\n    var layer = node.layer,\n        refKey = node.refKey,\n        showNode = node.showNode;\n    var expand = getExpandWhenSearching(searchKeyword, node.expand);\n    var children = node[childrenKey];\n    var props = {\n      value: node[valueKey],\n      label: node[labelKey],\n      layer: layer,\n      expand: expand,\n      rtl: locale.rtl,\n      focus: activeNode ? shallowEqual(activeNode[valueKey], node[valueKey]) : false,\n      visible: node.visible,\n      disabled: getDisabledState(this.nodes, node, this.props),\n      nodeData: node,\n      children: children,\n      expandAll: expandAll,\n      checkState: this.getNodeCheckState(node, cascade),\n      parentNode: node.parentNode,\n      hasChildren: !!children,\n      uncheckable: node.uncheckable,\n      allUncheckable: getSiblingNodeUncheckable(node, this.nodes),\n      onSelect: this.handleSelect,\n      onTreeToggle: this.handleToggle,\n      onRenderTreeNode: renderTreeNode,\n      onRenderTreeIcon: renderTreeIcon\n    };\n    return showNode && React.createElement(CheckTreeNode, _extends({\n      style: style,\n      key: key,\n      innerRef: this.bindNodeRefs.bind(this, refKey)\n    }, props));\n  };\n\n  _proto.renderCheckTree = function renderCheckTree() {\n    var _classNames2,\n        _this11 = this,\n        _classNames3;\n\n    var _this$state7 = this.state,\n        filterData = _this$state7.filterData,\n        isSomeNodeHasChildren = _this$state7.isSomeNodeHasChildren;\n    var _this$props13 = this.props,\n        inline = _this$props13.inline,\n        style = _this$props13.style,\n        height = _this$props13.height,\n        className = _this$props13.className,\n        onScroll = _this$props13.onScroll,\n        locale = _this$props13.locale,\n        virtualized = _this$props13.virtualized,\n        searchable = _this$props13.searchable; // 树节点的层级\n\n    var layer = 0;\n    var classes = classNames(defaultClassPrefix('check-tree'), (_classNames2 = {}, _classNames2[className] = inline, _classNames2['without-children'] = !isSomeNodeHasChildren, _classNames2));\n    var formattedNodes = [];\n\n    if (!virtualized) {\n      formattedNodes = getFormattedTree(filterData, this.nodes, this.props).map(function (node) {\n        return _this11.renderNode(node, layer);\n      });\n\n      if (!formattedNodes.some(function (v) {\n        return v !== null;\n      })) {\n        return React.createElement(\"div\", {\n          className: this.addPrefix('none')\n        }, locale.noResultsText);\n      }\n    } else {\n      formattedNodes = this.getFlattenTreeData(filterData).filter(function (n) {\n        return n.showNode && n.visible;\n      });\n\n      if (!formattedNodes.length) {\n        return React.createElement(\"div\", {\n          className: this.addPrefix('none')\n        }, locale.noResultsText);\n      }\n    } // 当未定义 height 且 设置了 virtualized 为 true，treeHeight 设置默认高度\n\n\n    var treeHeight = _isUndefined(height) && virtualized ? defaultHeight : height;\n    var treeWidth = _isUndefined(style === null || style === void 0 ? void 0 : style.width) ? defaultWidth : style.width;\n    var styles = inline ? _extends({\n      height: treeHeight\n    }, style) : {};\n    var treeNodesClass = classNames(this.addTreePrefix('nodes'), (_classNames3 = {}, _classNames3[this.addTreePrefix('all-uncheckable')] = getEveryFisrtLevelNodeUncheckable(this.nodes), _classNames3));\n    var listHeight = getVirtualLisHeight(inline, searchable, treeHeight);\n    return React.createElement(\"div\", {\n      ref: this.treeViewRef,\n      className: classes,\n      style: styles,\n      onScroll: onScroll,\n      onKeyDown: this.handleKeyDown\n    }, React.createElement(\"div\", {\n      className: treeNodesClass\n    }, virtualized ? React.createElement(AutoSizer, {\n      defaultHeight: listHeight,\n      defaultWidth: treeWidth\n    }, function (_ref3) {\n      var height = _ref3.height,\n          width = _ref3.width;\n      return React.createElement(List, {\n        ref: _this11.listRef,\n        width: width || treeWidth,\n        height: height || listHeight,\n        rowHeight: 36,\n        rowCount: formattedNodes.length,\n        rowRenderer: _this11.measureRowRenderer(formattedNodes)\n      });\n    }) : formattedNodes));\n  };\n\n  _proto.render = function render() {\n    var _this$props14 = this.props,\n        cascade = _this$props14.cascade,\n        style = _this$props14.style,\n        locale = _this$props14.locale,\n        inline = _this$props14.inline,\n        disabled = _this$props14.disabled,\n        valueKey = _this$props14.valueKey,\n        labelKey = _this$props14.labelKey,\n        cleanable = _this$props14.cleanable,\n        countable = _this$props14.countable,\n        placeholder = _this$props14.placeholder,\n        toggleComponentClass = _this$props14.toggleComponentClass,\n        onExited = _this$props14.onExited,\n        onEntered = _this$props14.onEntered,\n        onClean = _this$props14.onClean,\n        renderValue = _this$props14.renderValue,\n        positionRef = _this$props14.positionRef,\n        rest = _objectWithoutPropertiesLoose(_this$props14, [\"cascade\", \"style\", \"locale\", \"inline\", \"disabled\", \"valueKey\", \"labelKey\", \"cleanable\", \"countable\", \"placeholder\", \"toggleComponentClass\", \"onExited\", \"onEntered\", \"onClean\", \"renderValue\", \"positionRef\"]);\n\n    var _this$state8 = this.state,\n        hasValue = _this$state8.hasValue,\n        selectedValues = _this$state8.selectedValues;\n\n    var hasValidValue = hasValue || selectedValues.length > 0 && _isFunction(renderValue);\n\n    var selectedItems = this.getSelectedItems(selectedValues);\n    var selectedElement = placeholder;\n    /**\n     * if value is invalid and renderValue is undefined, then using placeholder.\n     * if value is valid and renderValue is't undefined, then using renderValue()\n     */\n\n    if (selectedValues.length) {\n      if (hasValue) {\n        selectedElement = React.createElement(SelectedElement, {\n          selectedItems: selectedItems,\n          countable: countable,\n          valueKey: valueKey,\n          labelKey: labelKey,\n          prefix: this.addPrefix,\n          cascade: cascade,\n          locale: locale\n        });\n      }\n\n      if (_isFunction(renderValue)) {\n        selectedElement = renderValue(selectedValues, selectedItems, selectedElement);\n\n        if (_isNil(selectedElement)) {\n          hasValidValue = false;\n        }\n      }\n    }\n\n    var unhandled = getUnhandledProps(CheckTreePicker, rest);\n    var classes = getToggleWrapperClassName('check-tree', this.addPrefix, this.props, hasValidValue);\n\n    if (inline) {\n      return this.renderCheckTree();\n    }\n\n    return React.createElement(PickerToggleTrigger, {\n      pickerProps: this.props,\n      ref: this.triggerRef,\n      positionRef: mergeRefs(this.positionRef, positionRef),\n      onEntered: createChainedFunction(this.handleOnOpen, onEntered),\n      onExited: createChainedFunction(this.handleOnClose, onExited),\n      speaker: this.renderDropdownMenu()\n    }, React.createElement(\"div\", {\n      className: classes,\n      style: style\n    }, React.createElement(PickerToggle, _extends({}, unhandled, {\n      ref: this.toggleRef,\n      onKeyDown: this.handleToggleKeyDown,\n      onClean: createChainedFunction(this.handleClean, onClean),\n      componentClass: toggleComponentClass,\n      cleanable: cleanable && !disabled,\n      hasValue: hasValidValue,\n      active: this.state.active,\n      \"aria-disabled\": disabled\n    }), selectedElement || locale.placeholder)));\n  };\n\n  return CheckTreePicker;\n}(React.Component);\n\nCheckTreePicker.propTypes = _extends({}, listPickerPropTypes, {\n  height: PropTypes.number,\n  inline: PropTypes.bool,\n  cascade: PropTypes.bool,\n  countable: PropTypes.bool,\n  expandAll: PropTypes.bool,\n  searchable: PropTypes.bool,\n  virtualized: PropTypes.bool,\n  searchKeyword: PropTypes.string,\n  menuAutoWidth: PropTypes.bool,\n  defaultExpandAll: PropTypes.bool,\n  containerPadding: PropTypes.number,\n  disabledItemValues: PropTypes.array,\n  expandItemValues: PropTypes.array,\n  defaultExpandItemValues: PropTypes.array,\n  uncheckableItemValues: PropTypes.array,\n  onSearch: PropTypes.func,\n  onExpand: PropTypes.func,\n  onSelect: PropTypes.func,\n  onScroll: PropTypes.func,\n  renderMenu: PropTypes.func,\n  renderTreeNode: PropTypes.func,\n  renderTreeIcon: PropTypes.func,\n  searchBy: PropTypes.func\n});\nCheckTreePicker.defaultProps = _extends({}, listPickerDefaultProps, {\n  cascade: true,\n  countable: true,\n  searchable: true,\n  menuAutoWidth: true,\n  defaultValue: [],\n  uncheckableItemValues: [],\n  locale: {\n    placeholder: 'Select',\n    searchPlaceholder: 'Search',\n    noResultsText: 'No results found',\n    checkAll: 'All'\n  }\n});\npolyfill(CheckTreePicker);\nexport default defaultProps({\n  classPrefix: 'picker'\n})(CheckTreePicker);"]},"metadata":{},"sourceType":"module"}