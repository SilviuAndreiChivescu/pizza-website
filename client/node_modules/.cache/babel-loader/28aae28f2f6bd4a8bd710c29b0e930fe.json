{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport _get from \"lodash/get\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport FormattedMessage from '../IntlProvider/FormattedMessage';\nimport { previewFile, defaultProps, getUnhandledProps, prefix } from '../utils';\n\nvar getSize = function getSize(size) {\n  if (size === void 0) {\n    size = 0;\n  }\n\n  var K = 1024;\n  var M = 1024 * 1024;\n  var G = 1024 * 1024 * 1024;\n\n  if (size > G) {\n    return (size / G).toFixed(2) + \"GB\";\n  }\n\n  if (size > M) {\n    return (size / M).toFixed(2) + \"MB\";\n  }\n\n  if (size > K) {\n    return (size / K).toFixed(2) + \"KB\";\n  }\n\n  return size + \"B\";\n};\n\nvar UploadFileItem = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(UploadFileItem, _React$Component);\n\n  function UploadFileItem(props) {\n    var _this;\n\n    _this = _React$Component.call(this, props) || this;\n\n    _this.handleRemove = function (event) {\n      var _this$props = _this.props,\n          disabled = _this$props.disabled,\n          onCancel = _this$props.onCancel,\n          file = _this$props.file;\n\n      if (disabled) {\n        return;\n      }\n\n      onCancel === null || onCancel === void 0 ? void 0 : onCancel(file.fileKey, event);\n    };\n\n    _this.handlePreview = function (event) {\n      var _this$props2 = _this.props,\n          disabled = _this$props2.disabled,\n          onPreview = _this$props2.onPreview,\n          file = _this$props2.file;\n\n      if (disabled) {\n        return;\n      }\n\n      onPreview === null || onPreview === void 0 ? void 0 : onPreview(file, event);\n    };\n\n    _this.handleReupload = function (event) {\n      var _this$props3 = _this.props,\n          disabled = _this$props3.disabled,\n          onReupload = _this$props3.onReupload,\n          file = _this$props3.file;\n\n      if (disabled) {\n        return;\n      }\n\n      onReupload === null || onReupload === void 0 ? void 0 : onReupload(file, event);\n    };\n\n    _this.addPrefix = function (name) {\n      return prefix(_this.props.classPrefix)(name);\n    };\n\n    var _file = props.file;\n    _this.state = {\n      previewImage: _file.url ? _file.url : null\n    };\n\n    if (!_file.url) {\n      _this.getThumbnail(function (previewImage) {\n        _this.setState({\n          previewImage: previewImage\n        });\n      });\n    }\n\n    return _this;\n  }\n\n  var _proto = UploadFileItem.prototype;\n\n  _proto.getThumbnail = function getThumbnail(callback) {\n    var _this$props4 = this.props,\n        file = _this$props4.file,\n        listType = _this$props4.listType,\n        maxPreviewFileSize = _this$props4.maxPreviewFileSize;\n\n    if (!~['picture-text', 'picture'].indexOf(listType)) {\n      return;\n    }\n\n    if (!file.blobFile || _get(file, 'blobFile.size') > maxPreviewFileSize) {\n      return;\n    }\n\n    previewFile(file.blobFile, callback);\n  };\n\n  _proto.renderProgressBar = function renderProgressBar() {\n    var _this$props5 = this.props,\n        disabled = _this$props5.disabled,\n        file = _this$props5.file;\n    var _file$progress = file.progress,\n        progress = _file$progress === void 0 ? 0 : _file$progress,\n        status = file.status;\n    var show = !disabled && status === 'uploading';\n    var visibility = show ? 'visible' : 'hidden';\n    var wrapStyle = {\n      visibility: visibility\n    };\n    var progressbarStyle = {\n      width: progress + \"%\"\n    };\n    return React.createElement(\"div\", {\n      className: this.addPrefix('progress'),\n      style: wrapStyle\n    }, React.createElement(\"div\", {\n      className: this.addPrefix('progress-bar'),\n      style: progressbarStyle\n    }));\n  };\n\n  _proto.renderPreview = function renderPreview() {\n    var previewImage = this.state.previewImage;\n    var file = this.props.file;\n\n    if (previewImage) {\n      return React.createElement(\"div\", {\n        className: this.addPrefix('preview')\n      }, React.createElement(\"img\", {\n        role: \"presentation\",\n        src: previewImage,\n        alt: file.name,\n        onClick: this.handlePreview\n      }));\n    }\n\n    return null;\n  };\n\n  _proto.renderLoading = function renderLoading() {\n    var _classNames;\n\n    var file = this.props.file;\n    var uploading = file.status === 'uploading';\n    var classes = classNames(this.addPrefix('icon-wrapper'), (_classNames = {}, _classNames[this.addPrefix('icon-loading')] = uploading, _classNames));\n    return React.createElement(\"div\", {\n      className: classes\n    }, React.createElement(\"i\", {\n      className: this.addPrefix('icon')\n    }));\n  };\n\n  _proto.renderRemoveButton = function renderRemoveButton() {\n    var removable = this.props.removable;\n\n    if (!removable) {\n      return null;\n    }\n\n    return React.createElement(\"a\", {\n      \"aria-label\": \"Remove\",\n      className: this.addPrefix('btn-remove'),\n      onClick: this.handleRemove,\n      role: \"button\",\n      tabIndex: -1\n    }, React.createElement(\"span\", {\n      \"aria-hidden\": \"true\"\n    }, \"\\xD7\"));\n  };\n\n  _proto.renderErrorStatus = function renderErrorStatus() {\n    var file = this.props.file;\n\n    if (file.status === 'error') {\n      return React.createElement(\"div\", {\n        className: this.addPrefix('status')\n      }, React.createElement(FormattedMessage, {\n        id: \"error\"\n      }), React.createElement(\"a\", {\n        role: \"button\",\n        tabIndex: -1,\n        onClick: this.handleReupload\n      }, React.createElement(\"i\", {\n        className: this.addPrefix('icon-reupload')\n      })));\n    }\n\n    return null;\n  };\n\n  _proto.renderFileSize = function renderFileSize() {\n    var file = this.props.file;\n\n    if (file.status !== 'error' && file.blobFile) {\n      return React.createElement(\"span\", {\n        className: this.addPrefix('size')\n      }, getSize(_get(file, 'blobFile.size')));\n    }\n\n    return null;\n  };\n\n  _proto.renderFilePanel = function renderFilePanel() {\n    var _this$props6 = this.props,\n        file = _this$props6.file,\n        renderFileInfo = _this$props6.renderFileInfo;\n    var fileElement = React.createElement(\"a\", {\n      role: \"presentation\",\n      className: this.addPrefix('title'),\n      onClick: this.handlePreview\n    }, file.name);\n    return React.createElement(\"div\", {\n      className: this.addPrefix('panel')\n    }, React.createElement(\"div\", {\n      className: this.addPrefix('content')\n    }, renderFileInfo ? renderFileInfo(file, fileElement) : fileElement, this.renderErrorStatus(), this.renderFileSize()));\n  };\n\n  _proto.render = function render() {\n    var _classNames2;\n\n    var _this$props7 = this.props,\n        disabled = _this$props7.disabled,\n        file = _this$props7.file,\n        classPrefix = _this$props7.classPrefix,\n        listType = _this$props7.listType,\n        className = _this$props7.className,\n        rest = _objectWithoutPropertiesLoose(_this$props7, [\"disabled\", \"file\", \"classPrefix\", \"listType\", \"className\"]);\n\n    var classes = classNames(classPrefix, className, this.addPrefix(listType), (_classNames2 = {}, _classNames2[this.addPrefix('has-error')] = file.status === 'error', _classNames2[this.addPrefix('disabled')] = disabled, _classNames2));\n    var unhandled = getUnhandledProps(UploadFileItem, rest);\n\n    if (listType === 'picture') {\n      return React.createElement(\"div\", {\n        className: classes\n      }, this.renderLoading(), this.renderPreview(), this.renderErrorStatus(), this.renderRemoveButton());\n    }\n\n    if (listType === 'picture-text') {\n      return React.createElement(\"div\", {\n        className: classes\n      }, this.renderLoading(), this.renderPreview(), this.renderFilePanel(), this.renderProgressBar(), this.renderRemoveButton());\n    }\n\n    return React.createElement(\"div\", _extends({}, unhandled, {\n      className: classes\n    }), this.renderLoading(), this.renderFilePanel(), this.renderProgressBar(), this.renderRemoveButton());\n  };\n\n  return UploadFileItem;\n}(React.Component);\n\nUploadFileItem.propTypes = {\n  file: PropTypes.object,\n  listType: PropTypes.oneOf(['text', 'picture-text', 'picture']),\n  disabled: PropTypes.bool,\n  className: PropTypes.string,\n  maxPreviewFileSize: PropTypes.number,\n  classPrefix: PropTypes.string,\n  removable: PropTypes.bool,\n  renderFileInfo: PropTypes.func,\n  onCancel: PropTypes.func,\n  onPreview: PropTypes.func,\n  onReupload: PropTypes.func\n};\nUploadFileItem.defaultProps = {\n  maxPreviewFileSize: 1024 * 1024 * 5,\n  // 5MB\n  listType: 'text',\n  removable: true\n};\nexport default defaultProps({\n  classPrefix: 'uploader-file-item'\n})(UploadFileItem);","map":{"version":3,"sources":["E:/OneDrive - University of Salford/Desktop/pizza-website/node_modules/rsuite/es/Uploader/UploadFileItem.js"],"names":["_extends","_objectWithoutPropertiesLoose","_inheritsLoose","_get","React","PropTypes","classNames","FormattedMessage","previewFile","defaultProps","getUnhandledProps","prefix","getSize","size","K","M","G","toFixed","UploadFileItem","_React$Component","props","_this","call","handleRemove","event","_this$props","disabled","onCancel","file","fileKey","handlePreview","_this$props2","onPreview","handleReupload","_this$props3","onReupload","addPrefix","name","classPrefix","_file","state","previewImage","url","getThumbnail","setState","_proto","prototype","callback","_this$props4","listType","maxPreviewFileSize","indexOf","blobFile","renderProgressBar","_this$props5","_file$progress","progress","status","show","visibility","wrapStyle","progressbarStyle","width","createElement","className","style","renderPreview","role","src","alt","onClick","renderLoading","_classNames","uploading","classes","renderRemoveButton","removable","tabIndex","renderErrorStatus","id","renderFileSize","renderFilePanel","_this$props6","renderFileInfo","fileElement","render","_classNames2","_this$props7","rest","unhandled","Component","propTypes","object","oneOf","bool","string","number","func"],"mappings":"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","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport _get from \"lodash/get\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport FormattedMessage from '../IntlProvider/FormattedMessage';\nimport { previewFile, defaultProps, getUnhandledProps, prefix } from '../utils';\n\nvar getSize = function getSize(size) {\n  if (size === void 0) {\n    size = 0;\n  }\n\n  var K = 1024;\n  var M = 1024 * 1024;\n  var G = 1024 * 1024 * 1024;\n\n  if (size > G) {\n    return (size / G).toFixed(2) + \"GB\";\n  }\n\n  if (size > M) {\n    return (size / M).toFixed(2) + \"MB\";\n  }\n\n  if (size > K) {\n    return (size / K).toFixed(2) + \"KB\";\n  }\n\n  return size + \"B\";\n};\n\nvar UploadFileItem =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inheritsLoose(UploadFileItem, _React$Component);\n\n  function UploadFileItem(props) {\n    var _this;\n\n    _this = _React$Component.call(this, props) || this;\n\n    _this.handleRemove = function (event) {\n      var _this$props = _this.props,\n          disabled = _this$props.disabled,\n          onCancel = _this$props.onCancel,\n          file = _this$props.file;\n\n      if (disabled) {\n        return;\n      }\n\n      onCancel === null || onCancel === void 0 ? void 0 : onCancel(file.fileKey, event);\n    };\n\n    _this.handlePreview = function (event) {\n      var _this$props2 = _this.props,\n          disabled = _this$props2.disabled,\n          onPreview = _this$props2.onPreview,\n          file = _this$props2.file;\n\n      if (disabled) {\n        return;\n      }\n\n      onPreview === null || onPreview === void 0 ? void 0 : onPreview(file, event);\n    };\n\n    _this.handleReupload = function (event) {\n      var _this$props3 = _this.props,\n          disabled = _this$props3.disabled,\n          onReupload = _this$props3.onReupload,\n          file = _this$props3.file;\n\n      if (disabled) {\n        return;\n      }\n\n      onReupload === null || onReupload === void 0 ? void 0 : onReupload(file, event);\n    };\n\n    _this.addPrefix = function (name) {\n      return prefix(_this.props.classPrefix)(name);\n    };\n\n    var _file = props.file;\n    _this.state = {\n      previewImage: _file.url ? _file.url : null\n    };\n\n    if (!_file.url) {\n      _this.getThumbnail(function (previewImage) {\n        _this.setState({\n          previewImage: previewImage\n        });\n      });\n    }\n\n    return _this;\n  }\n\n  var _proto = UploadFileItem.prototype;\n\n  _proto.getThumbnail = function getThumbnail(callback) {\n    var _this$props4 = this.props,\n        file = _this$props4.file,\n        listType = _this$props4.listType,\n        maxPreviewFileSize = _this$props4.maxPreviewFileSize;\n\n    if (!~['picture-text', 'picture'].indexOf(listType)) {\n      return;\n    }\n\n    if (!file.blobFile || _get(file, 'blobFile.size') > maxPreviewFileSize) {\n      return;\n    }\n\n    previewFile(file.blobFile, callback);\n  };\n\n  _proto.renderProgressBar = function renderProgressBar() {\n    var _this$props5 = this.props,\n        disabled = _this$props5.disabled,\n        file = _this$props5.file;\n    var _file$progress = file.progress,\n        progress = _file$progress === void 0 ? 0 : _file$progress,\n        status = file.status;\n    var show = !disabled && status === 'uploading';\n    var visibility = show ? 'visible' : 'hidden';\n    var wrapStyle = {\n      visibility: visibility\n    };\n    var progressbarStyle = {\n      width: progress + \"%\"\n    };\n    return React.createElement(\"div\", {\n      className: this.addPrefix('progress'),\n      style: wrapStyle\n    }, React.createElement(\"div\", {\n      className: this.addPrefix('progress-bar'),\n      style: progressbarStyle\n    }));\n  };\n\n  _proto.renderPreview = function renderPreview() {\n    var previewImage = this.state.previewImage;\n    var file = this.props.file;\n\n    if (previewImage) {\n      return React.createElement(\"div\", {\n        className: this.addPrefix('preview')\n      }, React.createElement(\"img\", {\n        role: \"presentation\",\n        src: previewImage,\n        alt: file.name,\n        onClick: this.handlePreview\n      }));\n    }\n\n    return null;\n  };\n\n  _proto.renderLoading = function renderLoading() {\n    var _classNames;\n\n    var file = this.props.file;\n    var uploading = file.status === 'uploading';\n    var classes = classNames(this.addPrefix('icon-wrapper'), (_classNames = {}, _classNames[this.addPrefix('icon-loading')] = uploading, _classNames));\n    return React.createElement(\"div\", {\n      className: classes\n    }, React.createElement(\"i\", {\n      className: this.addPrefix('icon')\n    }));\n  };\n\n  _proto.renderRemoveButton = function renderRemoveButton() {\n    var removable = this.props.removable;\n\n    if (!removable) {\n      return null;\n    }\n\n    return React.createElement(\"a\", {\n      \"aria-label\": \"Remove\",\n      className: this.addPrefix('btn-remove'),\n      onClick: this.handleRemove,\n      role: \"button\",\n      tabIndex: -1\n    }, React.createElement(\"span\", {\n      \"aria-hidden\": \"true\"\n    }, \"\\xD7\"));\n  };\n\n  _proto.renderErrorStatus = function renderErrorStatus() {\n    var file = this.props.file;\n\n    if (file.status === 'error') {\n      return React.createElement(\"div\", {\n        className: this.addPrefix('status')\n      }, React.createElement(FormattedMessage, {\n        id: \"error\"\n      }), React.createElement(\"a\", {\n        role: \"button\",\n        tabIndex: -1,\n        onClick: this.handleReupload\n      }, React.createElement(\"i\", {\n        className: this.addPrefix('icon-reupload')\n      })));\n    }\n\n    return null;\n  };\n\n  _proto.renderFileSize = function renderFileSize() {\n    var file = this.props.file;\n\n    if (file.status !== 'error' && file.blobFile) {\n      return React.createElement(\"span\", {\n        className: this.addPrefix('size')\n      }, getSize(_get(file, 'blobFile.size')));\n    }\n\n    return null;\n  };\n\n  _proto.renderFilePanel = function renderFilePanel() {\n    var _this$props6 = this.props,\n        file = _this$props6.file,\n        renderFileInfo = _this$props6.renderFileInfo;\n    var fileElement = React.createElement(\"a\", {\n      role: \"presentation\",\n      className: this.addPrefix('title'),\n      onClick: this.handlePreview\n    }, file.name);\n    return React.createElement(\"div\", {\n      className: this.addPrefix('panel')\n    }, React.createElement(\"div\", {\n      className: this.addPrefix('content')\n    }, renderFileInfo ? renderFileInfo(file, fileElement) : fileElement, this.renderErrorStatus(), this.renderFileSize()));\n  };\n\n  _proto.render = function render() {\n    var _classNames2;\n\n    var _this$props7 = this.props,\n        disabled = _this$props7.disabled,\n        file = _this$props7.file,\n        classPrefix = _this$props7.classPrefix,\n        listType = _this$props7.listType,\n        className = _this$props7.className,\n        rest = _objectWithoutPropertiesLoose(_this$props7, [\"disabled\", \"file\", \"classPrefix\", \"listType\", \"className\"]);\n\n    var classes = classNames(classPrefix, className, this.addPrefix(listType), (_classNames2 = {}, _classNames2[this.addPrefix('has-error')] = file.status === 'error', _classNames2[this.addPrefix('disabled')] = disabled, _classNames2));\n    var unhandled = getUnhandledProps(UploadFileItem, rest);\n\n    if (listType === 'picture') {\n      return React.createElement(\"div\", {\n        className: classes\n      }, this.renderLoading(), this.renderPreview(), this.renderErrorStatus(), this.renderRemoveButton());\n    }\n\n    if (listType === 'picture-text') {\n      return React.createElement(\"div\", {\n        className: classes\n      }, this.renderLoading(), this.renderPreview(), this.renderFilePanel(), this.renderProgressBar(), this.renderRemoveButton());\n    }\n\n    return React.createElement(\"div\", _extends({}, unhandled, {\n      className: classes\n    }), this.renderLoading(), this.renderFilePanel(), this.renderProgressBar(), this.renderRemoveButton());\n  };\n\n  return UploadFileItem;\n}(React.Component);\n\nUploadFileItem.propTypes = {\n  file: PropTypes.object,\n  listType: PropTypes.oneOf(['text', 'picture-text', 'picture']),\n  disabled: PropTypes.bool,\n  className: PropTypes.string,\n  maxPreviewFileSize: PropTypes.number,\n  classPrefix: PropTypes.string,\n  removable: PropTypes.bool,\n  renderFileInfo: PropTypes.func,\n  onCancel: PropTypes.func,\n  onPreview: PropTypes.func,\n  onReupload: PropTypes.func\n};\nUploadFileItem.defaultProps = {\n  maxPreviewFileSize: 1024 * 1024 * 5,\n  // 5MB\n  listType: 'text',\n  removable: true\n};\nexport default defaultProps({\n  classPrefix: 'uploader-file-item'\n})(UploadFileItem);"]},"metadata":{},"sourceType":"module"}