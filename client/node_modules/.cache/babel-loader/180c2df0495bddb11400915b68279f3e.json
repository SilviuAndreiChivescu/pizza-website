{"ast":null,"code":"function getResponse(xhr) {\n  var text = xhr.responseText || xhr.response;\n\n  if (!text) {\n    return text;\n  }\n\n  try {\n    return JSON.parse(text);\n  } catch (e) {\n    return text;\n  }\n}\n\nexport default function ajaxUpload(options) {\n  var name = options.name,\n      timeout = options.timeout,\n      _options$headers = options.headers,\n      headers = _options$headers === void 0 ? {} : _options$headers,\n      _options$data = options.data,\n      data = _options$data === void 0 ? {} : _options$data,\n      onError = options.onError,\n      onSuccess = options.onSuccess,\n      onProgress = options.onProgress,\n      file = options.file,\n      url = options.url,\n      withCredentials = options.withCredentials;\n  var xhr = new XMLHttpRequest();\n  var formData = new FormData();\n  formData.append(name, file, file.name);\n  xhr.open('POST', url, true);\n  Object.keys(data).forEach(function (key) {\n    return formData.append(key, data[key]);\n  });\n  Object.keys(headers).forEach(function (key) {\n    if (headers[key] !== null) {\n      xhr.setRequestHeader(key, headers[key]);\n    }\n  });\n\n  if (headers['X-Requested-With'] !== null) {\n    xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n  }\n\n  if (timeout) {\n    xhr.timeout = timeout;\n\n    xhr.ontimeout = function (event) {\n      onError({\n        type: 'timeout'\n      }, event, xhr);\n    };\n  }\n\n  if (withCredentials && 'withCredentials' in xhr) {\n    xhr.withCredentials = true;\n  }\n\n  xhr.onload = function (event) {\n    var resp = getResponse(xhr);\n\n    if (xhr.status < 200 || xhr.status >= 300) {\n      onError({\n        type: 'server_error',\n        response: resp\n      }, event, xhr);\n      return;\n    }\n\n    onSuccess(resp, event, xhr);\n  };\n\n  if (xhr.upload) {\n    xhr.upload.onprogress = function (event) {\n      var percent = 0;\n\n      if (event.lengthComputable) {\n        percent = event.loaded / event.total * 100;\n      }\n\n      onProgress(percent, event, xhr);\n    };\n  }\n\n  xhr.onerror = function (event) {\n    onError({\n      type: 'xhr_error'\n    }, event, xhr);\n  };\n\n  xhr.send(formData);\n  return xhr;\n}","map":{"version":3,"sources":["E:/OneDrive - University of Salford/Desktop/pizza-website/node_modules/rsuite/es/utils/ajaxUpload.js"],"names":["getResponse","xhr","text","responseText","response","JSON","parse","e","ajaxUpload","options","name","timeout","_options$headers","headers","_options$data","data","onError","onSuccess","onProgress","file","url","withCredentials","XMLHttpRequest","formData","FormData","append","open","Object","keys","forEach","key","setRequestHeader","ontimeout","event","type","onload","resp","status","upload","onprogress","percent","lengthComputable","loaded","total","onerror","send"],"mappings":"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","sourcesContent":["function getResponse(xhr) {\n  var text = xhr.responseText || xhr.response;\n\n  if (!text) {\n    return text;\n  }\n\n  try {\n    return JSON.parse(text);\n  } catch (e) {\n    return text;\n  }\n}\n\nexport default function ajaxUpload(options) {\n  var name = options.name,\n      timeout = options.timeout,\n      _options$headers = options.headers,\n      headers = _options$headers === void 0 ? {} : _options$headers,\n      _options$data = options.data,\n      data = _options$data === void 0 ? {} : _options$data,\n      onError = options.onError,\n      onSuccess = options.onSuccess,\n      onProgress = options.onProgress,\n      file = options.file,\n      url = options.url,\n      withCredentials = options.withCredentials;\n  var xhr = new XMLHttpRequest();\n  var formData = new FormData();\n  formData.append(name, file, file.name);\n  xhr.open('POST', url, true);\n  Object.keys(data).forEach(function (key) {\n    return formData.append(key, data[key]);\n  });\n  Object.keys(headers).forEach(function (key) {\n    if (headers[key] !== null) {\n      xhr.setRequestHeader(key, headers[key]);\n    }\n  });\n\n  if (headers['X-Requested-With'] !== null) {\n    xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n  }\n\n  if (timeout) {\n    xhr.timeout = timeout;\n\n    xhr.ontimeout = function (event) {\n      onError({\n        type: 'timeout'\n      }, event, xhr);\n    };\n  }\n\n  if (withCredentials && 'withCredentials' in xhr) {\n    xhr.withCredentials = true;\n  }\n\n  xhr.onload = function (event) {\n    var resp = getResponse(xhr);\n\n    if (xhr.status < 200 || xhr.status >= 300) {\n      onError({\n        type: 'server_error',\n        response: resp\n      }, event, xhr);\n      return;\n    }\n\n    onSuccess(resp, event, xhr);\n  };\n\n  if (xhr.upload) {\n    xhr.upload.onprogress = function (event) {\n      var percent = 0;\n\n      if (event.lengthComputable) {\n        percent = event.loaded / event.total * 100;\n      }\n\n      onProgress(percent, event, xhr);\n    };\n  }\n\n  xhr.onerror = function (event) {\n    onError({\n      type: 'xhr_error'\n    }, event, xhr);\n  };\n\n  xhr.send(formData);\n  return xhr;\n}"]},"metadata":{},"sourceType":"module"}