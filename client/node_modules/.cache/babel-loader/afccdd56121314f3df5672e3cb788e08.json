{"ast":null,"code":"import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport _isNumber from \"lodash/isNumber\";\nimport _isString from \"lodash/isString\";\nimport _isNull from \"lodash/isNull\";\nimport _isUndefined from \"lodash/isUndefined\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport { getPosition, scrollTop } from 'dom-lib';\nimport classNames from 'classnames';\nimport shallowEqual from '../utils/shallowEqual';\nimport { getUnhandledProps, prefix } from '../utils';\nimport _stringToObject from '../utils/stringToObject';\nimport { DropdownMenuItem } from '../Picker';\nexport var dropdownMenuPropTypes = {\n  classPrefix: PropTypes.string,\n  data: PropTypes.array,\n  disabledItemValues: PropTypes.array,\n  activeItemValue: PropTypes.any,\n  childrenKey: PropTypes.string,\n  valueKey: PropTypes.string,\n  labelKey: PropTypes.string,\n  menuWidth: PropTypes.number,\n  menuHeight: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  className: PropTypes.string,\n  renderMenuItem: PropTypes.func,\n  renderMenu: PropTypes.func,\n  onSelect: PropTypes.func,\n  cascadeItems: PropTypes.array,\n  cascadePathItems: PropTypes.array\n};\n\nvar DropdownMenu = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(DropdownMenu, _React$Component);\n\n  function DropdownMenu() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _React$Component.call.apply(_React$Component, [this].concat(args)) || this;\n    _this.menus = [];\n\n    _this.handleSelect = function (layer, node, event) {\n      var _this$props = _this.props,\n          onSelect = _this$props.onSelect,\n          childrenKey = _this$props.childrenKey;\n      var children = node[childrenKey];\n\n      var isLeafNode = _isUndefined(children) || _isNull(children);\n\n      var items = (children || []).map(function (item) {\n        return _extends({}, _this.stringToObject(item), {\n          parent: node\n        });\n      });\n\n      var _this$getCascadeItems = _this.getCascadeItems(items, layer + 1, node, isLeafNode),\n          cascadeItems = _this$getCascadeItems.cascadeItems,\n          cascadePathItems = _this$getCascadeItems.cascadePathItems;\n\n      onSelect === null || onSelect === void 0 ? void 0 : onSelect(node, cascadeItems, cascadePathItems, isLeafNode, event);\n    };\n\n    _this.addPrefix = function (name) {\n      return prefix(_this.props.classPrefix)(name);\n    };\n\n    return _this;\n  }\n\n  var _proto = DropdownMenu.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    this.scrollToActiveItemTop();\n  };\n\n  _proto.getCascadeItems = function getCascadeItems(items, layer, node, isLeafNode) {\n    var _this$props2 = this.props,\n        _this$props2$cascadeI = _this$props2.cascadeItems,\n        cascadeItems = _this$props2$cascadeI === void 0 ? [] : _this$props2$cascadeI,\n        cascadePathItems = _this$props2.cascadePathItems;\n    var nextItems = [];\n    var nextPathItems = [];\n\n    for (var i = 0; i < cascadeItems.length && i < layer; i += 1) {\n      nextItems.push(cascadeItems[i]);\n\n      if (i < layer - 1 && cascadePathItems) {\n        nextPathItems.push(cascadePathItems[i]);\n      }\n    }\n\n    nextPathItems.push(node);\n\n    if (!isLeafNode) {\n      nextItems.push(items);\n    }\n\n    return {\n      cascadeItems: nextItems,\n      cascadePathItems: nextPathItems\n    };\n  };\n\n  _proto.stringToObject = function stringToObject(value) {\n    var _this$props3 = this.props,\n        labelKey = _this$props3.labelKey,\n        valueKey = _this$props3.valueKey;\n    return _stringToObject(value, labelKey, valueKey);\n  };\n\n  _proto.scrollToActiveItemTop = function scrollToActiveItemTop() {\n    var _this2 = this;\n\n    if (!this.menus) {\n      return;\n    }\n\n    this.menus.forEach(function (menu) {\n      if (!menu) {\n        return;\n      }\n\n      var activeItem = menu.querySelector(\".\" + _this2.addPrefix('item-focus'));\n\n      if (!activeItem) {\n        activeItem = menu.querySelector(\".\" + _this2.addPrefix('item-active'));\n      }\n\n      if (activeItem) {\n        var position = getPosition(activeItem, menu);\n        scrollTop(menu, position.top);\n      }\n    });\n  };\n\n  _proto.renderCascadeNode = function renderCascadeNode(node, index, layer, focus) {\n    var _this$props4 = this.props,\n        activeItemValue = _this$props4.activeItemValue,\n        valueKey = _this$props4.valueKey,\n        labelKey = _this$props4.labelKey,\n        childrenKey = _this$props4.childrenKey,\n        disabledItemValues = _this$props4.disabledItemValues,\n        renderMenuItem = _this$props4.renderMenuItem;\n    var children = node[childrenKey];\n    var value = node[valueKey];\n    var label = node[labelKey];\n    var disabled = disabledItemValues.some(function (disabledValue) {\n      return shallowEqual(disabledValue, value);\n    }); // Use `value` in keys when If `value` is string or number\n\n    var onlyKey = _isString(value) || _isNumber(value) ? value : index;\n    return React.createElement(DropdownMenuItem, {\n      classPrefix: this.addPrefix('item'),\n      componentClass: 'li',\n      key: layer + \"-\" + onlyKey,\n      disabled: disabled,\n      active: !_isUndefined(activeItemValue) && shallowEqual(activeItemValue, value),\n      focus: focus,\n      value: node,\n      className: children ? this.addPrefix('has-children') : undefined,\n      onSelect: this.handleSelect.bind(this, layer)\n    }, renderMenuItem ? renderMenuItem(label, node) : label, children ? React.createElement(\"span\", {\n      className: this.addPrefix('caret')\n    }) : null);\n  };\n\n  _proto.renderCascade = function renderCascade() {\n    var _this3 = this;\n\n    var _this$props5 = this.props,\n        menuWidth = _this$props5.menuWidth,\n        menuHeight = _this$props5.menuHeight,\n        valueKey = _this$props5.valueKey,\n        renderMenu = _this$props5.renderMenu,\n        _this$props5$cascadeI = _this$props5.cascadeItems,\n        cascadeItems = _this$props5$cascadeI === void 0 ? [] : _this$props5$cascadeI,\n        cascadePathItems = _this$props5.cascadePathItems;\n    var styles = {\n      width: cascadeItems.length * menuWidth\n    };\n    var cascadeNodes = cascadeItems.map(function (children, layer) {\n      var onlyKey = layer + \"_\" + children.length;\n      var menu = React.createElement(\"ul\", {\n        role: \"list\"\n      }, children.map(function (item, index) {\n        return _this3.renderCascadeNode(item, index, layer, cascadePathItems[layer] && shallowEqual(cascadePathItems[layer][valueKey], item[valueKey]));\n      }));\n      var parentNode = cascadePathItems[layer - 1];\n      var node = React.createElement(\"div\", {\n        key: onlyKey,\n        className: _this3.addPrefix('column'),\n        ref: function ref(_ref) {\n          _this3.menus[layer] = _ref;\n        },\n        style: {\n          height: menuHeight,\n          width: menuWidth\n        }\n      }, renderMenu ? renderMenu(children, menu, parentNode) : menu);\n      return node;\n    });\n    return React.createElement(\"div\", {\n      style: styles\n    }, cascadeNodes);\n  };\n\n  _proto.render = function render() {\n    var _this$props6 = this.props,\n        className = _this$props6.className,\n        rest = _objectWithoutPropertiesLoose(_this$props6, [\"className\"]);\n\n    var classes = classNames(this.addPrefix('items'), className);\n    var unhandled = getUnhandledProps(DropdownMenu, rest);\n    return React.createElement(\"div\", _extends({}, unhandled, {\n      className: classes\n    }), this.renderCascade());\n  };\n\n  return DropdownMenu;\n}(React.Component);\n\nDropdownMenu.propTypes = dropdownMenuPropTypes;\nDropdownMenu.defaultProps = {\n  data: [],\n  disabledItemValues: [],\n  cascadeItems: [],\n  cascadePathItems: [],\n  menuWidth: 120,\n  menuHeight: 200,\n  childrenKey: 'children',\n  valueKey: 'value',\n  labelKey: 'label'\n};\nDropdownMenu.handledProps = [];\nexport default DropdownMenu;","map":{"version":3,"sources":["E:/OneDrive - University of Salford/Desktop/pizza-website/node_modules/rsuite/es/Cascader/DropdownMenu.js"],"names":["_objectWithoutPropertiesLoose","_extends","_inheritsLoose","_isNumber","_isString","_isNull","_isUndefined","React","PropTypes","getPosition","scrollTop","classNames","shallowEqual","getUnhandledProps","prefix","_stringToObject","DropdownMenuItem","dropdownMenuPropTypes","classPrefix","string","data","array","disabledItemValues","activeItemValue","any","childrenKey","valueKey","labelKey","menuWidth","number","menuHeight","oneOfType","className","renderMenuItem","func","renderMenu","onSelect","cascadeItems","cascadePathItems","DropdownMenu","_React$Component","_this","_len","arguments","length","args","Array","_key","call","apply","concat","menus","handleSelect","layer","node","event","_this$props","props","children","isLeafNode","items","map","item","stringToObject","parent","_this$getCascadeItems","getCascadeItems","addPrefix","name","_proto","prototype","componentDidMount","scrollToActiveItemTop","_this$props2","_this$props2$cascadeI","nextItems","nextPathItems","i","push","value","_this$props3","_this2","forEach","menu","activeItem","querySelector","position","top","renderCascadeNode","index","focus","_this$props4","label","disabled","some","disabledValue","onlyKey","createElement","componentClass","key","active","undefined","bind","renderCascade","_this3","_this$props5","_this$props5$cascadeI","styles","width","cascadeNodes","role","parentNode","ref","_ref","style","height","render","_this$props6","rest","classes","unhandled","Component","propTypes","defaultProps","handledProps"],"mappings":"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","sourcesContent":["import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport _isNumber from \"lodash/isNumber\";\nimport _isString from \"lodash/isString\";\nimport _isNull from \"lodash/isNull\";\nimport _isUndefined from \"lodash/isUndefined\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport { getPosition, scrollTop } from 'dom-lib';\nimport classNames from 'classnames';\nimport shallowEqual from '../utils/shallowEqual';\nimport { getUnhandledProps, prefix } from '../utils';\nimport _stringToObject from '../utils/stringToObject';\nimport { DropdownMenuItem } from '../Picker';\nexport var dropdownMenuPropTypes = {\n  classPrefix: PropTypes.string,\n  data: PropTypes.array,\n  disabledItemValues: PropTypes.array,\n  activeItemValue: PropTypes.any,\n  childrenKey: PropTypes.string,\n  valueKey: PropTypes.string,\n  labelKey: PropTypes.string,\n  menuWidth: PropTypes.number,\n  menuHeight: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  className: PropTypes.string,\n  renderMenuItem: PropTypes.func,\n  renderMenu: PropTypes.func,\n  onSelect: PropTypes.func,\n  cascadeItems: PropTypes.array,\n  cascadePathItems: PropTypes.array\n};\n\nvar DropdownMenu =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inheritsLoose(DropdownMenu, _React$Component);\n\n  function DropdownMenu() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _React$Component.call.apply(_React$Component, [this].concat(args)) || this;\n    _this.menus = [];\n\n    _this.handleSelect = function (layer, node, event) {\n      var _this$props = _this.props,\n          onSelect = _this$props.onSelect,\n          childrenKey = _this$props.childrenKey;\n      var children = node[childrenKey];\n\n      var isLeafNode = _isUndefined(children) || _isNull(children);\n\n      var items = (children || []).map(function (item) {\n        return _extends({}, _this.stringToObject(item), {\n          parent: node\n        });\n      });\n\n      var _this$getCascadeItems = _this.getCascadeItems(items, layer + 1, node, isLeafNode),\n          cascadeItems = _this$getCascadeItems.cascadeItems,\n          cascadePathItems = _this$getCascadeItems.cascadePathItems;\n\n      onSelect === null || onSelect === void 0 ? void 0 : onSelect(node, cascadeItems, cascadePathItems, isLeafNode, event);\n    };\n\n    _this.addPrefix = function (name) {\n      return prefix(_this.props.classPrefix)(name);\n    };\n\n    return _this;\n  }\n\n  var _proto = DropdownMenu.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    this.scrollToActiveItemTop();\n  };\n\n  _proto.getCascadeItems = function getCascadeItems(items, layer, node, isLeafNode) {\n    var _this$props2 = this.props,\n        _this$props2$cascadeI = _this$props2.cascadeItems,\n        cascadeItems = _this$props2$cascadeI === void 0 ? [] : _this$props2$cascadeI,\n        cascadePathItems = _this$props2.cascadePathItems;\n    var nextItems = [];\n    var nextPathItems = [];\n\n    for (var i = 0; i < cascadeItems.length && i < layer; i += 1) {\n      nextItems.push(cascadeItems[i]);\n\n      if (i < layer - 1 && cascadePathItems) {\n        nextPathItems.push(cascadePathItems[i]);\n      }\n    }\n\n    nextPathItems.push(node);\n\n    if (!isLeafNode) {\n      nextItems.push(items);\n    }\n\n    return {\n      cascadeItems: nextItems,\n      cascadePathItems: nextPathItems\n    };\n  };\n\n  _proto.stringToObject = function stringToObject(value) {\n    var _this$props3 = this.props,\n        labelKey = _this$props3.labelKey,\n        valueKey = _this$props3.valueKey;\n    return _stringToObject(value, labelKey, valueKey);\n  };\n\n  _proto.scrollToActiveItemTop = function scrollToActiveItemTop() {\n    var _this2 = this;\n\n    if (!this.menus) {\n      return;\n    }\n\n    this.menus.forEach(function (menu) {\n      if (!menu) {\n        return;\n      }\n\n      var activeItem = menu.querySelector(\".\" + _this2.addPrefix('item-focus'));\n\n      if (!activeItem) {\n        activeItem = menu.querySelector(\".\" + _this2.addPrefix('item-active'));\n      }\n\n      if (activeItem) {\n        var position = getPosition(activeItem, menu);\n        scrollTop(menu, position.top);\n      }\n    });\n  };\n\n  _proto.renderCascadeNode = function renderCascadeNode(node, index, layer, focus) {\n    var _this$props4 = this.props,\n        activeItemValue = _this$props4.activeItemValue,\n        valueKey = _this$props4.valueKey,\n        labelKey = _this$props4.labelKey,\n        childrenKey = _this$props4.childrenKey,\n        disabledItemValues = _this$props4.disabledItemValues,\n        renderMenuItem = _this$props4.renderMenuItem;\n    var children = node[childrenKey];\n    var value = node[valueKey];\n    var label = node[labelKey];\n    var disabled = disabledItemValues.some(function (disabledValue) {\n      return shallowEqual(disabledValue, value);\n    }); // Use `value` in keys when If `value` is string or number\n\n    var onlyKey = _isString(value) || _isNumber(value) ? value : index;\n    return React.createElement(DropdownMenuItem, {\n      classPrefix: this.addPrefix('item'),\n      componentClass: 'li',\n      key: layer + \"-\" + onlyKey,\n      disabled: disabled,\n      active: !_isUndefined(activeItemValue) && shallowEqual(activeItemValue, value),\n      focus: focus,\n      value: node,\n      className: children ? this.addPrefix('has-children') : undefined,\n      onSelect: this.handleSelect.bind(this, layer)\n    }, renderMenuItem ? renderMenuItem(label, node) : label, children ? React.createElement(\"span\", {\n      className: this.addPrefix('caret')\n    }) : null);\n  };\n\n  _proto.renderCascade = function renderCascade() {\n    var _this3 = this;\n\n    var _this$props5 = this.props,\n        menuWidth = _this$props5.menuWidth,\n        menuHeight = _this$props5.menuHeight,\n        valueKey = _this$props5.valueKey,\n        renderMenu = _this$props5.renderMenu,\n        _this$props5$cascadeI = _this$props5.cascadeItems,\n        cascadeItems = _this$props5$cascadeI === void 0 ? [] : _this$props5$cascadeI,\n        cascadePathItems = _this$props5.cascadePathItems;\n    var styles = {\n      width: cascadeItems.length * menuWidth\n    };\n    var cascadeNodes = cascadeItems.map(function (children, layer) {\n      var onlyKey = layer + \"_\" + children.length;\n      var menu = React.createElement(\"ul\", {\n        role: \"list\"\n      }, children.map(function (item, index) {\n        return _this3.renderCascadeNode(item, index, layer, cascadePathItems[layer] && shallowEqual(cascadePathItems[layer][valueKey], item[valueKey]));\n      }));\n      var parentNode = cascadePathItems[layer - 1];\n      var node = React.createElement(\"div\", {\n        key: onlyKey,\n        className: _this3.addPrefix('column'),\n        ref: function ref(_ref) {\n          _this3.menus[layer] = _ref;\n        },\n        style: {\n          height: menuHeight,\n          width: menuWidth\n        }\n      }, renderMenu ? renderMenu(children, menu, parentNode) : menu);\n      return node;\n    });\n    return React.createElement(\"div\", {\n      style: styles\n    }, cascadeNodes);\n  };\n\n  _proto.render = function render() {\n    var _this$props6 = this.props,\n        className = _this$props6.className,\n        rest = _objectWithoutPropertiesLoose(_this$props6, [\"className\"]);\n\n    var classes = classNames(this.addPrefix('items'), className);\n    var unhandled = getUnhandledProps(DropdownMenu, rest);\n    return React.createElement(\"div\", _extends({}, unhandled, {\n      className: classes\n    }), this.renderCascade());\n  };\n\n  return DropdownMenu;\n}(React.Component);\n\nDropdownMenu.propTypes = dropdownMenuPropTypes;\nDropdownMenu.defaultProps = {\n  data: [],\n  disabledItemValues: [],\n  cascadeItems: [],\n  cascadePathItems: [],\n  menuWidth: 120,\n  menuHeight: 200,\n  childrenKey: 'children',\n  valueKey: 'value',\n  labelKey: 'label'\n};\nDropdownMenu.handledProps = [];\nexport default DropdownMenu;"]},"metadata":{},"sourceType":"module"}