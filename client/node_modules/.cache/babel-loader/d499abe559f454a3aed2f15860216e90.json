{"ast":null,"code":"import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport _omit from \"lodash/omit\";\nimport _isUndefined from \"lodash/isUndefined\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport { SchemaModel } from 'schema-typed';\nimport classNames from 'classnames';\nimport shallowEqual from '../utils/shallowEqual';\nimport { getUnhandledProps, prefix } from '../utils';\nimport { defaultClassPrefix } from '../utils/prefix';\nimport FormContext, { FormValueContext, FormErrorContext } from './FormContext';\n\nvar Form = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(Form, _React$Component);\n\n  function Form(_props) {\n    var _this;\n\n    _this = _React$Component.call(this, _props) || this;\n    _this.formContextValue = null;\n\n    _this.getFormValue = function (state, props) {\n      if (state === void 0) {\n        state = _this.state;\n      }\n\n      if (props === void 0) {\n        props = _this.props;\n      }\n\n      return _isUndefined(props.formValue) ? state.formValue : props.formValue;\n    };\n\n    _this.getFormError = function (state, props) {\n      if (state === void 0) {\n        state = _this.state;\n      }\n\n      if (props === void 0) {\n        props = _this.props;\n      }\n\n      return _isUndefined(props.formError) ? state.formError : props.formError;\n    };\n\n    _this.check = function (callback) {\n      var formValue = _this.getFormValue() || {};\n      var _this$props = _this.props,\n          model = _this$props.model,\n          onCheck = _this$props.onCheck,\n          onError = _this$props.onError;\n      var formError = {};\n      var errorCount = 0;\n      Object.keys(model.schema).forEach(function (key) {\n        var checkResult = model.checkForField(key, formValue[key], formValue);\n\n        if (checkResult.hasError === true) {\n          errorCount += 1;\n          formError[key] = checkResult.errorMessage;\n        }\n      });\n\n      _this.setState({\n        formError: formError\n      });\n\n      onCheck === null || onCheck === void 0 ? void 0 : onCheck(formError);\n      callback === null || callback === void 0 ? void 0 : callback(formError);\n\n      if (errorCount > 0) {\n        onError === null || onError === void 0 ? void 0 : onError(formError);\n        return false;\n      }\n\n      return true;\n    };\n\n    _this.checkForField = function (fieldName, callback) {\n      var formValue = _this.getFormValue() || {};\n      var _this$props2 = _this.props,\n          model = _this$props2.model,\n          onCheck = _this$props2.onCheck,\n          onError = _this$props2.onError;\n      var checkResult = model.checkForField(fieldName, formValue[fieldName], formValue);\n\n      _this.setState(function (prvState, props) {\n        var _extends2;\n\n        var formError = _extends({}, _this.getFormError(prvState, props), (_extends2 = {}, _extends2[fieldName] = checkResult.errorMessage, _extends2));\n\n        onCheck === null || onCheck === void 0 ? void 0 : onCheck(formError);\n\n        if (checkResult.hasError) {\n          onError === null || onError === void 0 ? void 0 : onError(formError);\n        }\n\n        return {\n          formError: formError\n        };\n      });\n\n      callback === null || callback === void 0 ? void 0 : callback(checkResult);\n      return !checkResult.hasError;\n    };\n\n    _this.checkAsync = function () {\n      var formValue = _this.getFormValue() || {};\n      var _this$props3 = _this.props,\n          model = _this$props3.model,\n          onCheck = _this$props3.onCheck,\n          onError = _this$props3.onError;\n      var promises = [];\n      var keys = [];\n      Object.keys(model.schema).forEach(function (key) {\n        keys.push(key);\n        promises.push(model.checkForFieldAsync(key, formValue[key], formValue));\n      });\n      return Promise.all(promises).then(function (values) {\n        var formError = {};\n        var errorCount = 0;\n\n        for (var i = 0; i < values.length; i++) {\n          if (values[i].hasError) {\n            errorCount += 1;\n            formError[keys[i]] = values[i].errorMessage;\n          }\n        }\n\n        onCheck === null || onCheck === void 0 ? void 0 : onCheck(formError);\n\n        if (errorCount > 0) {\n          onError === null || onError === void 0 ? void 0 : onError(formError);\n        }\n\n        _this.setState({\n          formError: formError\n        });\n\n        return {\n          hasError: errorCount > 0,\n          formError: formError\n        };\n      });\n    };\n\n    _this.checkForFieldAsync = function (fieldName) {\n      var formValue = _this.getFormValue() || {};\n      var _this$props4 = _this.props,\n          model = _this$props4.model,\n          onCheck = _this$props4.onCheck,\n          onError = _this$props4.onError;\n      return model.checkForFieldAsync(fieldName, formValue[fieldName], formValue).then(function (checkResult) {\n        _this.setState(function (prvState, props) {\n          var _extends3;\n\n          var formError = _extends({}, _this.getFormError(prvState, props), (_extends3 = {}, _extends3[fieldName] = checkResult.errorMessage, _extends3));\n\n          onCheck === null || onCheck === void 0 ? void 0 : onCheck(formError);\n\n          if (checkResult.hasError) {\n            onError === null || onError === void 0 ? void 0 : onError(formError);\n          }\n\n          return {\n            formError: formError\n          };\n        });\n\n        return checkResult;\n      });\n    };\n\n    _this.handleFieldError = function (name, errorMessage) {\n      _this.setState(function (prvState, props) {\n        var _extends4, _this$props$onError, _this$props5, _this$props$onCheck, _this$props6;\n\n        var formError = _extends({}, _this.getFormError(prvState, props), (_extends4 = {}, _extends4[name] = errorMessage, _extends4));\n\n        (_this$props$onError = (_this$props5 = _this.props).onError) === null || _this$props$onError === void 0 ? void 0 : _this$props$onError.call(_this$props5, formError);\n        (_this$props$onCheck = (_this$props6 = _this.props).onCheck) === null || _this$props$onCheck === void 0 ? void 0 : _this$props$onCheck.call(_this$props6, formError);\n        return {\n          formError: formError\n        };\n      });\n    };\n\n    _this.handleFieldSuccess = function (name) {\n      _this.setState(function (prvState, props) {\n        var _this$props$onCheck2, _this$props7;\n\n        var formError = _omit(_this.getFormError(prvState, props), [name]);\n\n        (_this$props$onCheck2 = (_this$props7 = _this.props).onCheck) === null || _this$props$onCheck2 === void 0 ? void 0 : _this$props$onCheck2.call(_this$props7, formError);\n        return {\n          formError: formError\n        };\n      });\n    };\n\n    _this.handleFieldChange = function (name, value, event) {\n      var _extends5, _this$props$onChange, _this$props8;\n\n      var formValue = _this.getFormValue();\n\n      var nextFormValue = _extends({}, formValue, (_extends5 = {}, _extends5[name] = value, _extends5));\n\n      _this.setState({\n        formValue: nextFormValue\n      });\n\n      (_this$props$onChange = (_this$props8 = _this.props).onChange) === null || _this$props$onChange === void 0 ? void 0 : _this$props$onChange.call(_this$props8, nextFormValue, event);\n    };\n\n    _this.handleSubmit = function (event) {\n      var _this$props$onSubmit, _this$props9;\n\n      event.preventDefault();\n      event.stopPropagation();\n\n      var checkStatus = _this.check();\n\n      (_this$props$onSubmit = (_this$props9 = _this.props).onSubmit) === null || _this$props$onSubmit === void 0 ? void 0 : _this$props$onSubmit.call(_this$props9, checkStatus, event);\n    };\n\n    var _this$props10 = _this.props,\n        formDefaultValue = _this$props10.formDefaultValue,\n        _formError = _this$props10.formError;\n    _this.state = {\n      formError: _formError || {},\n      formValue: formDefaultValue\n    };\n    return _this;\n  }\n\n  var _proto = Form.prototype;\n  /**\n   * public APIs\n   */\n\n  _proto.cleanErrors = function cleanErrors(callback) {\n    this.setState({\n      formError: {}\n    }, callback);\n  }\n  /**\n   * public APIs\n   */\n  ;\n\n  _proto.cleanErrorForFiled = function cleanErrorForFiled(fieldName, callback) {\n    this.setState({\n      formError: _omit(this.state.formError, [fieldName])\n    }, callback);\n  }\n  /**\n   * public APIs\n   */\n  ;\n\n  _proto.resetErrors = function resetErrors(formError, callback) {\n    if (formError === void 0) {\n      formError = {};\n    }\n\n    this.setState({\n      formError: formError\n    }, callback);\n  };\n\n  _proto.getFormContextValue = function getFormContextValue() {\n    var _this$props11 = this.props,\n        formDefaultValue = _this$props11.formDefaultValue,\n        errorFromContext = _this$props11.errorFromContext,\n        model = _this$props11.model,\n        checkTrigger = _this$props11.checkTrigger,\n        readOnly = _this$props11.readOnly,\n        plaintext = _this$props11.plaintext;\n    var nextFormContextValue = {\n      model: model,\n      checkTrigger: checkTrigger,\n      formDefaultValue: formDefaultValue,\n      errorFromContext: errorFromContext,\n      readOnly: readOnly,\n      plaintext: plaintext,\n      onFieldChange: this.handleFieldChange,\n      onFieldError: this.handleFieldError,\n      onFieldSuccess: this.handleFieldSuccess\n    };\n\n    if (!shallowEqual(nextFormContextValue, this.formContextValue)) {\n      this.formContextValue = nextFormContextValue;\n    }\n\n    return this.formContextValue;\n  };\n\n  _proto.checkErrorFromContext = function checkErrorFromContext(children) {\n    var errorFromContext = this.props.errorFromContext;\n\n    if (errorFromContext) {\n      var formError = this.getFormError();\n      return React.createElement(FormErrorContext.Provider, {\n        value: formError\n      }, children);\n    }\n\n    return children;\n  };\n\n  _proto.render = function render() {\n    var _this$props12 = this.props,\n        _this$props12$formVal = _this$props12.formValue,\n        formValue = _this$props12$formVal === void 0 ? {} : _this$props12$formVal,\n        layout = _this$props12.layout,\n        classPrefix = _this$props12.classPrefix,\n        fluid = _this$props12.fluid,\n        className = _this$props12.className,\n        children = _this$props12.children,\n        props = _objectWithoutPropertiesLoose(_this$props12, [\"formValue\", \"layout\", \"classPrefix\", \"fluid\", \"className\", \"children\"]);\n\n    var addPrefix = prefix(classPrefix);\n    var classes = classNames(classPrefix, className, addPrefix(layout), addPrefix(fluid && layout === 'vertical' ? 'fluid' : 'fixed-width'));\n    var unhandled = getUnhandledProps(Form, props);\n    var contextDefalutValue = this.getFormContextValue();\n    return React.createElement(\"form\", _extends({\n      onSubmit: this.handleSubmit\n    }, unhandled, {\n      className: classes\n    }), React.createElement(FormContext.Provider, {\n      value: contextDefalutValue\n    }, React.createElement(FormValueContext.Provider, {\n      value: formValue\n    }, this.checkErrorFromContext(children))));\n  };\n\n  return Form;\n}(React.Component);\n\nForm.propTypes = {\n  className: PropTypes.string,\n  layout: PropTypes.oneOf(['horizontal', 'vertical', 'inline']),\n  fluid: PropTypes.bool,\n  formValue: PropTypes.object,\n  formDefaultValue: PropTypes.object,\n  formError: PropTypes.object,\n  checkDelay: PropTypes.number,\n  checkTrigger: PropTypes.oneOf(['change', 'blur', 'none']),\n  onChange: PropTypes.func,\n  onError: PropTypes.func,\n  onCheck: PropTypes.func,\n  onSubmit: PropTypes.func,\n  model: PropTypes.object,\n  classPrefix: PropTypes.string,\n  errorFromContext: PropTypes.bool,\n  children: PropTypes.node,\n  readOnly: PropTypes.bool,\n  plaintext: PropTypes.bool\n};\nForm.defaultProps = {\n  classPrefix: defaultClassPrefix('form'),\n  model: SchemaModel({}),\n  layout: 'vertical',\n  formDefaultValue: {},\n  checkDelay: 500,\n  checkTrigger: 'change',\n  errorFromContext: true\n};\nexport default Form;","map":{"version":3,"sources":["E:/OneDrive - University of Salford/Desktop/pizza-website/node_modules/rsuite/es/Form/Form.js"],"names":["_objectWithoutPropertiesLoose","_extends","_inheritsLoose","_omit","_isUndefined","React","PropTypes","SchemaModel","classNames","shallowEqual","getUnhandledProps","prefix","defaultClassPrefix","FormContext","FormValueContext","FormErrorContext","Form","_React$Component","_props","_this","call","formContextValue","getFormValue","state","props","formValue","getFormError","formError","check","callback","_this$props","model","onCheck","onError","errorCount","Object","keys","schema","forEach","key","checkResult","checkForField","hasError","errorMessage","setState","fieldName","_this$props2","prvState","_extends2","checkAsync","_this$props3","promises","push","checkForFieldAsync","Promise","all","then","values","i","length","_this$props4","_extends3","handleFieldError","name","_extends4","_this$props$onError","_this$props5","_this$props$onCheck","_this$props6","handleFieldSuccess","_this$props$onCheck2","_this$props7","handleFieldChange","value","event","_extends5","_this$props$onChange","_this$props8","nextFormValue","onChange","handleSubmit","_this$props$onSubmit","_this$props9","preventDefault","stopPropagation","checkStatus","onSubmit","_this$props10","formDefaultValue","_formError","_proto","prototype","cleanErrors","cleanErrorForFiled","resetErrors","getFormContextValue","_this$props11","errorFromContext","checkTrigger","readOnly","plaintext","nextFormContextValue","onFieldChange","onFieldError","onFieldSuccess","checkErrorFromContext","children","createElement","Provider","render","_this$props12","_this$props12$formVal","layout","classPrefix","fluid","className","addPrefix","classes","unhandled","contextDefalutValue","Component","propTypes","string","oneOf","bool","object","checkDelay","number","func","node","defaultProps"],"mappings":"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","sourcesContent":["import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport _omit from \"lodash/omit\";\nimport _isUndefined from \"lodash/isUndefined\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport { SchemaModel } from 'schema-typed';\nimport classNames from 'classnames';\nimport shallowEqual from '../utils/shallowEqual';\nimport { getUnhandledProps, prefix } from '../utils';\nimport { defaultClassPrefix } from '../utils/prefix';\nimport FormContext, { FormValueContext, FormErrorContext } from './FormContext';\n\nvar Form =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inheritsLoose(Form, _React$Component);\n\n  function Form(_props) {\n    var _this;\n\n    _this = _React$Component.call(this, _props) || this;\n    _this.formContextValue = null;\n\n    _this.getFormValue = function (state, props) {\n      if (state === void 0) {\n        state = _this.state;\n      }\n\n      if (props === void 0) {\n        props = _this.props;\n      }\n\n      return _isUndefined(props.formValue) ? state.formValue : props.formValue;\n    };\n\n    _this.getFormError = function (state, props) {\n      if (state === void 0) {\n        state = _this.state;\n      }\n\n      if (props === void 0) {\n        props = _this.props;\n      }\n\n      return _isUndefined(props.formError) ? state.formError : props.formError;\n    };\n\n    _this.check = function (callback) {\n      var formValue = _this.getFormValue() || {};\n      var _this$props = _this.props,\n          model = _this$props.model,\n          onCheck = _this$props.onCheck,\n          onError = _this$props.onError;\n      var formError = {};\n      var errorCount = 0;\n      Object.keys(model.schema).forEach(function (key) {\n        var checkResult = model.checkForField(key, formValue[key], formValue);\n\n        if (checkResult.hasError === true) {\n          errorCount += 1;\n          formError[key] = checkResult.errorMessage;\n        }\n      });\n\n      _this.setState({\n        formError: formError\n      });\n\n      onCheck === null || onCheck === void 0 ? void 0 : onCheck(formError);\n      callback === null || callback === void 0 ? void 0 : callback(formError);\n\n      if (errorCount > 0) {\n        onError === null || onError === void 0 ? void 0 : onError(formError);\n        return false;\n      }\n\n      return true;\n    };\n\n    _this.checkForField = function (fieldName, callback) {\n      var formValue = _this.getFormValue() || {};\n      var _this$props2 = _this.props,\n          model = _this$props2.model,\n          onCheck = _this$props2.onCheck,\n          onError = _this$props2.onError;\n      var checkResult = model.checkForField(fieldName, formValue[fieldName], formValue);\n\n      _this.setState(function (prvState, props) {\n        var _extends2;\n\n        var formError = _extends({}, _this.getFormError(prvState, props), (_extends2 = {}, _extends2[fieldName] = checkResult.errorMessage, _extends2));\n\n        onCheck === null || onCheck === void 0 ? void 0 : onCheck(formError);\n\n        if (checkResult.hasError) {\n          onError === null || onError === void 0 ? void 0 : onError(formError);\n        }\n\n        return {\n          formError: formError\n        };\n      });\n\n      callback === null || callback === void 0 ? void 0 : callback(checkResult);\n      return !checkResult.hasError;\n    };\n\n    _this.checkAsync = function () {\n      var formValue = _this.getFormValue() || {};\n      var _this$props3 = _this.props,\n          model = _this$props3.model,\n          onCheck = _this$props3.onCheck,\n          onError = _this$props3.onError;\n      var promises = [];\n      var keys = [];\n      Object.keys(model.schema).forEach(function (key) {\n        keys.push(key);\n        promises.push(model.checkForFieldAsync(key, formValue[key], formValue));\n      });\n      return Promise.all(promises).then(function (values) {\n        var formError = {};\n        var errorCount = 0;\n\n        for (var i = 0; i < values.length; i++) {\n          if (values[i].hasError) {\n            errorCount += 1;\n            formError[keys[i]] = values[i].errorMessage;\n          }\n        }\n\n        onCheck === null || onCheck === void 0 ? void 0 : onCheck(formError);\n\n        if (errorCount > 0) {\n          onError === null || onError === void 0 ? void 0 : onError(formError);\n        }\n\n        _this.setState({\n          formError: formError\n        });\n\n        return {\n          hasError: errorCount > 0,\n          formError: formError\n        };\n      });\n    };\n\n    _this.checkForFieldAsync = function (fieldName) {\n      var formValue = _this.getFormValue() || {};\n      var _this$props4 = _this.props,\n          model = _this$props4.model,\n          onCheck = _this$props4.onCheck,\n          onError = _this$props4.onError;\n      return model.checkForFieldAsync(fieldName, formValue[fieldName], formValue).then(function (checkResult) {\n        _this.setState(function (prvState, props) {\n          var _extends3;\n\n          var formError = _extends({}, _this.getFormError(prvState, props), (_extends3 = {}, _extends3[fieldName] = checkResult.errorMessage, _extends3));\n\n          onCheck === null || onCheck === void 0 ? void 0 : onCheck(formError);\n\n          if (checkResult.hasError) {\n            onError === null || onError === void 0 ? void 0 : onError(formError);\n          }\n\n          return {\n            formError: formError\n          };\n        });\n\n        return checkResult;\n      });\n    };\n\n    _this.handleFieldError = function (name, errorMessage) {\n      _this.setState(function (prvState, props) {\n        var _extends4, _this$props$onError, _this$props5, _this$props$onCheck, _this$props6;\n\n        var formError = _extends({}, _this.getFormError(prvState, props), (_extends4 = {}, _extends4[name] = errorMessage, _extends4));\n\n        (_this$props$onError = (_this$props5 = _this.props).onError) === null || _this$props$onError === void 0 ? void 0 : _this$props$onError.call(_this$props5, formError);\n        (_this$props$onCheck = (_this$props6 = _this.props).onCheck) === null || _this$props$onCheck === void 0 ? void 0 : _this$props$onCheck.call(_this$props6, formError);\n        return {\n          formError: formError\n        };\n      });\n    };\n\n    _this.handleFieldSuccess = function (name) {\n      _this.setState(function (prvState, props) {\n        var _this$props$onCheck2, _this$props7;\n\n        var formError = _omit(_this.getFormError(prvState, props), [name]);\n\n        (_this$props$onCheck2 = (_this$props7 = _this.props).onCheck) === null || _this$props$onCheck2 === void 0 ? void 0 : _this$props$onCheck2.call(_this$props7, formError);\n        return {\n          formError: formError\n        };\n      });\n    };\n\n    _this.handleFieldChange = function (name, value, event) {\n      var _extends5, _this$props$onChange, _this$props8;\n\n      var formValue = _this.getFormValue();\n\n      var nextFormValue = _extends({}, formValue, (_extends5 = {}, _extends5[name] = value, _extends5));\n\n      _this.setState({\n        formValue: nextFormValue\n      });\n\n      (_this$props$onChange = (_this$props8 = _this.props).onChange) === null || _this$props$onChange === void 0 ? void 0 : _this$props$onChange.call(_this$props8, nextFormValue, event);\n    };\n\n    _this.handleSubmit = function (event) {\n      var _this$props$onSubmit, _this$props9;\n\n      event.preventDefault();\n      event.stopPropagation();\n\n      var checkStatus = _this.check();\n\n      (_this$props$onSubmit = (_this$props9 = _this.props).onSubmit) === null || _this$props$onSubmit === void 0 ? void 0 : _this$props$onSubmit.call(_this$props9, checkStatus, event);\n    };\n\n    var _this$props10 = _this.props,\n        formDefaultValue = _this$props10.formDefaultValue,\n        _formError = _this$props10.formError;\n    _this.state = {\n      formError: _formError || {},\n      formValue: formDefaultValue\n    };\n    return _this;\n  }\n\n  var _proto = Form.prototype;\n\n  /**\n   * public APIs\n   */\n  _proto.cleanErrors = function cleanErrors(callback) {\n    this.setState({\n      formError: {}\n    }, callback);\n  }\n  /**\n   * public APIs\n   */\n  ;\n\n  _proto.cleanErrorForFiled = function cleanErrorForFiled(fieldName, callback) {\n    this.setState({\n      formError: _omit(this.state.formError, [fieldName])\n    }, callback);\n  }\n  /**\n   * public APIs\n   */\n  ;\n\n  _proto.resetErrors = function resetErrors(formError, callback) {\n    if (formError === void 0) {\n      formError = {};\n    }\n\n    this.setState({\n      formError: formError\n    }, callback);\n  };\n\n  _proto.getFormContextValue = function getFormContextValue() {\n    var _this$props11 = this.props,\n        formDefaultValue = _this$props11.formDefaultValue,\n        errorFromContext = _this$props11.errorFromContext,\n        model = _this$props11.model,\n        checkTrigger = _this$props11.checkTrigger,\n        readOnly = _this$props11.readOnly,\n        plaintext = _this$props11.plaintext;\n    var nextFormContextValue = {\n      model: model,\n      checkTrigger: checkTrigger,\n      formDefaultValue: formDefaultValue,\n      errorFromContext: errorFromContext,\n      readOnly: readOnly,\n      plaintext: plaintext,\n      onFieldChange: this.handleFieldChange,\n      onFieldError: this.handleFieldError,\n      onFieldSuccess: this.handleFieldSuccess\n    };\n\n    if (!shallowEqual(nextFormContextValue, this.formContextValue)) {\n      this.formContextValue = nextFormContextValue;\n    }\n\n    return this.formContextValue;\n  };\n\n  _proto.checkErrorFromContext = function checkErrorFromContext(children) {\n    var errorFromContext = this.props.errorFromContext;\n\n    if (errorFromContext) {\n      var formError = this.getFormError();\n      return React.createElement(FormErrorContext.Provider, {\n        value: formError\n      }, children);\n    }\n\n    return children;\n  };\n\n  _proto.render = function render() {\n    var _this$props12 = this.props,\n        _this$props12$formVal = _this$props12.formValue,\n        formValue = _this$props12$formVal === void 0 ? {} : _this$props12$formVal,\n        layout = _this$props12.layout,\n        classPrefix = _this$props12.classPrefix,\n        fluid = _this$props12.fluid,\n        className = _this$props12.className,\n        children = _this$props12.children,\n        props = _objectWithoutPropertiesLoose(_this$props12, [\"formValue\", \"layout\", \"classPrefix\", \"fluid\", \"className\", \"children\"]);\n\n    var addPrefix = prefix(classPrefix);\n    var classes = classNames(classPrefix, className, addPrefix(layout), addPrefix(fluid && layout === 'vertical' ? 'fluid' : 'fixed-width'));\n    var unhandled = getUnhandledProps(Form, props);\n    var contextDefalutValue = this.getFormContextValue();\n    return React.createElement(\"form\", _extends({\n      onSubmit: this.handleSubmit\n    }, unhandled, {\n      className: classes\n    }), React.createElement(FormContext.Provider, {\n      value: contextDefalutValue\n    }, React.createElement(FormValueContext.Provider, {\n      value: formValue\n    }, this.checkErrorFromContext(children))));\n  };\n\n  return Form;\n}(React.Component);\n\nForm.propTypes = {\n  className: PropTypes.string,\n  layout: PropTypes.oneOf(['horizontal', 'vertical', 'inline']),\n  fluid: PropTypes.bool,\n  formValue: PropTypes.object,\n  formDefaultValue: PropTypes.object,\n  formError: PropTypes.object,\n  checkDelay: PropTypes.number,\n  checkTrigger: PropTypes.oneOf(['change', 'blur', 'none']),\n  onChange: PropTypes.func,\n  onError: PropTypes.func,\n  onCheck: PropTypes.func,\n  onSubmit: PropTypes.func,\n  model: PropTypes.object,\n  classPrefix: PropTypes.string,\n  errorFromContext: PropTypes.bool,\n  children: PropTypes.node,\n  readOnly: PropTypes.bool,\n  plaintext: PropTypes.bool\n};\nForm.defaultProps = {\n  classPrefix: defaultClassPrefix('form'),\n  model: SchemaModel({}),\n  layout: 'vertical',\n  formDefaultValue: {},\n  checkDelay: 500,\n  checkTrigger: 'change',\n  errorFromContext: true\n};\nexport default Form;"]},"metadata":{},"sourceType":"module"}