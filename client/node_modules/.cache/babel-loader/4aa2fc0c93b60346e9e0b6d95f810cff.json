{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport { setStatic } from 'recompose';\nimport classNames from 'classnames';\nimport { on } from 'dom-lib';\nimport { setInlineStyles, setTranslate3d, setTransitionDuration, closest, getPosition, getEdgeOffset, getScrollingParent } from './utils';\nimport { prefix, defaultProps, getUnhandledProps } from '../utils';\nimport ListItem from './ListItem';\nimport Manager from './Manager';\nimport AutoScroller from './AutoScroller';\nimport ListContext from './ListContext';\nvar NodeType = {\n  Canvas: 'CANVAS',\n  Anchor: 'A',\n  Button: 'BUTTON',\n  Input: 'INPUT',\n  Option: 'OPTION',\n  Textarea: 'TEXTAREA',\n  Select: 'SELECT'\n};\nvar interactiveElements = [NodeType.Anchor, NodeType.Button, NodeType.Input, NodeType.Option, NodeType.Textarea, NodeType.Select];\n\nvar List = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(List, _React$Component);\n\n  function List() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _React$Component.call.apply(_React$Component, [this].concat(args)) || this;\n    _this.state = {\n      sorting: false,\n      manager: new Manager()\n    };\n    _this.containerRef = React.createRef();\n    _this.containerBoundingRect = void 0;\n    _this.touched = void 0;\n    _this.scrollContainer = void 0;\n    _this.scrollContainerInitialScroll = void 0;\n    _this.autoScroller = void 0;\n    _this.windowInitialScroll = void 0;\n    _this.animatedNodeOffset = [];\n    _this.activeNodeBoundingClientRect = void 0;\n    _this.activeNodeGhost = void 0;\n    _this.activeNodeFlowBody = void 0;\n    _this.activeNodeFlowBodyTranslate = void 0;\n    _this.activeNodeMarginOffset = void 0;\n    _this.activeNodeOffsetEdge = void 0;\n    _this.activeNodeOldIndex = void 0;\n    _this.activeNodeNextIndex = void 0;\n    _this.activeNodeTranslateMin = void 0;\n    _this.activeNodeTranslateMax = void 0;\n    _this.windowStartListener = void 0;\n    _this.windowEndListener = void 0;\n    _this.sortMouseMoveListener = void 0;\n    _this.sortMouseEndListener = void 0;\n    _this.cursorInitialOffset = void 0;\n    _this.cursorCurrentPosition = void 0;\n    _this.pressTimer = void 0;\n\n    _this.handleStart = function (event) {\n      var _this$props = _this.props,\n          sortable = _this$props.sortable,\n          pressDelay = _this$props.pressDelay;\n      var _this$state = _this.state,\n          sorting = _this$state.sorting,\n          manager = _this$state.manager;\n      var node = closest(event.target, function (el) {\n        return !!manager.getNodeManagerRef(el);\n      });\n      var curManager = manager.getNodeManagerRef(node);\n\n      if (!((event === null || event === void 0 ? void 0 : event.target) && node instanceof HTMLElement && curManager)) {\n        return;\n      }\n\n      var _curManager$info = curManager.info,\n          disabled = _curManager$info.disabled,\n          curNodeManager = _curManager$info.manager;\n\n      if ( //is sortable\n      sortable && //is list item\n      !disabled && //is not secondary button pressed\n      event.button !== 2 && //is this list\n      curNodeManager === manager && //is not sorting\n      !sorting && //excludes interactive elements\n      !node.contains(closest(event.target, function (el) {\n        return interactiveElements.includes(el.tagName) || el.contentEditable === 'true';\n      }))) {\n        event.preventDefault();\n        _this.touched = true;\n        _this.cursorCurrentPosition = getPosition(event);\n        manager.setActive(curManager);\n        _this.pressTimer = setTimeout(function () {\n          return _this.handlePress(event);\n        }, pressDelay);\n      }\n    };\n\n    _this.handleEnd = function () {\n      var _this$state2 = _this.state,\n          sorting = _this$state2.sorting,\n          manager = _this$state2.manager;\n      _this.touched = false;\n\n      if (!sorting) {\n        clearTimeout(_this.pressTimer);\n        manager.setActive(null);\n      }\n    };\n\n    _this.handlePress = function _callee(event) {\n      var _this$props2, classPrefix, onSortStart, manager, _manager$getActive, activeNode, info, index, collection, addItemPrefix, style, activeNodeMargin;\n\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _this$props2 = _this.props, classPrefix = _this$props2.classPrefix, onSortStart = _this$props2.onSortStart;\n              manager = _this.state.manager;\n              _manager$getActive = manager.getActive(), activeNode = _manager$getActive.node, info = _manager$getActive.info; // return if no active node\n\n              if (!(!activeNode || !info)) {\n                _context.next = 5;\n                break;\n              }\n\n              return _context.abrupt(\"return\");\n\n            case 5:\n              index = info.index, collection = info.collection;\n              addItemPrefix = prefix(classPrefix + '-item');\n              style = window.getComputedStyle(activeNode);\n              activeNodeMargin = {\n                bottom: parseFloat(style.marginBottom),\n                left: parseFloat(style.marginLeft),\n                right: parseFloat(style.marginRight),\n                top: parseFloat(style.marginTop)\n              };\n              _this.activeNodeMarginOffset = {\n                x: activeNodeMargin.left + activeNodeMargin.right,\n                y: Math.max(activeNodeMargin.top, activeNodeMargin.bottom)\n              };\n              _this.activeNodeBoundingClientRect = activeNode.getBoundingClientRect();\n              _this.containerBoundingRect = _this.scrollContainer.getBoundingClientRect();\n              _this.activeNodeOldIndex = index;\n              _this.activeNodeNextIndex = index;\n              _this.activeNodeOffsetEdge = getEdgeOffset(activeNode, _this.containerRef.current);\n              _this.cursorInitialOffset = getPosition(event);\n              _this.scrollContainerInitialScroll = {\n                left: _this.scrollContainer.scrollLeft,\n                top: _this.scrollContainer.scrollTop\n              };\n              _this.windowInitialScroll = {\n                left: window.pageXOffset,\n                top: window.pageYOffset\n              };\n              _this.activeNodeFlowBody = document.body.appendChild(activeNode.cloneNode(true));\n              _this.activeNodeFlowBody && _this.activeNodeFlowBody.classList.add(addItemPrefix('helper'));\n              setInlineStyles(_this.activeNodeFlowBody, {\n                position: 'fixed',\n                width: _this.activeNodeBoundingClientRect.width + \"px\",\n                height: _this.activeNodeBoundingClientRect.height + \"px\",\n                left: _this.activeNodeBoundingClientRect.left - activeNodeMargin.left + \"px\",\n                top: _this.activeNodeBoundingClientRect.top - activeNodeMargin.top + \"px\"\n              });\n              _this.activeNodeGhost = activeNode;\n              activeNode.classList.add(addItemPrefix('holder'));\n              _this.activeNodeTranslateMin = {\n                y: _this.containerBoundingRect.top - _this.activeNodeBoundingClientRect.top - _this.activeNodeBoundingClientRect.height / 2\n              };\n              _this.activeNodeTranslateMax = {\n                y: _this.containerBoundingRect.top + _this.containerBoundingRect.height - _this.activeNodeBoundingClientRect.top - _this.activeNodeBoundingClientRect.height / 2\n              };\n              _this.sortMouseMoveListener = on(window, 'mousemove', _this.handleSortMove, {\n                passive: false\n              });\n              _this.sortMouseEndListener = on(window, 'mouseup', _this.handleSortEnd, {\n                passive: false\n              });\n\n              _this.setState({\n                sorting: true\n              });\n\n              if (onSortStart) {\n                onSortStart({\n                  collection: collection,\n                  node: activeNode,\n                  oldIndex: _this.activeNodeOldIndex,\n                  newIndex: _this.activeNodeNextIndex\n                }, event);\n              }\n\n            case 29:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      });\n    };\n\n    _this.handleSortMove = function (event) {\n      var _this$props3 = _this.props,\n          onSortMove = _this$props3.onSortMove,\n          autoScroll = _this$props3.autoScroll;\n      var manager = _this.state.manager; // Update helper position\n\n      var offset = getPosition(event);\n      var translate = {\n        x: offset.x - _this.cursorInitialOffset.x,\n        y: offset.y - _this.cursorInitialOffset.y\n      }; // Adjust for window scroll\n\n      translate.x -= window.pageXOffset - _this.windowInitialScroll.left;\n      translate.y -= window.pageYOffset - _this.windowInitialScroll.top;\n      _this.activeNodeFlowBodyTranslate = translate;\n      setTranslate3d(_this.activeNodeFlowBody, translate);\n\n      _this.animateNodes(); // auto scroll\n\n\n      if (autoScroll) {\n        _this.autoScroller.update({\n          width: _this.activeNodeBoundingClientRect.width,\n          height: _this.activeNodeBoundingClientRect.height,\n          translate: _this.activeNodeFlowBodyTranslate,\n          maxTranslate: _this.activeNodeTranslateMax,\n          minTranslate: _this.activeNodeTranslateMin\n        });\n      }\n\n      if (onSortMove) {\n        onSortMove({\n          collection: manager.getActive().info.collection,\n          node: manager.getActive().node,\n          oldIndex: _this.activeNodeOldIndex,\n          newIndex: _this.activeNodeNextIndex\n        }, event);\n      }\n    };\n\n    _this.handleSortEnd = function (event) {\n      var _this$props4 = _this.props,\n          onSortEnd = _this$props4.onSortEnd,\n          onSort = _this$props4.onSort,\n          classPrefix = _this$props4.classPrefix,\n          transitionDuration = _this$props4.transitionDuration;\n      var manager = _this.state.manager;\n      var activeManagerRef = manager.getActive();\n      var activeCollection = activeManagerRef ? activeManagerRef.info.collection : 0;\n      var managerRefs = manager.getOrderedRefs(activeCollection);\n      var addItemPrefix = prefix(classPrefix + '-item'); // Remove the event listeners\n\n      _this.sortMouseMoveListener.off();\n\n      _this.sortMouseEndListener.off();\n\n      setTransitionDuration(_this.activeNodeFlowBody, transitionDuration);\n      setTranslate3d(_this.activeNodeFlowBody, {\n        x: _this.holderTranslate.x - _this.containerScrollDelta.left,\n        y: _this.holderTranslate.y - _this.containerScrollDelta.top\n      }); // wait for animation\n\n      setTimeout(function () {\n        // Remove the helper from the DOM\n        if (_this.activeNodeFlowBody) {\n          _this.activeNodeFlowBody.parentNode && _this.activeNodeFlowBody.parentNode.removeChild(_this.activeNodeFlowBody);\n          _this.activeNodeFlowBody = null;\n        }\n\n        if (_this.activeNodeGhost) {\n          _this.activeNodeGhost.classList.remove(addItemPrefix('holder'));\n\n          setTranslate3d(_this.activeNodeGhost, null);\n          _this.animatedNodeOffset = [];\n        }\n\n        for (var i = 0, len = managerRefs.length; i < len; i++) {\n          var managerRef = managerRefs[i];\n          var el = managerRef.node; // Clear the cached offsetTop / offsetLeft value\n\n          managerRef.edgeOffset = null; // Remove the transforms / transitions\n\n          setTranslate3d(el, null);\n          setTransitionDuration(el, null);\n        } // Stop autoScroll\n\n\n        _this.autoScroller.clear(); // Update manager state\n\n\n        manager.setActive(null);\n\n        _this.setState({\n          sorting: false\n        });\n\n        if (typeof onSortEnd === 'function') {\n          onSortEnd({\n            collection: activeCollection,\n            node: activeManagerRef.node,\n            newIndex: _this.activeNodeNextIndex,\n            oldIndex: _this.activeNodeOldIndex\n          }, event);\n        }\n\n        if (typeof onSort === 'function') {\n          onSort({\n            collection: activeCollection,\n            node: activeManagerRef.node,\n            newIndex: _this.activeNodeNextIndex,\n            oldIndex: _this.activeNodeOldIndex\n          }, event);\n        }\n      }, transitionDuration);\n    };\n\n    return _this;\n  }\n\n  var _proto = List.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    var _this2 = this;\n\n    if (this.containerRef.current instanceof HTMLElement) {\n      this.scrollContainer = getScrollingParent(this.containerRef.current) || this.containerRef.current;\n      this.autoScroller = new AutoScroller(this.scrollContainer, function (offset) {\n        _this2.activeNodeFlowBodyTranslate.x += offset.left;\n        _this2.activeNodeFlowBodyTranslate.y += offset.top;\n      });\n      this.windowStartListener = on(this.containerRef.current, 'mousedown', this.handleStart, {\n        passive: false\n      });\n      this.windowEndListener = on(this.containerRef.current, 'mouseup', this.handleEnd, {\n        passive: false\n      });\n    }\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    var _this$windowStartList, _this$windowEndListen;\n\n    (_this$windowStartList = this.windowStartListener) === null || _this$windowStartList === void 0 ? void 0 : _this$windowStartList.off();\n    (_this$windowEndListen = this.windowEndListener) === null || _this$windowEndListen === void 0 ? void 0 : _this$windowEndListen.off();\n  };\n\n  _proto.animateNodes = function animateNodes() {\n    var transitionDuration = this.props.transitionDuration;\n    var manager = this.state.manager;\n    var listItemManagerRefs = manager.getOrderedRefs();\n    var sortingOffset = {\n      left: this.activeNodeOffsetEdge.left + this.activeNodeFlowBodyTranslate.x + this.containerScrollDelta.left,\n      top: this.activeNodeOffsetEdge.top + this.activeNodeFlowBodyTranslate.y + this.containerScrollDelta.top\n    };\n    this.activeNodeNextIndex = -1;\n\n    for (var i = 0, len = listItemManagerRefs.length; i < len; i++) {\n      var _listItemManagerRefs$ = listItemManagerRefs[i],\n          node = _listItemManagerRefs$.node,\n          index = _listItemManagerRefs$.info.index,\n          edgeOffset = _listItemManagerRefs$.edgeOffset;\n      var width = node.offsetWidth;\n      var height = node.offsetHeight;\n      var offset = {\n        height: this.activeNodeBoundingClientRect.height > height ? height / 2 : this.activeNodeBoundingClientRect.height / 2,\n        width: this.activeNodeBoundingClientRect.width > width ? width / 2 : this.activeNodeBoundingClientRect.width / 2\n      };\n      var translate = {\n        x: 0,\n        y: 0\n      }; // If we haven't cached the node's offsetTop / offsetLeft value\n\n      var curEdgeOffset = edgeOffset || getEdgeOffset(node, this.containerRef.current);\n      listItemManagerRefs[i].edgeOffset = curEdgeOffset; // Get a reference to the next node\n\n      var prvNode = i > 0 && listItemManagerRefs[i - 1];\n      var nextNode = i < len - 1 && listItemManagerRefs[i + 1]; // Also cache the node's edge offset if needed.\n\n      if (prvNode && !prvNode.edgeOffset) {\n        prvNode.edgeOffset = getEdgeOffset(prvNode.node, this.containerRef.current);\n      }\n\n      if (nextNode && !nextNode.edgeOffset) {\n        nextNode.edgeOffset = getEdgeOffset(nextNode.node, this.containerRef.current);\n      } // If the node is the one we're currently animating, skip it\n\n\n      if (index === this.activeNodeOldIndex) {\n        continue;\n      }\n\n      var distanceTop = sortingOffset.top + this.windowScrollDelta.top;\n\n      if (prvNode && index > this.activeNodeOldIndex && distanceTop + offset.height >= curEdgeOffset.top) {\n        translate.y = prvNode.edgeOffset.top - curEdgeOffset.top;\n        this.activeNodeNextIndex = index;\n      } else if (nextNode && index < this.activeNodeOldIndex && distanceTop <= curEdgeOffset.top + offset.height) {\n        translate.y = nextNode.edgeOffset.top - curEdgeOffset.top;\n\n        if (this.activeNodeNextIndex === -1) {\n          this.activeNodeNextIndex = index;\n        }\n      }\n\n      setTransitionDuration(node, transitionDuration);\n      setTranslate3d(node, translate); // translate holder\n\n      this.animatedNodeOffset[index] = translate;\n      setTranslate3d(this.activeNodeGhost, this.holderTranslate);\n    }\n\n    if (this.activeNodeNextIndex === -1) {\n      this.activeNodeNextIndex = this.activeNodeOldIndex;\n    }\n  };\n\n  _proto.render = function render() {\n    var _classNames;\n\n    var _this$props5 = this.props,\n        className = _this$props5.className,\n        classPrefix = _this$props5.classPrefix,\n        bordered = _this$props5.bordered,\n        hover = _this$props5.hover,\n        size = _this$props5.size,\n        sortable = _this$props5.sortable,\n        children = _this$props5.children,\n        rest = _objectWithoutPropertiesLoose(_this$props5, [\"className\", \"classPrefix\", \"bordered\", \"hover\", \"size\", \"sortable\", \"children\"]);\n\n    var _this$state3 = this.state,\n        sorting = _this$state3.sorting,\n        manager = _this$state3.manager;\n    var addPrefix = prefix(classPrefix);\n    var unhandled = getUnhandledProps(List, rest);\n    var classes = classNames(classPrefix, className, (_classNames = {}, _classNames[addPrefix('bordered')] = bordered, _classNames[addPrefix('sortable')] = sortable, _classNames[addPrefix('sorting')] = sorting, _classNames[addPrefix('hover')] = hover, _classNames));\n    var contextValue = {\n      bordered: bordered,\n      size: size,\n      manager: manager\n    };\n    return React.createElement(ListContext.Provider, {\n      value: contextValue\n    }, React.createElement(\"div\", _extends({\n      ref: this.containerRef,\n      className: classes\n    }, unhandled), children));\n  };\n\n  _createClass(List, [{\n    key: \"containerScrollDelta\",\n    get: function get() {\n      return {\n        left: this.scrollContainer.scrollLeft - this.scrollContainerInitialScroll.left,\n        top: this.scrollContainer.scrollTop - this.scrollContainerInitialScroll.top\n      };\n    }\n  }, {\n    key: \"windowScrollDelta\",\n    get: function get() {\n      return {\n        left: window.pageXOffset - this.windowInitialScroll.left,\n        top: window.pageYOffset - this.windowInitialScroll.top\n      };\n    }\n  }, {\n    key: \"holderTranslate\",\n    get: function get() {\n      return this.animatedNodeOffset.reduce(function (acc, item) {\n        return {\n          x: acc.x - item.x,\n          y: acc.y - item.y\n        };\n      }, {\n        x: 0,\n        y: 0\n      });\n    }\n  }]);\n\n  return List;\n}(React.Component);\n\nList.propTypes = {\n  className: PropTypes.string,\n  classPrefix: PropTypes.string,\n  bordered: PropTypes.bool,\n  hover: PropTypes.bool,\n  sortable: PropTypes.bool,\n  size: PropTypes.oneOf(['lg', 'md', 'sm']),\n  autoScroll: PropTypes.bool,\n  pressDelay: PropTypes.number,\n  transitionDuration: PropTypes.number,\n  onSortStart: PropTypes.func,\n  onSortMove: PropTypes.func,\n  onSortEnd: PropTypes.func,\n  onSort: PropTypes.func\n};\nList.defaultProps = {\n  size: 'md',\n  autoScroll: true,\n  pressDelay: 0,\n  transitionDuration: 300\n};\nvar EnhancedList = defaultProps({\n  classPrefix: 'list'\n})(List);\nsetStatic('Item', ListItem)(EnhancedList);\nexport default EnhancedList;","map":{"version":3,"sources":["E:/OneDrive - University of Salford/Desktop/pizza-website/node_modules/rsuite/es/List/List.js"],"names":["_extends","_objectWithoutPropertiesLoose","_regeneratorRuntime","_createClass","_inheritsLoose","React","PropTypes","setStatic","classNames","on","setInlineStyles","setTranslate3d","setTransitionDuration","closest","getPosition","getEdgeOffset","getScrollingParent","prefix","defaultProps","getUnhandledProps","ListItem","Manager","AutoScroller","ListContext","NodeType","Canvas","Anchor","Button","Input","Option","Textarea","Select","interactiveElements","List","_React$Component","_this","_len","arguments","length","args","Array","_key","call","apply","concat","state","sorting","manager","containerRef","createRef","containerBoundingRect","touched","scrollContainer","scrollContainerInitialScroll","autoScroller","windowInitialScroll","animatedNodeOffset","activeNodeBoundingClientRect","activeNodeGhost","activeNodeFlowBody","activeNodeFlowBodyTranslate","activeNodeMarginOffset","activeNodeOffsetEdge","activeNodeOldIndex","activeNodeNextIndex","activeNodeTranslateMin","activeNodeTranslateMax","windowStartListener","windowEndListener","sortMouseMoveListener","sortMouseEndListener","cursorInitialOffset","cursorCurrentPosition","pressTimer","handleStart","event","_this$props","props","sortable","pressDelay","_this$state","node","target","el","getNodeManagerRef","curManager","HTMLElement","_curManager$info","info","disabled","curNodeManager","button","contains","includes","tagName","contentEditable","preventDefault","setActive","setTimeout","handlePress","handleEnd","_this$state2","clearTimeout","_callee","_this$props2","classPrefix","onSortStart","_manager$getActive","activeNode","index","collection","addItemPrefix","style","activeNodeMargin","async","_callee$","_context","prev","next","getActive","abrupt","window","getComputedStyle","bottom","parseFloat","marginBottom","left","marginLeft","right","marginRight","top","marginTop","x","y","Math","max","getBoundingClientRect","current","scrollLeft","scrollTop","pageXOffset","pageYOffset","document","body","appendChild","cloneNode","classList","add","position","width","height","handleSortMove","passive","handleSortEnd","setState","oldIndex","newIndex","stop","_this$props3","onSortMove","autoScroll","offset","translate","animateNodes","update","maxTranslate","minTranslate","_this$props4","onSortEnd","onSort","transitionDuration","activeManagerRef","activeCollection","managerRefs","getOrderedRefs","off","holderTranslate","containerScrollDelta","parentNode","removeChild","remove","i","len","managerRef","edgeOffset","clear","_proto","prototype","componentDidMount","_this2","componentWillUnmount","_this$windowStartList","_this$windowEndListen","listItemManagerRefs","sortingOffset","_listItemManagerRefs$","offsetWidth","offsetHeight","curEdgeOffset","prvNode","nextNode","distanceTop","windowScrollDelta","render","_classNames","_this$props5","className","bordered","hover","size","children","rest","_this$state3","addPrefix","unhandled","classes","contextValue","createElement","Provider","value","ref","key","get","reduce","acc","item","Component","propTypes","string","bool","oneOf","number","func","EnhancedList"],"mappings":"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","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport { setStatic } from 'recompose';\nimport classNames from 'classnames';\nimport { on } from 'dom-lib';\nimport { setInlineStyles, setTranslate3d, setTransitionDuration, closest, getPosition, getEdgeOffset, getScrollingParent } from './utils';\nimport { prefix, defaultProps, getUnhandledProps } from '../utils';\nimport ListItem from './ListItem';\nimport Manager from './Manager';\nimport AutoScroller from './AutoScroller';\nimport ListContext from './ListContext';\nvar NodeType = {\n  Canvas: 'CANVAS',\n  Anchor: 'A',\n  Button: 'BUTTON',\n  Input: 'INPUT',\n  Option: 'OPTION',\n  Textarea: 'TEXTAREA',\n  Select: 'SELECT'\n};\nvar interactiveElements = [NodeType.Anchor, NodeType.Button, NodeType.Input, NodeType.Option, NodeType.Textarea, NodeType.Select];\n\nvar List =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inheritsLoose(List, _React$Component);\n\n  function List() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _React$Component.call.apply(_React$Component, [this].concat(args)) || this;\n    _this.state = {\n      sorting: false,\n      manager: new Manager()\n    };\n    _this.containerRef = React.createRef();\n    _this.containerBoundingRect = void 0;\n    _this.touched = void 0;\n    _this.scrollContainer = void 0;\n    _this.scrollContainerInitialScroll = void 0;\n    _this.autoScroller = void 0;\n    _this.windowInitialScroll = void 0;\n    _this.animatedNodeOffset = [];\n    _this.activeNodeBoundingClientRect = void 0;\n    _this.activeNodeGhost = void 0;\n    _this.activeNodeFlowBody = void 0;\n    _this.activeNodeFlowBodyTranslate = void 0;\n    _this.activeNodeMarginOffset = void 0;\n    _this.activeNodeOffsetEdge = void 0;\n    _this.activeNodeOldIndex = void 0;\n    _this.activeNodeNextIndex = void 0;\n    _this.activeNodeTranslateMin = void 0;\n    _this.activeNodeTranslateMax = void 0;\n    _this.windowStartListener = void 0;\n    _this.windowEndListener = void 0;\n    _this.sortMouseMoveListener = void 0;\n    _this.sortMouseEndListener = void 0;\n    _this.cursorInitialOffset = void 0;\n    _this.cursorCurrentPosition = void 0;\n    _this.pressTimer = void 0;\n\n    _this.handleStart = function (event) {\n      var _this$props = _this.props,\n          sortable = _this$props.sortable,\n          pressDelay = _this$props.pressDelay;\n      var _this$state = _this.state,\n          sorting = _this$state.sorting,\n          manager = _this$state.manager;\n      var node = closest(event.target, function (el) {\n        return !!manager.getNodeManagerRef(el);\n      });\n      var curManager = manager.getNodeManagerRef(node);\n\n      if (!((event === null || event === void 0 ? void 0 : event.target) && node instanceof HTMLElement && curManager)) {\n        return;\n      }\n\n      var _curManager$info = curManager.info,\n          disabled = _curManager$info.disabled,\n          curNodeManager = _curManager$info.manager;\n\n      if ( //is sortable\n      sortable && //is list item\n      !disabled && //is not secondary button pressed\n      event.button !== 2 && //is this list\n      curNodeManager === manager && //is not sorting\n      !sorting && //excludes interactive elements\n      !node.contains(closest(event.target, function (el) {\n        return interactiveElements.includes(el.tagName) || el.contentEditable === 'true';\n      }))) {\n        event.preventDefault();\n        _this.touched = true;\n        _this.cursorCurrentPosition = getPosition(event);\n        manager.setActive(curManager);\n        _this.pressTimer = setTimeout(function () {\n          return _this.handlePress(event);\n        }, pressDelay);\n      }\n    };\n\n    _this.handleEnd = function () {\n      var _this$state2 = _this.state,\n          sorting = _this$state2.sorting,\n          manager = _this$state2.manager;\n      _this.touched = false;\n\n      if (!sorting) {\n        clearTimeout(_this.pressTimer);\n        manager.setActive(null);\n      }\n    };\n\n    _this.handlePress = function _callee(event) {\n      var _this$props2, classPrefix, onSortStart, manager, _manager$getActive, activeNode, info, index, collection, addItemPrefix, style, activeNodeMargin;\n\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _this$props2 = _this.props, classPrefix = _this$props2.classPrefix, onSortStart = _this$props2.onSortStart;\n              manager = _this.state.manager;\n              _manager$getActive = manager.getActive(), activeNode = _manager$getActive.node, info = _manager$getActive.info; // return if no active node\n\n              if (!(!activeNode || !info)) {\n                _context.next = 5;\n                break;\n              }\n\n              return _context.abrupt(\"return\");\n\n            case 5:\n              index = info.index, collection = info.collection;\n              addItemPrefix = prefix(classPrefix + '-item');\n              style = window.getComputedStyle(activeNode);\n              activeNodeMargin = {\n                bottom: parseFloat(style.marginBottom),\n                left: parseFloat(style.marginLeft),\n                right: parseFloat(style.marginRight),\n                top: parseFloat(style.marginTop)\n              };\n              _this.activeNodeMarginOffset = {\n                x: activeNodeMargin.left + activeNodeMargin.right,\n                y: Math.max(activeNodeMargin.top, activeNodeMargin.bottom)\n              };\n              _this.activeNodeBoundingClientRect = activeNode.getBoundingClientRect();\n              _this.containerBoundingRect = _this.scrollContainer.getBoundingClientRect();\n              _this.activeNodeOldIndex = index;\n              _this.activeNodeNextIndex = index;\n              _this.activeNodeOffsetEdge = getEdgeOffset(activeNode, _this.containerRef.current);\n              _this.cursorInitialOffset = getPosition(event);\n              _this.scrollContainerInitialScroll = {\n                left: _this.scrollContainer.scrollLeft,\n                top: _this.scrollContainer.scrollTop\n              };\n              _this.windowInitialScroll = {\n                left: window.pageXOffset,\n                top: window.pageYOffset\n              };\n              _this.activeNodeFlowBody = document.body.appendChild(activeNode.cloneNode(true));\n              _this.activeNodeFlowBody && _this.activeNodeFlowBody.classList.add(addItemPrefix('helper'));\n              setInlineStyles(_this.activeNodeFlowBody, {\n                position: 'fixed',\n                width: _this.activeNodeBoundingClientRect.width + \"px\",\n                height: _this.activeNodeBoundingClientRect.height + \"px\",\n                left: _this.activeNodeBoundingClientRect.left - activeNodeMargin.left + \"px\",\n                top: _this.activeNodeBoundingClientRect.top - activeNodeMargin.top + \"px\"\n              });\n              _this.activeNodeGhost = activeNode;\n              activeNode.classList.add(addItemPrefix('holder'));\n              _this.activeNodeTranslateMin = {\n                y: _this.containerBoundingRect.top - _this.activeNodeBoundingClientRect.top - _this.activeNodeBoundingClientRect.height / 2\n              };\n              _this.activeNodeTranslateMax = {\n                y: _this.containerBoundingRect.top + _this.containerBoundingRect.height - _this.activeNodeBoundingClientRect.top - _this.activeNodeBoundingClientRect.height / 2\n              };\n              _this.sortMouseMoveListener = on(window, 'mousemove', _this.handleSortMove, {\n                passive: false\n              });\n              _this.sortMouseEndListener = on(window, 'mouseup', _this.handleSortEnd, {\n                passive: false\n              });\n\n              _this.setState({\n                sorting: true\n              });\n\n              if (onSortStart) {\n                onSortStart({\n                  collection: collection,\n                  node: activeNode,\n                  oldIndex: _this.activeNodeOldIndex,\n                  newIndex: _this.activeNodeNextIndex\n                }, event);\n              }\n\n            case 29:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      });\n    };\n\n    _this.handleSortMove = function (event) {\n      var _this$props3 = _this.props,\n          onSortMove = _this$props3.onSortMove,\n          autoScroll = _this$props3.autoScroll;\n      var manager = _this.state.manager; // Update helper position\n\n      var offset = getPosition(event);\n      var translate = {\n        x: offset.x - _this.cursorInitialOffset.x,\n        y: offset.y - _this.cursorInitialOffset.y\n      }; // Adjust for window scroll\n\n      translate.x -= window.pageXOffset - _this.windowInitialScroll.left;\n      translate.y -= window.pageYOffset - _this.windowInitialScroll.top;\n      _this.activeNodeFlowBodyTranslate = translate;\n      setTranslate3d(_this.activeNodeFlowBody, translate);\n\n      _this.animateNodes(); // auto scroll\n\n\n      if (autoScroll) {\n        _this.autoScroller.update({\n          width: _this.activeNodeBoundingClientRect.width,\n          height: _this.activeNodeBoundingClientRect.height,\n          translate: _this.activeNodeFlowBodyTranslate,\n          maxTranslate: _this.activeNodeTranslateMax,\n          minTranslate: _this.activeNodeTranslateMin\n        });\n      }\n\n      if (onSortMove) {\n        onSortMove({\n          collection: manager.getActive().info.collection,\n          node: manager.getActive().node,\n          oldIndex: _this.activeNodeOldIndex,\n          newIndex: _this.activeNodeNextIndex\n        }, event);\n      }\n    };\n\n    _this.handleSortEnd = function (event) {\n      var _this$props4 = _this.props,\n          onSortEnd = _this$props4.onSortEnd,\n          onSort = _this$props4.onSort,\n          classPrefix = _this$props4.classPrefix,\n          transitionDuration = _this$props4.transitionDuration;\n      var manager = _this.state.manager;\n      var activeManagerRef = manager.getActive();\n      var activeCollection = activeManagerRef ? activeManagerRef.info.collection : 0;\n      var managerRefs = manager.getOrderedRefs(activeCollection);\n      var addItemPrefix = prefix(classPrefix + '-item'); // Remove the event listeners\n\n      _this.sortMouseMoveListener.off();\n\n      _this.sortMouseEndListener.off();\n\n      setTransitionDuration(_this.activeNodeFlowBody, transitionDuration);\n      setTranslate3d(_this.activeNodeFlowBody, {\n        x: _this.holderTranslate.x - _this.containerScrollDelta.left,\n        y: _this.holderTranslate.y - _this.containerScrollDelta.top\n      }); // wait for animation\n\n      setTimeout(function () {\n        // Remove the helper from the DOM\n        if (_this.activeNodeFlowBody) {\n          _this.activeNodeFlowBody.parentNode && _this.activeNodeFlowBody.parentNode.removeChild(_this.activeNodeFlowBody);\n          _this.activeNodeFlowBody = null;\n        }\n\n        if (_this.activeNodeGhost) {\n          _this.activeNodeGhost.classList.remove(addItemPrefix('holder'));\n\n          setTranslate3d(_this.activeNodeGhost, null);\n          _this.animatedNodeOffset = [];\n        }\n\n        for (var i = 0, len = managerRefs.length; i < len; i++) {\n          var managerRef = managerRefs[i];\n          var el = managerRef.node; // Clear the cached offsetTop / offsetLeft value\n\n          managerRef.edgeOffset = null; // Remove the transforms / transitions\n\n          setTranslate3d(el, null);\n          setTransitionDuration(el, null);\n        } // Stop autoScroll\n\n\n        _this.autoScroller.clear(); // Update manager state\n\n\n        manager.setActive(null);\n\n        _this.setState({\n          sorting: false\n        });\n\n        if (typeof onSortEnd === 'function') {\n          onSortEnd({\n            collection: activeCollection,\n            node: activeManagerRef.node,\n            newIndex: _this.activeNodeNextIndex,\n            oldIndex: _this.activeNodeOldIndex\n          }, event);\n        }\n\n        if (typeof onSort === 'function') {\n          onSort({\n            collection: activeCollection,\n            node: activeManagerRef.node,\n            newIndex: _this.activeNodeNextIndex,\n            oldIndex: _this.activeNodeOldIndex\n          }, event);\n        }\n      }, transitionDuration);\n    };\n\n    return _this;\n  }\n\n  var _proto = List.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    var _this2 = this;\n\n    if (this.containerRef.current instanceof HTMLElement) {\n      this.scrollContainer = getScrollingParent(this.containerRef.current) || this.containerRef.current;\n      this.autoScroller = new AutoScroller(this.scrollContainer, function (offset) {\n        _this2.activeNodeFlowBodyTranslate.x += offset.left;\n        _this2.activeNodeFlowBodyTranslate.y += offset.top;\n      });\n      this.windowStartListener = on(this.containerRef.current, 'mousedown', this.handleStart, {\n        passive: false\n      });\n      this.windowEndListener = on(this.containerRef.current, 'mouseup', this.handleEnd, {\n        passive: false\n      });\n    }\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    var _this$windowStartList, _this$windowEndListen;\n\n    (_this$windowStartList = this.windowStartListener) === null || _this$windowStartList === void 0 ? void 0 : _this$windowStartList.off();\n    (_this$windowEndListen = this.windowEndListener) === null || _this$windowEndListen === void 0 ? void 0 : _this$windowEndListen.off();\n  };\n\n  _proto.animateNodes = function animateNodes() {\n    var transitionDuration = this.props.transitionDuration;\n    var manager = this.state.manager;\n    var listItemManagerRefs = manager.getOrderedRefs();\n    var sortingOffset = {\n      left: this.activeNodeOffsetEdge.left + this.activeNodeFlowBodyTranslate.x + this.containerScrollDelta.left,\n      top: this.activeNodeOffsetEdge.top + this.activeNodeFlowBodyTranslate.y + this.containerScrollDelta.top\n    };\n    this.activeNodeNextIndex = -1;\n\n    for (var i = 0, len = listItemManagerRefs.length; i < len; i++) {\n      var _listItemManagerRefs$ = listItemManagerRefs[i],\n          node = _listItemManagerRefs$.node,\n          index = _listItemManagerRefs$.info.index,\n          edgeOffset = _listItemManagerRefs$.edgeOffset;\n      var width = node.offsetWidth;\n      var height = node.offsetHeight;\n      var offset = {\n        height: this.activeNodeBoundingClientRect.height > height ? height / 2 : this.activeNodeBoundingClientRect.height / 2,\n        width: this.activeNodeBoundingClientRect.width > width ? width / 2 : this.activeNodeBoundingClientRect.width / 2\n      };\n      var translate = {\n        x: 0,\n        y: 0\n      }; // If we haven't cached the node's offsetTop / offsetLeft value\n\n      var curEdgeOffset = edgeOffset || getEdgeOffset(node, this.containerRef.current);\n      listItemManagerRefs[i].edgeOffset = curEdgeOffset; // Get a reference to the next node\n\n      var prvNode = i > 0 && listItemManagerRefs[i - 1];\n      var nextNode = i < len - 1 && listItemManagerRefs[i + 1]; // Also cache the node's edge offset if needed.\n\n      if (prvNode && !prvNode.edgeOffset) {\n        prvNode.edgeOffset = getEdgeOffset(prvNode.node, this.containerRef.current);\n      }\n\n      if (nextNode && !nextNode.edgeOffset) {\n        nextNode.edgeOffset = getEdgeOffset(nextNode.node, this.containerRef.current);\n      } // If the node is the one we're currently animating, skip it\n\n\n      if (index === this.activeNodeOldIndex) {\n        continue;\n      }\n\n      var distanceTop = sortingOffset.top + this.windowScrollDelta.top;\n\n      if (prvNode && index > this.activeNodeOldIndex && distanceTop + offset.height >= curEdgeOffset.top) {\n        translate.y = prvNode.edgeOffset.top - curEdgeOffset.top;\n        this.activeNodeNextIndex = index;\n      } else if (nextNode && index < this.activeNodeOldIndex && distanceTop <= curEdgeOffset.top + offset.height) {\n        translate.y = nextNode.edgeOffset.top - curEdgeOffset.top;\n\n        if (this.activeNodeNextIndex === -1) {\n          this.activeNodeNextIndex = index;\n        }\n      }\n\n      setTransitionDuration(node, transitionDuration);\n      setTranslate3d(node, translate); // translate holder\n\n      this.animatedNodeOffset[index] = translate;\n      setTranslate3d(this.activeNodeGhost, this.holderTranslate);\n    }\n\n    if (this.activeNodeNextIndex === -1) {\n      this.activeNodeNextIndex = this.activeNodeOldIndex;\n    }\n  };\n\n  _proto.render = function render() {\n    var _classNames;\n\n    var _this$props5 = this.props,\n        className = _this$props5.className,\n        classPrefix = _this$props5.classPrefix,\n        bordered = _this$props5.bordered,\n        hover = _this$props5.hover,\n        size = _this$props5.size,\n        sortable = _this$props5.sortable,\n        children = _this$props5.children,\n        rest = _objectWithoutPropertiesLoose(_this$props5, [\"className\", \"classPrefix\", \"bordered\", \"hover\", \"size\", \"sortable\", \"children\"]);\n\n    var _this$state3 = this.state,\n        sorting = _this$state3.sorting,\n        manager = _this$state3.manager;\n    var addPrefix = prefix(classPrefix);\n    var unhandled = getUnhandledProps(List, rest);\n    var classes = classNames(classPrefix, className, (_classNames = {}, _classNames[addPrefix('bordered')] = bordered, _classNames[addPrefix('sortable')] = sortable, _classNames[addPrefix('sorting')] = sorting, _classNames[addPrefix('hover')] = hover, _classNames));\n    var contextValue = {\n      bordered: bordered,\n      size: size,\n      manager: manager\n    };\n    return React.createElement(ListContext.Provider, {\n      value: contextValue\n    }, React.createElement(\"div\", _extends({\n      ref: this.containerRef,\n      className: classes\n    }, unhandled), children));\n  };\n\n  _createClass(List, [{\n    key: \"containerScrollDelta\",\n    get: function get() {\n      return {\n        left: this.scrollContainer.scrollLeft - this.scrollContainerInitialScroll.left,\n        top: this.scrollContainer.scrollTop - this.scrollContainerInitialScroll.top\n      };\n    }\n  }, {\n    key: \"windowScrollDelta\",\n    get: function get() {\n      return {\n        left: window.pageXOffset - this.windowInitialScroll.left,\n        top: window.pageYOffset - this.windowInitialScroll.top\n      };\n    }\n  }, {\n    key: \"holderTranslate\",\n    get: function get() {\n      return this.animatedNodeOffset.reduce(function (acc, item) {\n        return {\n          x: acc.x - item.x,\n          y: acc.y - item.y\n        };\n      }, {\n        x: 0,\n        y: 0\n      });\n    }\n  }]);\n\n  return List;\n}(React.Component);\n\nList.propTypes = {\n  className: PropTypes.string,\n  classPrefix: PropTypes.string,\n  bordered: PropTypes.bool,\n  hover: PropTypes.bool,\n  sortable: PropTypes.bool,\n  size: PropTypes.oneOf(['lg', 'md', 'sm']),\n  autoScroll: PropTypes.bool,\n  pressDelay: PropTypes.number,\n  transitionDuration: PropTypes.number,\n  onSortStart: PropTypes.func,\n  onSortMove: PropTypes.func,\n  onSortEnd: PropTypes.func,\n  onSort: PropTypes.func\n};\nList.defaultProps = {\n  size: 'md',\n  autoScroll: true,\n  pressDelay: 0,\n  transitionDuration: 300\n};\nvar EnhancedList = defaultProps({\n  classPrefix: 'list'\n})(List);\nsetStatic('Item', ListItem)(EnhancedList);\nexport default EnhancedList;"]},"metadata":{},"sourceType":"module"}